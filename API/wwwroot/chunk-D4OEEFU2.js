import{a as K}from"./chunk-SBTJKJNK.js";import{l as w,p as q,q as H}from"./chunk-SPNNO5LP.js";import{s as N}from"./chunk-E6ZKMAWP.js";import{$b as v,Bb as u,Dc as C,Ec as T,Fa as g,Ga as x,Ib as l,Jd as O,Na as R,Rc as V,S as D,Sd as y,Td as B,U as E,Vb as s,Wb as c,Xb as A,Yb as S,Zb as I,cc as b,dc as o,hd as P,id as j,lb as a,mb as _,oc as m,od as U,pc as p,qa as f,qc as k,va as M,xc as F,ya as $}from"./chunk-2LHIXASS.js";var L=(()=>{let n=class n{constructor(){this.translocoService=f(y)}transform(e){if(e==null)return"";switch(e){case w.System:return this.translocoService.translate("site-theme-provider-pipe.system");case w.User:return this.translocoService.translate("site-theme-provider-pipe.user");default:return""}}};n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=$({name:"siteThemeProvider",type:n,pure:!0,standalone:!0});let i=n;return i})();function G(i,n){if(i&1){let r=v();s(0,"div",8)(1,"button",9),b("click",function(){g(r);let t=o(2);return x(t.scan())}),A(2,"i",10),m(3),c()()}if(i&2){let r=o().$implicit;a(3),k("\xA0",r("scan")," ")}}function J(i,n){if(i&1&&(s(0,"p"),m(1),s(2,"a",11),m(3),c()()),i&2){let r=o().$implicit;a(),k(" ",r("looking-for-theme"),""),a(2),p(r("looking-for-theme-continued"))}}function W(i,n){if(i&1){let r=v();s(0,"button",18),b("click",function(){g(r);let t=o().$implicit,d=o(2);return x(d.updateDefault(t))}),m(1),c()}if(i&2){let r=o().$implicit,e=o().$implicit;l("disabled",r.isDefault),a(),p(e("set-default"))}}function X(i,n){if(i&1){let r=v();S(0),s(1,"div",12)(2,"div",13)(3,"h5",14),m(4),C(5,"sentenceCase"),c(),s(6,"h6",15),m(7),C(8,"siteThemeProvider"),c(),u(9,W,2,2,"button",16),s(10,"button",17),b("click",function(){let t=g(r).$implicit,d=o(2);return x(d.applyTheme(t))}),m(11),c()()(),I()}if(i&2){let r=n.$implicit,e=o().$implicit,t=o();a(4),p(T(5,5,r.name)),a(3),p(T(8,7,r.provider)),a(2),l("ngIf",t.isAdmin),a(),l("disabled",(t.currentTheme==null?null:t.currentTheme.id)===r.id),a(),p((t.currentTheme==null?null:t.currentTheme.id)===r.id?e("applied"):e("apply"))}}function Y(i,n){if(i&1&&(S(0),s(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),m(5),c()(),u(6,G,4,1,"div",4),c(),u(7,J,4,2,"p",5),s(8,"div",6)(9,"h4"),m(10),c(),u(11,X,12,9,"ng-container",7),C(12,"async"),c()(),I()),i&2){let r=n.$implicit,e=o();a(5),p(r("title")),a(),l("ngIf",e.isAdmin),a(),l("ngIf",e.isAdmin),a(3),p(r("site-themes")),a(),l("ngForOf",T(12,5,e.themeService.themes$))}}var _e=(()=>{let n=class n{constructor(e,t,d,Q){this.themeService=e,this.accountService=t,this.toastr=d,this.cdRef=Q,this.isAdmin=!1,this.destroyRef=f(R),this.translocService=f(y),e.currentTheme$.pipe(O(this.destroyRef),E()).subscribe(h=>{this.currentTheme=h,this.cdRef.markForCheck()}),t.currentUser$.pipe(D(1)).subscribe(h=>{h&&(this.user=h,this.isAdmin=t.hasAdminRole(h),this.cdRef.markForCheck())})}applyTheme(e){if(!this.user)return;let t=Object.assign({},this.user.preferences);t.theme=e,this.accountService.updatePreferences(t).subscribe()}updateDefault(e){this.themeService.setDefault(e.id).subscribe(()=>{this.toastr.success(this.translocService.translate("theme-manager.updated-toastr",{name:e.name}))})}scan(){this.themeService.scan().subscribe(()=>{this.toastr.info(this.translocService.translate("theme-manager.scan-queued"))})}};n.\u0275fac=function(t){return new(t||n)(_(q),_(H),_(N),_(V))},n.\u0275cmp=M({type:n,selectors:[["app-theme-manager"]],standalone:!0,features:[F],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-8"],["class","col-4",4,"ngIf"],[4,"ngIf"],[1,"row","g-0"],[4,"ngFor","ngForOf"],[1,"col-4"],[1,"btn","btn-primary","float-end",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],["href","https://github.com/Kareadita/Themes","target","_blank","rel","noopener noreferrer"],[1,"card","col-auto","me-3","mb-3",2,"width","18rem"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],["class","btn btn-secondary me-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-secondary","me-2",3,"click","disabled"]],template:function(t,d){t&1&&u(0,Y,13,7,"ng-container",0),t&2&&l("translocoRead","theme-manager")},dependencies:[j,P,U,K,L,B],styles:["/*# sourceMappingURL=theme-manager.component-64TM5HQO.css.map */"],changeDetection:0});let i=n;return i})();export{_e as ThemeManagerComponent};
//# sourceMappingURL=chunk-D4OEEFU2.js.map
