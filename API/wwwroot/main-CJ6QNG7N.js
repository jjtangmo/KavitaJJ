import{a as Eo}from"./chunk-T42ECNDU.js";import{a as _n,b as Mo}from"./chunk-MK37P623.js";import{a as ko}from"./chunk-TXAP7OV7.js";import"./chunk-FEVPSYU2.js";import{a as To}from"./chunk-5JNCF2FD.js";import{a as io,b as Vi}from"./chunk-IAMUJYOJ.js";import{a as Ht}from"./chunk-DATLIK2Y.js";import"./chunk-C2T36BOI.js";import"./chunk-CASH644A.js";import{a as co,b as mo,c as vo,d as yo,g as Co,h as So}from"./chunk-GGQU56QW.js";import{a as go}from"./chunk-V7YNUPX5.js";import{a as wo,b as fn}from"./chunk-I6T7P5FM.js";import{g as lo,i as Jt,j as po}from"./chunk-CIDLU7ZZ.js";import"./chunk-FVF23ION.js";import{a as Qe,b as no,c as ro,d as j,j as _o,k as fo,l as ho,m as xo}from"./chunk-ZTKUYOP3.js";import"./chunk-2JQ3KAM5.js";import"./chunk-5TIUG6K2.js";import"./chunk-IYLIANWB.js";import"./chunk-63UKDQJP.js";import{a as oo,b as Di}from"./chunk-COKVODYN.js";import{a as ao}from"./chunk-K6JLHPZK.js";import{a as Ri}from"./chunk-SEAKSSGD.js";import"./chunk-KWNQHRPC.js";import{d as uo}from"./chunk-STVWBYRJ.js";import"./chunk-SBPQBTA5.js";import"./chunk-23B3ZJIN.js";import"./chunk-6SSGNI4N.js";import"./chunk-YK7KIY5R.js";import{a as tt}from"./chunk-WBO5KV4A.js";import{a as Se,b as xe}from"./chunk-LAUBKCQL.js";import{a as Gt}from"./chunk-46CIW37K.js";import{k as so}from"./chunk-76TOP2FJ.js";import"./chunk-4XR5JJUF.js";import{a as it}from"./chunk-DBXQZVFZ.js";import"./chunk-5XQ66AVT.js";import{a as bo}from"./chunk-RLL2TM5C.js";import{a as Io}from"./chunk-WIQ43ZSS.js";import"./chunk-CNATNHH2.js";import{c as bt,d as Xt,e as dt,f as ut}from"./chunk-5CMEBAZF.js";import"./chunk-ZRHV3LXB.js";import{a as Ai}from"./chunk-SBTJKJNK.js";import{a as Er,b as Lt,d as Tr,e as Be,f as ki,g as wr,h as kr,i as pn,j as qe,k as Mi,m as Dr,n as Xr,o as Pi,p as to,q as pe}from"./chunk-SPNNO5LP.js";import{a as Sr,b as xr,c as wi,d as br,f as z,g as et,j as Jr,k as dn,p as Bt,q as un,r as Fi,s as Ut,t as eo}from"./chunk-E6ZKMAWP.js";import{$ as mi,$b as w,$d as Zt,Aa as lr,Ac as J,Ae as Lr,Bb as f,Bc as Ci,Dc as M,Dd as Ti,Ec as P,Ed as mn,F as li,Fa as S,Fb as ce,Fc as ze,Fd as yr,G as nr,Ga as x,Gc as $,Gd as Cr,Hd as Ii,I as rr,Ib as d,Id as Ir,J as or,Jd as ee,Kb as fi,Kd as Mr,Ke as $r,L as fe,Ld as Ni,Le as zr,Md as Nr,Me as Br,Na as ge,Nb as Yt,Nc as Si,Nd as Or,Ne as Ur,O as ar,Od as Oi,Oe as Gr,Pa as $e,Pe as Je,Q as ci,Qe as zt,Rb as dr,Rc as Q,Rd as st,S as at,Sd as pt,Se as Hr,Tb as ur,Td as K,U as Pt,Ua as ln,Ub as _r,Ue as jr,Vb as l,Vd as Pr,Ve as Kr,Wb as p,Wd as Fr,We as qr,Xb as C,Xd as Rr,Xe as Qr,Yb as v,Zb as y,Zd as Ar,Ze as Wr,_b as me,_c as Vt,_d as Ne,a as ue,aa as sr,af as Yr,ba as sn,be as Oe,ca as ke,cc as b,ce as Ue,d as Ot,dc as c,de as De,eb as xt,ec as fr,fa as ae,fb as ve,fc as hr,fe as se,ff as Zr,g as ot,gc as hi,gd as Ie,ge as Vr,ha as U,hb as Ft,hc as gi,hd as Me,he as Ge,ib as cn,id as W,jc as Re,jd as xi,ka as he,kc as vi,kd as bi,la as pi,lb as a,lc as ye,mb as L,mc as Ce,md as vr,me as He,n as Ct,na as St,nc as q,nd as Ei,ne as je,o as tr,oc as _,od as Xe,pa as Te,pb as cr,pc as g,qa as T,qc as D,rb as mr,rc as yi,t as on,tb as pr,tc as Rt,u as mt,uc as Dt,ud as te,v as an,va as G,vc as At,w as ir,wa as di,xc as H,ya as ui,yc as gr,ye as $t,z as _e,za as _i,zc as ne,ze as Pe}from"./chunk-2LHIXASS.js";var $a=[[["","actions",""]]],za=["[actions]"],Li=(n,t)=>({closed:n,active:t}),Ba=()=>({});function Ua(n,t){if(n&1&&(v(0),l(1,"div",6),M(2,"async"),me(3,7),p(),y()),n&2){let e=c(),i=q(4);a(),d("ngClass",J(4,Li,P(2,2,e.navService.sideNavCollapsed$),e.highlighted)),a(2),d("ngTemplateOutlet",i)}}function Ga(n,t){if(n&1&&(v(0),l(1,"a",8),M(2,"async"),me(3,7),p(),y()),n&2){let e=c(2),i=q(4);a(),d("href",e.link,ve)("ngClass",J(5,Li,P(2,3,e.navService.sideNavCollapsed$),e.highlighted)),a(2),d("ngTemplateOutlet",i)}}function Ha(n,t){if(n&1){let e=w();v(0),l(1,"a",9),M(2,"async"),b("click",function(){S(e);let r=c(3);return x(r.openLink())}),me(3,7),p(),y()}if(n&2){let e=c(3),i=q(4);a(),d("ngClass",J(4,Li,P(2,2,e.navService.sideNavCollapsed$),e.highlighted)),a(2),d("ngTemplateOutlet",i)}}function ja(n,t){if(n&1&&(l(0,"a",10),M(1,"async"),me(2,7),p()),n&2){let e=c(3),i=q(4);d("ngClass",J(6,Li,P(1,4,e.navService.sideNavCollapsed$),e.highlighted))("routerLink",e.link)("queryParams",e.queryParams),a(2),d("ngTemplateOutlet",i)}}function Ka(n,t){if(n&1&&f(0,Ha,4,7,"ng-container",5)(1,ja,3,9,"ng-template",null,3,$),n&2){let e=q(2),i=c(2);d("ngIf",i.queryParams&&i.queryParams!==gr(2,Ba))("ngIfElse",e)}}function qa(n,t){if(n&1&&f(0,Ga,4,8,"ng-container",5)(1,Ka,3,3,"ng-template",null,2,$),n&2){let e=q(2),i=c();d("ngIf",i.external)("ngIfElse",e)}}function Qa(n,t){if(n&1&&(v(0),C(1,"app-image",15),y()),n&2){let e=c(2);a(),d("imageUrl",e.imageUrl)}}function Wa(n,t){if(n&1&&C(0,"i",16),n&2){let e=c(2);Yt("fa ",e.icon,"")}}function Ya(n,t){if(n&1&&(C(0,"div",11),l(1,"span",12)(2,"div"),f(3,Qa,2,1,"ng-container",5)(4,Wa,1,3,"ng-template",null,4,$),p()(),l(6,"span",13)(7,"div"),_(8),p()(),l(9,"span",14),hr(10),p()),n&2){let e=q(5),i=c();a(),hi("title",i.title),a(2),d("ngIf",i.imageUrl!==null&&i.imageUrl!=="")("ngIfElse",e),a(5),D(" ",i.title," ")}}var No=(()=>{let t=class t{constructor(i,r,o){this.navService=i,this.router=r,this.cdRef=o,this.icon="",this.imageUrl="",this.title="",this.external=!1,this.queryParams=void 0,this.comparisonMethod="equals",this.destroyRef=T(ge),this.highlighted=!1,r.events.pipe(fe(s=>s instanceof Lt),ee(this.destroyRef),_e(s=>s)).subscribe(s=>{let m=s.url.split("?"),[u,h=void 0]=m;this.updateHighlight(u,h)})}ngOnInit(){setTimeout(()=>{this.updateHighlight(this.router.url.split("?")[0])},100)}updateHighlight(i,r){if(this.link===void 0){this.highlighted=!1,this.cdRef.markForCheck();return}if(!i.endsWith("/")&&!r&&(i=i+"/"),this.comparisonMethod==="equals"&&i===this.link){this.highlighted=!0,this.cdRef.markForCheck();return}if(this.comparisonMethod==="startsWith"&&i.startsWith(this.link)){if(r&&r===this.queryParams){this.highlighted=!0,this.cdRef.markForCheck();return}this.highlighted=!0,this.cdRef.markForCheck();return}this.highlighted=!1,this.cdRef.markForCheck()}openLink(){if(Object.keys(this.queryParams).length===0){this.router.navigateByUrl(this.link);return}this.router.navigateByUrl(this.link+"?"+this.queryParams)}};t.\u0275fac=function(r){return new(r||t)(L(tt),L(Be),L(Q))},t.\u0275cmp=G({type:t,selectors:[["app-side-nav-item"]],inputs:{icon:"icon",imageUrl:"imageUrl",title:"title",link:"link",external:"external",queryParams:"queryParams",comparisonMethod:"comparisonMethod"},standalone:!0,features:[H],ngContentSelectors:za,decls:5,vars:2,consts:[["useLink",""],["inner",""],["internal",""],["regInternalLink",""],["iconImg",""],[4,"ngIf","ngIfElse"],[1,"side-nav-item",3,"ngClass"],[3,"ngTemplateOutlet"],["rel","noopener noreferrer","target","_blank",1,"side-nav-item",3,"href","ngClass"],["href","javascript:void(0);",1,"side-nav-item",3,"click","ngClass"],["href","javascript:void(0);",1,"side-nav-item",3,"ngClass","routerLink","queryParams"],[1,"active-highlight"],[1,"phone-hidden",3,"title"],[1,"side-nav-text"],[1,"card-actions"],["width","20px","height","20px",3,"imageUrl"],["aria-hidden","true"]],template:function(r,o){if(r&1&&(fr($a),f(0,Ua,4,7,"ng-container",5)(1,qa,3,2,"ng-template",null,0,$)(3,Ya,11,4,"ng-template",null,1,$)),r&2){let s=q(2);d("ngIf",o.link===void 0||(o.link==null?null:o.link.length)===0)("ngIfElse",s)}},dependencies:[te,Ie,W,Ei,Xe,ki,Di],styles:[`.side-nav-item[_ngcontent-%COMP%]{position:relative;align-items:center;display:flex;justify-content:space-between;padding:0 10px;width:100%;height:auto;min-height:40px;overflow:hidden;cursor:pointer}.side-nav-item[_ngcontent-%COMP%]   .side-nav-text[_ngcontent-%COMP%]{opacity:1;min-width:100px}.side-nav-item[_ngcontent-%COMP%]   .side-nav-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{min-width:102px;width:100%}.side-nav-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex}.side-nav-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{flex-grow:1;justify-content:end}.side-nav-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{align-items:center;display:flex;height:100%;justify-content:inherit;min-width:30px;width:100%;padding-left:5px}.side-nav-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.side-nav-item.closed[_ngcontent-%COMP%]   .side-nav-text[_ngcontent-%COMP%], .side-nav-item.closed[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{opacity:0}.side-nav-item.closed.active[_ngcontent-%COMP%]{color:var(--side-nav-item-active-color);background-color:unset}.side-nav-item[_ngcontent-%COMP%]:hover{color:var(--side-nav-hover-text-color);background-color:var(--side-nav-hover-bg-color)}.side-nav-item[_ngcontent-%COMP%]:hover   .card-actions[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{color:var(--side-nav-hover-text-color)!important}.side-nav-item.active[_ngcontent-%COMP%]{color:var(--side-nav-item-active-color);background-color:var(--side-nav-active-bg-color)}.side-nav-item.active[_ngcontent-%COMP%]   .active-highlight[_ngcontent-%COMP%]{background-color:var(--side-nav-item-active-color);width:5px;height:100%;position:absolute;left:0}.side-nav-item.active[_ngcontent-%COMP%]   .side-nav-text[_ngcontent-%COMP%], .side-nav-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--side-nav-item-active-text-color)!important}.side-nav-item.active[_ngcontent-%COMP%]:hover{color:var(--side-nav-hover-text-color);background-color:var(--side-nav-hover-bg-color)}.side-nav-item.active[_ngcontent-%COMP%]:hover   .card-actions[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{color:var(--side-nav-hover-text-color)!important}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--side-nav-text-color)}@media (max-width: 576px){.side-nav-item[_ngcontent-%COMP%]{align-items:center;padding:15px 10px;height:70px;font-size:1rem}.side-nav-item[_ngcontent-%COMP%]   .side-nav-text[_ngcontent-%COMP%]{width:100%}.side-nav-item.closed[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{font-size:inherit}}
/*# sourceMappingURL=side-nav-item.component-NVKXHYF6.css.map */`],changeDetection:0});let n=t;return n})();var $i=(()=>{let t=class t{transform(i){return st("stream-pipe."+i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=ui({name:"streamName",type:t,pure:!0,standalone:!0});let n=t;return n})();var Za=(n,t)=>({"fas fa-eye":n,"fa-solid fa-eye-slash":t});function Xa(n,t){if(n&1&&(l(0,"span"),_(1),M(2,"streamName"),p()),n&2){let e=c(2);a(),D(" ",P(2,1,e.item.name)," ")}}function Ja(n,t){if(n&1&&_(0),n&2){let e=c(2);D(" ",e.item.name," ")}}function es(n,t){if(n&1&&(l(0,"div",11)(1,"a",13),_(2),p()()),n&2){let e=c().$implicit,i=c();a(),d("href","/all-series?"+i.item.smartFilterEncoded,ve),a(),g(e("load-filter"))}}function ts(n,t){if(n&1){let e=w();v(0),l(1,"div",2)(2,"div",3)(3,"h5",4),f(4,Xa,3,3,"span",5)(5,Ja,1,1,"ng-template",null,0,$),l(7,"span",6)(8,"button",7),b("click",function(){S(e);let r=c();return x(r.hide.emit(r.item))}),C(9,"i",8),l(10,"span",9),_(11),p()()()(),l(12,"div",10)(13,"div",11),_(14),p(),f(15,es,3,2,"div",12),p()()(),y()}if(n&2){let e=t.$implicit,i=q(6),r=c();a(3),gi("id","item.id--",r.position,""),a(),d("ngIf",r.item.isProvided)("ngIfElse",i),a(5),d("ngClass",J(8,Za,r.item.visible,!r.item.visible)),a(2),g(e("remove")),a(3),D(" ",e(r.item.isProvided?"provided":"smart-filter")," "),a(),d("ngIf",!r.item.isProvided)}}var Oo=(()=>{let t=class t{constructor(){this.position=0,this.hide=new $e}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=G({type:t,selectors:[["app-dashboard-stream-list-item"]],inputs:{item:"item",position:"position"},outputs:{hide:"hide"},standalone:!0,features:[H],decls:1,vars:1,consts:[["nonProvidedTitle",""],[4,"transloco","translocoRead"],[1,"row","pt-2","g-0","list-item"],[1,"g-0"],[1,"mb-1","pb-0",3,"id"],[4,"ngIf","ngIfElse"],[1,"float-end"],[1,"btn","btn-icon","p-0",3,"click"],["aria-hidden","true",1,"me-1",3,"ngClass"],[1,"visually-hidden"],[1,"meta"],[1,"ps-1"],["class","ps-1",4,"ngIf"],["target","_blank",3,"href"]],template:function(r,o){r&1&&f(0,ts,16,11,"ng-container",1),r&2&&d("translocoRead","stream-list-item")},dependencies:[te,Ie,W,K,$i],styles:[`.list-item[_ngcontent-%COMP%]{height:60px;max-height:60px}.meta[_ngcontent-%COMP%]{display:flex}
/*# sourceMappingURL=dashboard-stream-list-item.component-N5527VZ5.css.map */`],changeDetection:0});let n=t;return n})();function is(n,t){if(n&1){let e=w();l(0,"app-dashboard-stream-list-item",8),b("hide",function(r){let o=S(e).idx,s=c(2);return x(s.updateVisibility(r,o))}),p()}if(n&2){let e=t.idx,i=t.$implicit;d("item",i)("position",e)}}function ns(n,t){if(n&1){let e=w();l(0,"div",9)(1,"label",10),_(2),p(),l(3,"div",11),C(4,"input",12),l(5,"button",13),b("click",function(){S(e);let r=c(2);return x(r.resetFilter())}),_(6),p()()()}if(n&2){let e=c().$implicit;a(2),g(e("filter")),a(4),g(e("clear"))}}function rs(n,t){if(n&1){let e=w();l(0,"li",14),_(1),l(2,"button",15),b("click",function(){let r=S(e).$implicit,o=c(2);return x(o.addFilterToStream(r))}),C(3,"i",16),_(4),p()()}if(n&2){let e=t.$implicit,i=c().$implicit;a(),D(" ",e.name," "),a(3),D(" ",i("add")," ")}}function os(n,t){if(n&1&&(l(0,"li",17),_(1),p()),n&2){let e=c().$implicit;a(),D(" ",e("no-data")," ")}}function as(n,t){if(n&1){let e=w();v(0),l(1,"app-draggable-ordered-list",2),b("orderUpdated",function(r){S(e);let o=c();return x(o.orderUpdated(r))}),f(2,is,1,2,"ng-template",null,0,$),p(),l(4,"h5"),_(5,"Smart Filters"),p(),l(6,"form",3),f(7,ns,7,2,"div",4),p(),l(8,"ul",5),f(9,rs,5,2,"li",6),M(10,"filter"),f(11,os,2,1,"li",7),p(),y()}if(n&2){let e=c();a(),d("items",e.items)("accessibilityMode",e.accessibilityMode)("showRemoveButton",!1),a(5),d("formGroup",e.listForm),a(),d("ngIf",e.smartFilters.length>=3),a(2),d("ngForOf",ze(10,7,e.smartFilters,e.filterList)),a(2),d("ngIf",e.smartFilters.length===0)}}var Po=(()=>{let t=class t{resetFilter(){this.listForm.get("filterQuery")?.setValue(""),this.cdRef.markForCheck()}constructor(i){this.modal=i,this.dashboardService=T(Eo),this.filterService=T(Ht),this.cdRef=T(Q),this.utilityService=T(ut),this.items=[],this.smartFilters=[],this.accessibilityMode=!1,this.listForm=new De({filterQuery:new se("",[])}),this.filterList=r=>{let o=(this.listForm.value.filterQuery||"").toLowerCase();return r.name.toLowerCase().indexOf(o)>=0},li([this.dashboardService.getDashboardStreams(!1),this.filterService.getAllFilters()]).subscribe(r=>{this.items=r[0],(this.items.length>100||this.utilityService.getActiveBreakpoint()<=dt.Tablet)&&(this.accessibilityMode=!0);let o=new Set(r[0].filter(s=>!s.isProvided).map(s=>s.name));this.smartFilters=r[1].filter(s=>!o.has(s.name)),this.cdRef.markForCheck()})}addFilterToStream(i){this.dashboardService.createDashboardStream(i.id).subscribe(r=>{this.smartFilters=this.smartFilters.filter(o=>o.name!==i.name),this.items=[...this.items,r],this.cdRef.markForCheck()})}orderUpdated(i){this.dashboardService.updateDashboardStreamPosition(i.item.name,i.item.id,i.fromPosition,i.toPosition).subscribe()}updateVisibility(i,r){this.items[r].visible=!this.items[r].visible,this.cdRef.markForCheck(),this.dashboardService.updateDashboardStream(this.items[r]).subscribe()}};t.\u0275fac=function(r){return new(r||t)(L(Je))},t.\u0275cmp=G({type:t,selectors:[["app-customize-dashboard-streams"]],standalone:!0,features:[H],decls:1,vars:1,consts:[["draggableItem",""],[4,"transloco","translocoRead"],[3,"orderUpdated","items","accessibilityMode","showRemoveButton"],[3,"formGroup"],["class","mb-3",4,"ngIf"],[1,"list-group","filter-list"],["class","filter list-group-item",4,"ngFor","ngForOf"],["class","list-group-item",4,"ngIf"],[3,"hide","item","position"],[1,"mb-3"],["for","filter",1,"form-label"],[1,"input-group"],["id","filter","autocomplete","off","formControlName","filterQuery","type","text","aria-describedby","reset-input",1,"form-control"],["type","button","id","reset-input",1,"btn","btn-outline-secondary",3,"click"],[1,"filter","list-group-item"],[1,"btn","btn-icon",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"list-group-item"]],template:function(r,o){r&1&&f(0,as,12,10,"ng-container",1),r&2&&d("translocoRead","customize-dashboard-streams")},dependencies:[te,Me,W,Vi,Oo,K,Pe,Ge,Ne,Oe,Ue,He,je,it],styles:[`.drag-handle{margin-top:100%!important}app-dashboard-stream-list-item[_ngcontent-%COMP%]{flex-grow:1}.filter-list[_ngcontent-%COMP%]{margin:0;padding:0}.filter-list[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{padding:.5rem 1rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-radius:5px;margin:5px 0;color:var(--list-group-hover-text-color);background-color:var(--list-group-hover-bg-color)}.virtual-scroller[_ngcontent-%COMP%], virtual-scroller[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 85px);max-height:calc(var(--vh) * 100 - 170px)}
/*# sourceMappingURL=customize-dashboard-streams.component-FVEBIKQT.css.map */`],changeDetection:0});let n=t;return n})();var ft=function(n){return n[n.Collections=1]="Collections",n[n.ReadingLists=2]="ReadingLists",n[n.Bookmarks=3]="Bookmarks",n[n.Library=4]="Library",n[n.SmartFilter=5]="SmartFilter",n[n.ExternalSource=6]="ExternalSource",n[n.AllSeries=7]="AllSeries",n[n.WantToRead=8]="WantToRead",n}(ft||{});var ss=(n,t)=>({"fas fa-eye":n,"fa-solid fa-eye-slash":t});function ls(n,t){if(n&1&&(l(0,"span"),_(1),M(2,"streamName"),p()),n&2){let e=c(2);a(),D(" ",P(2,1,e.item.name)," ")}}function cs(n,t){if(n&1&&_(0),n&2){let e=c(2);D(" ",e.item.name," ")}}function ms(n,t){if(n&1&&(v(0),_(1),y()),n&2){let e=c().$implicit;a(),g(e("provided"))}}function ps(n,t){if(n&1&&(v(0),_(1),y()),n&2){let e=c(2).$implicit;a(),g(e("library"))}}function ds(n,t){if(n&1&&(v(0),_(1),y()),n&2){let e=c(2).$implicit;a(),g(e("smart-filter"))}}function us(n,t){if(n&1&&(v(0),_(1),y()),n&2){let e=c(2).$implicit;a(),g(e("external-source"))}}function _s(n,t){if(n&1&&(v(0,14),f(1,ps,2,1,"ng-container",15)(2,ds,2,1,"ng-container",15)(3,us,2,1,"ng-container",15),y()),n&2){let e=c(2);d("ngSwitch",e.item.streamType),a(),d("ngSwitchCase",e.SideNavStreamType.Library),a(),d("ngSwitchCase",e.SideNavStreamType.SmartFilter),a(),d("ngSwitchCase",e.SideNavStreamType.ExternalSource)}}function fs(n,t){if(n&1&&(v(0),l(1,"a",16),_(2),p(),y()),n&2){let e=c(3);a(),d("href","/library/"+e.item.libraryId,ve),a(),g(e.item.library==null?null:e.item.library.name)}}function hs(n,t){if(n&1&&(v(0),l(1,"a",16),_(2),p(),y()),n&2){let e=c(2).$implicit,i=c();a(),d("href","/all-series?"+i.item.smartFilterEncoded,ve),a(),g(e("load-filter"))}}function gs(n,t){if(n&1&&(v(0),l(1,"a",17),_(2),p(),y()),n&2){let e=c(3);a(),d("href",e.item.externalSource.host+"login?apiKey="+e.item.externalSource.apiKey,ve),a(),g(e.item.externalSource.host)}}function vs(n,t){if(n&1&&(l(0,"div",12),v(1,14),f(2,fs,3,2,"ng-container",15)(3,hs,3,2,"ng-container",15)(4,gs,3,2,"ng-container",15),y(),p()),n&2){let e=c(2);a(),d("ngSwitch",e.item.streamType),a(),d("ngSwitchCase",e.SideNavStreamType.Library),a(),d("ngSwitchCase",e.SideNavStreamType.SmartFilter),a(),d("ngSwitchCase",e.SideNavStreamType.ExternalSource)}}function ys(n,t){if(n&1){let e=w();v(0),l(1,"div",3)(2,"div",4)(3,"h5",5),f(4,ls,3,3,"span",6)(5,cs,1,1,"ng-template",null,0,$),l(7,"span",7)(8,"button",8),b("click",function(){S(e);let r=c();return x(r.hide.emit(r.item))}),C(9,"i",9),l(10,"span",10),_(11),p()()()(),l(12,"div",11)(13,"div",12),f(14,ms,2,1,"ng-container",6)(15,_s,4,4,"ng-template",null,1,$),p(),f(17,vs,5,4,"div",13),p()()(),y()}if(n&2){let e=t.$implicit,i=q(6),r=q(16),o=c();a(3),gi("id","item.id--",o.position,""),a(),d("ngIf",o.item.isProvided)("ngIfElse",i),a(5),d("ngClass",J(9,ss,o.item.visible,!o.item.visible)),a(2),g(e("remove")),a(3),d("ngIf",o.item.isProvided)("ngIfElse",r),a(3),d("ngIf",!o.item.isProvided)}}var Fo=(()=>{let t=class t{constructor(){this.position=0,this.hide=new $e,this.SideNavStreamType=ft}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=G({type:t,selectors:[["app-sidenav-stream-list-item"]],inputs:{item:"item",position:"position"},outputs:{hide:"hide"},standalone:!0,features:[H],decls:1,vars:1,consts:[["nonProvidedTitle",""],["nonProvided",""],[4,"transloco","translocoRead"],[1,"row","pt-2","g-0","list-item"],[1,"g-0"],[1,"mb-1","pb-0",3,"id"],[4,"ngIf","ngIfElse"],[1,"float-end"],[1,"btn","btn-icon","p-0",3,"click"],["aria-hidden","true",1,"me-1",3,"ngClass"],[1,"visually-hidden"],[1,"meta"],[1,"ps-1"],["class","ps-1",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["target","_blank",3,"href"],["target","_blank","rel","noopener noreferrer",3,"href"]],template:function(r,o){r&1&&f(0,ys,18,12,"ng-container",2),r&2&&d("translocoRead","stream-list-item")},dependencies:[te,Ie,W,xi,bi,$i,K],styles:[`.list-item[_ngcontent-%COMP%]{height:60px;max-height:60px}.meta[_ngcontent-%COMP%]{display:flex}
/*# sourceMappingURL=sidenav-stream-list-item.component-7HPN2K2B.css.map */`],changeDetection:0});let n=t;return n})();var Kt=(()=>{let t=class t{constructor(i){this.httpClient=i,this.baseUrl=Ii.apiUrl}getExternalSources(){return this.httpClient.get(this.baseUrl+"stream/external-sources")}createSource(i){return this.httpClient.post(this.baseUrl+"stream/create-external-source",i)}updateSource(i){return this.httpClient.post(this.baseUrl+"stream/update-external-source",i)}deleteSource(i){return this.httpClient.delete(this.baseUrl+"stream/delete-external-source?externalSourceId="+i)}sourceExists(i,r,o){return this.httpClient.get(this.baseUrl+`stream/external-source-exists?host=${encodeURIComponent(r)}&name=${i}&apiKey=${o}`,Ir).pipe(_e(s=>s=="true"))}};t.\u0275fac=function(r){return new(r||t)(Te(Ti))},t.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function Ss(n,t){if(n&1&&(l(0,"span",26),_(1),p()),n&2){let e=c(2).$implicit;a(),g(e("reorder-when-filter-present"))}}function xs(n,t){if(n&1){let e=w();l(0,"div",20)(1,"label",21),_(2),p(),l(3,"div",22),C(4,"input",23),l(5,"button",24),b("click",function(){S(e);let r=c(2);return x(r.resetSideNavFilter())}),_(6),p()(),f(7,Ss,2,1,"span",25),p()}if(n&2){let e,i=c().$implicit,r=c();a(2),g(i("filter")),a(4),g(i("clear")),a(),d("ngIf",(e=r.listForm.get("filterSideNavStream"))==null?null:e.value)}}function bs(n,t){if(n&1){let e=w();l(0,"app-sidenav-stream-list-item",27),b("hide",function(r){let o=S(e).idx,s=c(2);return x(s.updateVisibility(r,o))}),p()}if(n&2){let e=t.idx,i=t.$implicit;d("item",i)("position",e)}}function Es(n,t){if(n&1&&(l(0,"span",26),_(1),p()),n&2){let e=c(2).$implicit;a(),g(e("reorder-when-filter-present"))}}function Ts(n,t){if(n&1){let e=w();l(0,"div",28)(1,"label",29),_(2),p(),l(3,"div",22),C(4,"input",30),l(5,"button",31),b("click",function(){S(e);let r=c(2);return x(r.resetSmartFilterFilter())}),_(6),p()(),f(7,Es,2,1,"span",25),p()}if(n&2){let e,i=c().$implicit,r=c();a(2),g(i("filter")),a(4),g(i("clear")),a(),d("ngIf",(e=r.listForm.get("filterSideNavStream"))==null?null:e.value)}}function ws(n,t){if(n&1){let e=w();l(0,"li",32),_(1),l(2,"button",33),b("click",function(){let r=S(e).$implicit,o=c(2);return x(o.addFilterToStream(r))}),C(3,"i",34),_(4),p()()}if(n&2){let e=t.$implicit,i=c().$implicit;a(),D(" ",e.name," "),a(3),D(" ",i("add")," ")}}function ks(n,t){if(n&1&&(l(0,"li",35),_(1),p()),n&2){let e=c().$implicit;a(),D(" ",e("no-data")," ")}}function Is(n,t){if(n&1&&(l(0,"span",26),_(1),p()),n&2){let e=c(2).$implicit;a(),g(e("reorder-when-filter-present"))}}function Ms(n,t){if(n&1){let e=w();l(0,"div",28)(1,"label",36),_(2),p(),l(3,"div",22),C(4,"input",37),l(5,"button",38),b("click",function(){S(e);let r=c(2);return x(r.resetExternalSourceFilter())}),_(6),p()(),f(7,Is,2,1,"span",25),p()}if(n&2){let e,i=c().$implicit,r=c();a(2),g(i("filter")),a(4),g(i("clear")),a(),d("ngIf",(e=r.listForm.get("filterSideNavStream"))==null?null:e.value)}}function Ns(n,t){if(n&1){let e=w();l(0,"li",32),_(1),l(2,"button",33),b("click",function(){let r=S(e).$implicit,o=c(2);return x(o.addExternalSourceToStream(r))}),C(3,"i",34),_(4),p()()}if(n&2){let e=t.$implicit,i=c().$implicit;a(),D(" ",e.host," "),a(3),D(" ",i("add")," ")}}function Os(n,t){if(n&1&&(l(0,"li",35),_(1),p()),n&2){let e=c().$implicit;a(),D(" ",e("no-data-external-source")," ")}}function Ps(n,t){if(n&1){let e=w();v(0),l(1,"form",2)(2,"div",3),f(3,xs,8,3,"div",4),l(4,"div",5)(5,"form",2)(6,"div",6),C(7,"input",7),l(8,"label",8),_(9),p()(),l(10,"div",9),C(11,"input",10),l(12,"label",11),_(13),p()()()()(),C(14,"app-bulk-operations",12),l(15,"div",13)(16,"app-draggable-ordered-list",14),M(17,"filter"),b("orderUpdated",function(r){S(e);let o=c();return x(o.orderUpdated(r))}),f(18,bs,1,2,"ng-template",null,0,$),p()(),l(20,"h5",15),_(21),p(),f(22,Ts,8,3,"div",16),l(23,"ul",17),f(24,ws,5,2,"li",18),M(25,"filter"),f(26,ks,2,1,"li",19),p(),l(27,"h5",15),_(28),p(),f(29,Ms,8,3,"div",16),l(30,"ul",17),f(31,Ns,5,2,"li",18),M(32,"filter"),f(33,Os,2,1,"li",19),p()(),y()}if(n&2){let e=t.$implicit,i=c();a(),d("formGroup",i.listForm),a(2),d("ngIf",i.items.length>=3),a(2),d("formGroup",i.pageOperationsForm),a(4),g(e("order-numbers-label")),a(4),g(e("bulk-mode-label")),a(),d("modalMode",!0)("topOffset",0)("actionCallback",i.bulkActionCallback),a(2),d("items",ze(17,22,i.items,i.filterSideNavStreams))("accessibilityMode",i.pageOperationsForm.get("accessibilityMode").value)("showRemoveButton",!1)("disabled",i.listForm.get("filterSideNavStream").value)("bulkMode",i.pageOperationsForm.get("bulkMode").value)("virtualizeAfter",i.virtualizeAfter),a(5),g(e("smart-filters-title")),a(),d("ngIf",i.smartFilters.length>=6),a(2),d("ngForOf",ze(25,25,i.smartFilters,i.filterSmartFilters)),a(2),d("ngIf",i.smartFilters.length===0),a(2),g(e("external-sources-title")),a(),d("ngIf",i.externalSources.length>=6),a(2),d("ngForOf",ze(32,28,i.externalSources,i.filterExternalSources)),a(2),d("ngIf",i.externalSources.length===0)}}var Ro=(()=>{let t=class t{handleKeypress(i){i.key===Xt.SHIFT&&(this.bulkSelectionService.isShiftDown=!0)}handleKeyUp(i){i.key===Xt.SHIFT&&(this.bulkSelectionService.isShiftDown=!1,this.cdRef.markForCheck())}constructor(i){this.modal=i,this.items=[],this.smartFilters=[],this.externalSources=[],this.virtualizeAfter=100,this.listForm=new De({filterSideNavStream:new se("",[]),filterSmartFilter:new se("",[]),filterExternalSource:new se("",[])}),this.pageOperationsForm=new De({accessibilityMode:new se(!1,[]),bulkMode:new se(!1,[])}),this.filterSideNavStreams=r=>{let o=(this.listForm.value.filterSideNavStream||"").toLowerCase();return r.name.toLowerCase().indexOf(o)>=0},this.filterSmartFilters=r=>{let o=(this.listForm.value.filterSmartFilter||"").toLowerCase();return r.name.toLowerCase().indexOf(o)>=0},this.filterExternalSources=r=>{let o=(this.listForm.value.filterExternalSource||"").toLowerCase();return r.name.toLowerCase().indexOf(o)>=0},this.bulkActionCallback=(r,o)=>{let s=this.bulkSelectionService.getSelectedCardsForSource("sideNavStream"),m=s.map(h=>this.items[parseInt(h,10)]),u=!1;switch(r.action){case Qe.MarkAsVisible:u=!0;break;case Qe.MarkAsInvisible:u=!1;break}for(let h of s.map(k=>parseInt(k,10)))this.items[h].visible=u,this.items[h]=ue({},this.items[h]);this.cdRef.markForCheck(),this.sideNavService.bulkToggleSideNavStreamVisibility(m.map(h=>h.id),u).subscribe(()=>{this.bulkSelectionService.deselectAll(),this.cdRef.markForCheck()})},this.sideNavService=T(tt),this.filterService=T(Ht),this.externalSourceService=T(Kt),this.cdRef=T(Q),this.destroyRef=T(ge),this.bulkSelectionService=T(mo),this.utilityService=T(ut),this.pageOperationsForm.get("accessibilityMode")?.valueChanges.pipe(ae(r=>{if(this.pageOperationsForm.get("accessibilityMode")?.value){if(this.pageOperationsForm.get("bulkMode")?.disabled)return;this.pageOperationsForm.get("bulkMode")?.disable()}else{if(!this.pageOperationsForm.get("bulkMode")?.disabled)return;this.pageOperationsForm.get("bulkMode")?.enable()}this.cdRef.markForCheck()}),ee(this.destroyRef)).subscribe(),this.pageOperationsForm.get("bulkMode")?.valueChanges.pipe(ae(r=>{if(this.pageOperationsForm.get("bulkMode")?.value){if(this.pageOperationsForm.get("accessibilityMode")?.disabled)return;this.pageOperationsForm.get("accessibilityMode")?.disable()}else this.pageOperationsForm.get("accessibilityMode")?.enable()}),ee(this.destroyRef)).subscribe(),this.pageOperationsForm.valueChanges.pipe(ae(r=>{if(this.pageOperationsForm.value.accessibilityMode||this.pageOperationsForm.value.bulkMode){this.listForm.get("filterSideNavStream")?.disable();return}this.listForm.get("filterSideNavStream")?.enable()}),ee(this.destroyRef)).subscribe(),li([this.sideNavService.getSideNavStreams(!1),this.filterService.getAllFilters(),this.externalSourceService.getExternalSources()]).subscribe(r=>{this.items=r[0],(this.items.length>this.virtualizeAfter||this.utilityService.getActiveBreakpoint()<=dt.Tablet)&&this.pageOperationsForm.get("accessibilityMode")?.setValue(!0);let o=new Set(r[0].filter(m=>!m.isProvided&&m.streamType===ft.SmartFilter).map(m=>m.name));this.smartFilters=r[1].filter(m=>!o.has(m.name));let s=new Set(r[0].filter(m=>!m.isProvided&&m.streamType===ft.ExternalSource).map(m=>m.name));this.externalSources=r[2].filter(m=>!s.has(m.name)),this.cdRef.markForCheck()})}ngOnDestroy(){this.bulkSelectionService.deselectAll()}resetSideNavFilter(){this.listForm.get("filterSideNavStream")?.setValue(""),this.cdRef.markForCheck()}resetSmartFilterFilter(){this.listForm.get("filterSmartFilter")?.setValue(""),this.cdRef.markForCheck()}resetExternalSourceFilter(){this.listForm.get("filterExternalSource")?.setValue(""),this.cdRef.markForCheck()}addFilterToStream(i){this.sideNavService.createSideNavStream(i.id).subscribe(r=>{this.smartFilters=this.smartFilters.filter(o=>o.name!==i.name),this.items=[...this.items,r],this.cdRef.markForCheck()})}addExternalSourceToStream(i){this.sideNavService.createSideNavStreamFromExternalSource(i.id).subscribe(r=>{this.externalSources=this.externalSources.filter(o=>o.name!==i.name),this.items=[...this.items,r],this.cdRef.markForCheck()})}orderUpdated(i){this.sideNavService.updateSideNavStreamPosition(i.item.name,i.item.id,i.fromPosition,i.toPosition).subscribe(()=>{this.sideNavService.getSideNavStreams(!1).subscribe(r=>{this.items=[...r],this.cdRef.markForCheck()})})}updateVisibility(i,r){let o=this.items.filter(s=>s.id==i.id)[0];o.visible=!o.visible,this.cdRef.markForCheck(),this.sideNavService.updateSideNavStream(o).subscribe()}};t.\u0275fac=function(r){return new(r||t)(L(Je))},t.\u0275cmp=G({type:t,selectors:[["app-customize-sidenav-streams"]],hostBindings:function(r,o){r&1&&b("keydown.shift",function(m){return o.handleKeypress(m)},!1,cn)("keyup.shift",function(m){return o.handleKeyUp(m)},!1,cn)},standalone:!0,features:[H],decls:1,vars:1,consts:[["draggableItem",""],[4,"transloco","translocoRead"],[3,"formGroup"],[1,"row","g-0","mb-3","justify-content-between"],["class","col-9",4,"ngIf"],[1,"col-3"],[1,"form-check","form-check-inline",2,"margin-top","23px","margin-left","10px"],["type","checkbox","id","accessibility-mode","formControlName","accessibilityMode",1,"form-check-input"],["for","accessibility-mode",1,"form-check-label"],[1,"form-check","form-check-inline",2,"margin-left","10px"],["type","checkbox","id","bulk-mode","formControlName","bulkMode",1,"form-check-input"],["for","bulk-mode",1,"form-check-label"],[3,"modalMode","topOffset","actionCallback"],[2,"max-height","500px","overflow-y","auto"],[3,"orderUpdated","items","accessibilityMode","showRemoveButton","disabled","bulkMode","virtualizeAfter"],[1,"mt-3"],["class","mb-3",4,"ngIf"],[1,"list-group","filter-list"],["class","filter list-group-item",4,"ngFor","ngForOf"],["class","list-group-item",4,"ngIf"],[1,"col-9"],["for","sidenav-stream-filter",1,"form-label"],[1,"input-group"],["id","sidenav-stream-filter","autocomplete","off","formControlName","filterSideNavStream","type","text","aria-describedby","reset-sidenav-stream-input",1,"form-control"],["type","button","id","reset-sidenav-stream-input",1,"btn","btn-outline-secondary",3,"click"],["role","alert","class","mt-1",4,"ngIf"],["role","alert",1,"mt-1"],[3,"hide","item","position"],[1,"mb-3"],["for","smart-filter-filter",1,"form-label"],["id","smart-filter-filter","autocomplete","off","formControlName","filterSmartFilter","type","text","aria-describedby","reset-smart-filter-input",1,"form-control"],["type","button","id","reset-smart-filter-input",1,"btn","btn-outline-secondary",3,"click"],[1,"filter","list-group-item"],[1,"btn","btn-icon",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"list-group-item"],["for","external-source-filter",1,"form-label"],["id","external-source-filter","autocomplete","off","formControlName","filterSmartFilter","type","text","aria-describedby","reset-external-source-input",1,"form-control"],["type","button","id","reset-external-source-input",1,"btn","btn-outline-secondary",3,"click"]],template:function(r,o){r&1&&f(0,Ps,34,31,"ng-container",1),r&2&&d("translocoRead","customize-sidenav-streams")},dependencies:[te,Me,W,Vi,K,Fo,Pe,Ge,Ne,Ar,Oe,Ue,He,je,it,To],styles:[`.drag-handle{margin-top:100%!important}app-sidenav-stream-list-item[_ngcontent-%COMP%]{flex-grow:1}.filter-list[_ngcontent-%COMP%]{margin:0;padding:0}.filter-list[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{padding:.5rem 1rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-radius:5px;margin:5px 0;color:var(--list-group-hover-text-color);background-color:var(--list-group-hover-bg-color)}
/*# sourceMappingURL=customize-sidenav-streams.component-RY3WEYRP.css.map */`],changeDetection:0});let n=t;return n})();function Fs(n,t){n&1&&C(0,"i",29)}function Rs(n,t){if(n&1&&(v(0),f(1,Fs,1,0,"i",28),l(2,"span",13),_(3),p(),y()),n&2){let e=c().$implicit,i=c();a(),d("ngIf",i.isViewMode),a(2),D(" ",e("edit")," ")}}function Ds(n,t){if(n&1&&_(0),n&2){let e=c().$implicit;D(" ",e("cancel")," ")}}function As(n,t){if(n&1&&(l(0,"div"),_(1),p()),n&2){let e=c(2).$implicit;a(),D(" ",e("required")," ")}}function Vs(n,t){if(n&1&&(l(0,"div"),_(1),p()),n&2){let e=c(2).$implicit;a(),D(" ",e("not-unique")," ")}}function Ls(n,t){if(n&1&&(l(0,"div",30),f(1,As,2,1,"div",22)(2,Vs,2,1,"div",22),p()),n&2){let e,i,r=c(2);a(),d("ngIf",(e=r.formGroup.get("name"))==null||e.errors==null?null:e.errors.required),a(),d("ngIf",(i=r.formGroup.get("name"))==null||i.errors==null?null:i.errors.notUnique)}}function $s(n,t){if(n&1&&(l(0,"div"),_(1),p()),n&2){let e=c(2).$implicit;a(),D(" ",e("required")," ")}}function zs(n,t){if(n&1&&(l(0,"div"),_(1),p()),n&2){let e=c(2).$implicit;a(),D(" ",e("pattern")," ")}}function Bs(n,t){if(n&1&&(l(0,"div"),_(1),p()),n&2){let e=c(2).$implicit;a(),D(" ",e("not-unique")," ")}}function Us(n,t){if(n&1&&(v(0),l(1,"div",31),f(2,$s,2,1,"div",22)(3,zs,2,1,"div",22)(4,Bs,2,1,"div",22),p(),y()),n&2){let e=t.ngIf;a(2),d("ngIf",e.required),a(),d("ngIf",e.pattern),a(),d("ngIf",e.notUnique)}}function Gs(n,t){if(n&1&&(l(0,"div"),_(1),p()),n&2){let e=c(2).$implicit;a(),D(" ",e("required")," ")}}function Hs(n,t){if(n&1&&(l(0,"div",32),f(1,Gs,2,1,"div",22),p()),n&2){let e,i=c(2);a(),d("ngIf",(e=i.formGroup.get("apiKey"))==null||e.errors==null?null:e.errors.required)}}function js(n,t){if(n&1){let e=w();v(0),l(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"h4",8),_(7),p()(),l(8,"div",9)(9,"button",10),b("click",function(){S(e);let r=c();return x(r.toggleViewMode())}),f(10,Rs,4,2,"ng-container",11)(11,Ds,1,1,"ng-template",null,0,$),p(),l(13,"button",12),b("click",function(){S(e);let r=c();return x(r.delete())}),l(14,"span",13),_(15),p(),C(16,"i",14),p()()()(),l(17,"div",15,1),At("ngbCollapseChange",function(r){S(e);let o=c();return Dt(o.isViewMode,r)||(o.isViewMode=r),x(r)}),l(19,"form",16)(20,"div",17)(21,"label",18),_(22),p(),C(23,"input",19),f(24,Ls,3,2,"div",20),p(),l(25,"div",17)(26,"label",18),_(27),p(),C(28,"input",21),f(29,Us,5,3,"ng-container",22),p(),l(30,"div",17)(31,"label",23),_(32),p(),C(33,"input",24),f(34,Hs,2,1,"div",25),p()(),l(35,"div",26)(36,"button",27),b("click",function(){S(e);let r=c();return x(r.saveForm())}),_(37),p()()()()(),y()}if(n&2){let e,i,r,o,s=t.$implicit,m=q(12),u=c();a(7),g(u.source.name||s("title")),a(3),d("ngIf",u.isViewMode)("ngIfElse",m),a(5),g(s("delete")),a(2),Rt("ngbCollapse",u.isViewMode),a(2),d("formGroup",u.formGroup),a(3),g(s("name-label")),a(),fi("is-invalid",((e=u.formGroup.get("name"))==null?null:e.invalid)&&((e=u.formGroup.get("name"))==null?null:e.touched)),a(),d("ngIf",u.hasErrors("name")),a(3),g(s("host-label")),a(),fi("is-invalid",((i=u.formGroup.get("host"))==null?null:i.invalid)&&((i=u.formGroup.get("host"))==null?null:i.touched)),a(),d("ngIf",(r=u.formGroup.get("host"))==null?null:r.errors),a(3),g(s("api-key-label")),a(),fi("is-invalid",((o=u.formGroup.get("apiKey"))==null?null:o.invalid)&&((o=u.formGroup.get("apiKey"))==null?null:o.touched)),a(),d("ngIf",u.hasErrors("apiKey")),a(3),g(s("save"))}}var Do=(()=>{let t=class t{hasErrors(i){let r=this.formGroup.get(i)?.errors;return Object.values(r||[]).filter(o=>o).length>0}constructor(){this.sourceUpdate=new $e,this.sourceDelete=new $e,this.isViewMode=!0,this.formGroup=new De({}),this.destroyRef=T(ge),this.cdRef=T(Q),this.externalSourceService=T(Kt),this.toastr=T(Ut)}ngOnInit(){this.formGroup.addControl("name",new se(this.source.name,[Zt.required])),this.formGroup.addControl("host",new se(this.source.host,[Zt.required,Zt.pattern(/^(http:|https:)+[^\s]+[\w]\/?$/)])),this.formGroup.addControl("apiKey",new se(this.source.apiKey,[Zt.required])),this.cdRef.markForCheck()}resetForm(){this.formGroup.get("host")?.setValue(this.source.host),this.formGroup.get("name")?.setValue(this.source.name),this.formGroup.get("apiKey")?.setValue(this.source.apiKey),this.cdRef.markForCheck()}saveForm(){if(this.source===void 0)return;let i=this.formGroup.value;this.externalSourceService.sourceExists(i.host,i.name,i.apiKey).subscribe(r=>{if(r){this.toastr.error(st("toasts.external-source-already-exists"));return}if(this.source.id===0){this.externalSourceService.createSource(ue({id:0},this.formGroup.value)).subscribe(o=>{this.source=ue({},o),this.sourceUpdate.emit(this.source),this.toggleViewMode()});return}this.externalSourceService.updateSource(ue({id:this.source.id},this.formGroup.value)).subscribe(o=>{this.source.host=this.formGroup.value.host,this.source.apiKey=this.formGroup.value.apiKey,this.source.name=this.formGroup.value.name,this.sourceUpdate.emit(this.source),this.toggleViewMode()})})}delete(){if(this.source.id===0){this.sourceDelete.emit(this.source),this.isViewMode||this.toggleViewMode();return}this.externalSourceService.deleteSource(this.source.id).subscribe(()=>{this.sourceDelete.emit(this.source),this.isViewMode||this.toggleViewMode()})}toggleViewMode(){this.isViewMode=!this.isViewMode,this.isViewMode||this.resetForm()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=G({type:t,selectors:[["app-edit-external-source-item"]],inputs:{source:"source",isViewMode:"isViewMode"},outputs:{sourceUpdate:"sourceUpdate",sourceDelete:"sourceDelete"},standalone:!0,features:[H],decls:1,vars:1,consts:[["editMode",""],["collapse","ngbCollapse"],[4,"transloco","translocoRead"],[1,"card","mt-2"],[1,"card-body"],[1,"card-title"],[1,"container-fluid","row","mb-2"],[1,"col-9","col-sm-9"],["id","anilist-token-header"],[1,"col-3","text-end"],[1,"btn","btn-primary","btn-sm","me-1",3,"click"],[4,"ngIf","ngIfElse"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"visually-hidden"],["aria-hidden","true",1,"fa-solid","fa-trash"],[3,"ngbCollapseChange","ngbCollapse"],[3,"formGroup"],[1,"form-group","mb-3"],["for","host"],["id","name","formControlName","name","type","text","aria-describedby","name-validations",1,"form-control"],["id","name-validations","class","invalid-feedback",4,"ngIf"],["id","host","formControlName","host","type","url","aria-describedby","host-validations",1,"form-control"],[4,"ngIf"],["for","api-key"],["id","api-key","formControlName","apiKey","type","text","aria-describedby","api-key-validations",1,"form-control"],["id","api-key-validations","class","invalid-feedback",4,"ngIf"],[1,"col-auto","d-flex","d-md-block","justify-content-sm-center","text-md-end","mb-3"],["type","submit","aria-describedby","anilist-token-header",1,"flex-fill","btn","btn-primary",3,"click"],["class","fa-solid fa-pen","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa-solid","fa-pen"],["id","name-validations",1,"invalid-feedback"],["id","host-validations",1,"invalid-feedback"],["id","api-key-validations",1,"invalid-feedback"]],template:function(r,o){r&1&&f(0,js,38,19,"ng-container",2),r&2&&d("translocoRead","edit-external-source-item")},dependencies:[te,W,Lr,Pe,Ge,Ne,Oe,Ue,He,je,K],styles:["/*# sourceMappingURL=edit-external-source-item.component-PBB3XP6H.css.map */"]});let n=t;return n})();function Ks(n,t){if(n&1){let e=w();v(0),l(1,"app-edit-external-source-item",12),b("sourceUpdate",function(r){let o=S(e).index,s=c(2);return x(s.updateSource(o,r))})("sourceDelete",function(r){let o=S(e).index,s=c(2);return x(s.deleteSource(o,r))}),p(),y()}if(n&2){let e=t.$implicit;a(),d("source",e)("isViewMode",e.id!==0)}}function qs(n,t){if(n&1&&(l(0,"li",13),_(1),p()),n&2){let e=c().$implicit;a(),D(" ",e("no-data")," ")}}function Qs(n,t){if(n&1){let e=w();v(0),l(1,"p"),_(2),l(3,"a",1),_(4),p()(),l(5,"form",2)(6,"div",3)(7,"label",4),_(8),p(),l(9,"div",5),C(10,"input",6),l(11,"button",7),b("click",function(){S(e);let r=c();return x(r.resetFilter())}),_(12),p()()(),l(13,"div",8)(14,"button",9),b("click",function(){S(e);let r=c();return x(r.addNewExternalSource())}),_(15),p()()(),f(16,Ks,2,2,"ng-container",10),M(17,"filter"),l(18,"ul"),f(19,qs,2,1,"li",11),p(),y()}if(n&2){let e=t.$implicit,i=c();a(2),D(" ",e("description")," "),a(),d("href",i.WikiLink.CustomizeExternalSource,ve),a(),g(e("help-link")),a(),d("formGroup",i.listForm),a(3),g(e("filter")),a(4),g(e("clear")),a(3),g(e("add-source")),a(),d("ngForOf",ze(17,9,i.externalSources,i.filterList)),a(3),d("ngIf",i.externalSources.length===0)}}var Ao=(()=>{let t=class t{constructor(i){this.accountService=i,this.externalSources=[],this.cdRef=T(Q),this.externalSourceService=T(Kt),this.WikiLink=Gt,this.listForm=new De({filterQuery:new se("",[])}),this.filterList=r=>{let o=(this.listForm.value.filterQuery||"").toLowerCase();return r.name.toLowerCase().indexOf(o)>=0||r.host.toLowerCase().indexOf(o)>=0},this.externalSourceService.getExternalSources().subscribe(r=>{this.externalSources=r,this.cdRef.markForCheck()})}resetFilter(){this.listForm.get("filterQuery")?.setValue(""),this.cdRef.markForCheck()}addNewExternalSource(){this.externalSources.unshift({id:0,name:"",host:"",apiKey:""}),this.cdRef.markForCheck()}updateSource(i,r){this.externalSources[i]=r,this.cdRef.markForCheck()}deleteSource(i,r){this.externalSources.splice(i,1),this.resetFilter(),this.cdRef.markForCheck()}};t.\u0275fac=function(r){return new(r||t)(L(pe))},t.\u0275cmp=G({type:t,selectors:[["app-manage-external-sources"]],standalone:!0,features:[H],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"row","g-0","justify-content-between","mb-3",3,"formGroup"],[1,"col-9"],["for","filter",1,"form-label"],[1,"input-group"],["id","filter","autocomplete","off","formControlName","filterQuery","type","text","aria-describedby","reset-input",1,"form-control"],["type","button","id","reset-input",1,"btn","btn-outline-secondary",3,"click"],[1,"col-2","ms-2"],[1,"btn","btn-primary",2,"margin-top","30px",3,"click"],[4,"ngFor","ngForOf"],["class","list-group-item",4,"ngIf"],[3,"sourceUpdate","sourceDelete","source","isViewMode"],[1,"list-group-item"]],template:function(r,o){r&1&&f(0,Qs,20,12,"ng-container",0),r&2&&d("translocoRead","manage-external-sources")},dependencies:[te,Me,W,$t,Ge,Ne,Oe,Ue,Pe,He,je,K,Do,it],styles:[`ul[_ngcontent-%COMP%]{margin:0;padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 1rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-radius:5px;margin:5px 0;color:var(--list-group-hover-text-color);background-color:var(--card-bg-color)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}
/*# sourceMappingURL=manage-external-sources.component-ATCU6KXQ.css.map */`],changeDetection:0});let n=t;return n})();function Ws(n,t){if(n&1){let e=w();l(0,"div",5)(1,"label",6),_(2),p(),l(3,"div",7),C(4,"input",8),l(5,"button",9),b("click",function(){S(e);let r=c(2);return x(r.resetFilter())}),_(6),p()()()}if(n&2){let e=c().$implicit;a(2),g(e("filter")),a(4),g(e("clear"))}}function Ys(n,t){if(n&1){let e=w();l(0,"li",10)(1,"a",11),_(2),p(),l(3,"button",12),b("click",function(){let r=S(e).$implicit,o=c(2);return x(o.deleteFilter(r))}),C(4,"i",13),l(5,"span",14),_(6),p()()()}if(n&2){let e=t.$implicit,i=c().$implicit;a(),d("href","all-series?"+e.filter,ve),a(),g(e.name),a(4),g(i("delete"))}}function Zs(n,t){if(n&1&&(l(0,"li",10),_(1),p()),n&2){let e=c().$implicit;a(),D(" ",e("no-data")," ")}}function Xs(n,t){if(n&1&&(v(0),l(1,"form",1),f(2,Ws,7,2,"div",2),p(),l(3,"ul"),f(4,Ys,7,3,"li",3),M(5,"filter"),f(6,Zs,2,1,"li",4),p(),y()),n&2){let e=c();a(),d("formGroup",e.listForm),a(),d("ngIf",e.filters.length>=3),a(2),d("ngForOf",ze(5,4,e.filters,e.filterList)),a(2),d("ngIf",e.filters.length===0)}}var Vo=(()=>{let t=class t{resetFilter(){this.listForm.get("filterQuery")?.setValue(""),this.cdRef.markForCheck()}constructor(){this.filterService=T(Ht),this.confirmService=T(Pi),this.router=T(Be),this.cdRef=T(Q),this.toastr=T(Ut),this.filters=[],this.listForm=new De({filterQuery:new se("",[])}),this.filterList=i=>{let r=(this.listForm.value.filterQuery||"").toLowerCase();return i.name.toLowerCase().indexOf(r)>=0},this.loadData()}loadData(){this.filterService.getAllFilters().subscribe(i=>{this.filters=i,this.cdRef.markForCheck()})}loadFilter(i){return ot(this,null,function*(){yield this.router.navigateByUrl("all-series?"+i.filter)})}deleteFilter(i){return ot(this,null,function*(){(yield this.confirmService.confirm(st("toasts.confirm-delete-smart-filter")))&&this.filterService.deleteFilter(i.id).subscribe(()=>{this.toastr.success(st("toasts.smart-filter-deleted")),this.resetFilter(),this.loadData()})})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=G({type:t,selectors:[["app-manage-smart-filters"]],standalone:!0,features:[H],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[3,"formGroup"],["class","mb-3",4,"ngIf"],["class","list-group-item",4,"ngFor","ngForOf"],["class","list-group-item",4,"ngIf"],[1,"mb-3"],["for","filter",1,"form-label"],[1,"input-group"],["id","filter","autocomplete","off","formControlName","filterQuery","type","text","aria-describedby","reset-input",1,"form-control"],["type","button","id","reset-input",1,"btn","btn-outline-secondary",3,"click"],[1,"list-group-item"],["target","_blank",3,"href"],[1,"btn","btn-danger","float-end",3,"click"],["aria-hidden","true",1,"fa-solid","fa-trash"],[1,"visually-hidden"]],template:function(r,o){r&1&&f(0,Xs,7,7,"ng-container",0),r&2&&d("translocoRead","manage-smart-filters")},dependencies:[te,Me,W,Pe,Ge,Ne,Oe,Ue,He,je,K,it],styles:[`ul[_ngcontent-%COMP%]{margin:0;padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 1rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-radius:5px;margin:5px 0;color:var(--list-group-hover-text-color);background-color:var(--card-bg-color)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}
/*# sourceMappingURL=manage-smart-filters.component-YMLWNF7J.css.map */`],changeDetection:0});let n=t;return n})();function Js(n,t){n&1&&C(0,"app-customize-dashboard-streams")}function el(n,t){n&1&&C(0,"app-customize-sidenav-streams")}function tl(n,t){n&1&&C(0,"app-manage-smart-filters")}function il(n,t){n&1&&C(0,"app-manage-external-sources")}function nl(n,t){if(n&1){let e=w();v(0),l(1,"div",3)(2,"h4",4),_(3),p(),l(4,"button",5),b("click",function(){S(e);let r=c();return x(r.close())}),p()(),l(5,"div",null,0)(7,"ul",6,1),At("activeIdChange",function(r){S(e);let o=c();return Dt(o.activeTab,r)||(o.activeTab=r),x(r)}),l(9,"li",7)(10,"a",8),_(11),p(),f(12,Js,1,0,"ng-template",9),p(),l(13,"li",7)(14,"a",8),_(15),p(),f(16,el,1,0,"ng-template",9),p(),l(17,"li",7)(18,"a",8),_(19),p(),f(20,tl,1,0,"ng-template",9),p(),l(21,"li",7)(22,"a",8),_(23),p(),f(24,il,1,0,"ng-template",9),p()(),C(25,"div",10),p(),l(26,"div",11)(27,"a",12),_(28),p(),l(29,"button",13),b("click",function(){S(e);let r=c();return x(r.close())}),_(30),p()(),y()}if(n&2){let e=t.$implicit,i=q(8),r=c();a(3),g(e("title-"+r.activeTab)),a(),ce("aria-label",e("close")),a(),Yt("modal-body scrollable-modal ",r.utilityService.getActiveBreakpoint()===r.Breakpoint.Mobile?"":"d-flex",""),a(2),hi("orientation",r.utilityService.getActiveBreakpoint()===r.Breakpoint.Mobile?"horizontal":"vertical"),Rt("activeId",r.activeTab),a(2),d("ngbNavItem",r.TabID.Dashboard),a(2),g(e(r.TabID.Dashboard)),a(2),d("ngbNavItem",r.TabID.SideNav),a(2),g(e(r.TabID.SideNav)),a(2),d("ngbNavItem",r.TabID.SmartFilters),a(2),g(e(r.TabID.SmartFilters)),a(2),d("ngbNavItem",r.TabID.ExternalSources),a(2),g(e(r.TabID.ExternalSources)),a(2),Yt("tab-content ",r.utilityService.getActiveBreakpoint()===r.Breakpoint.Mobile?"mt-3":"ms-4 flex-fill",""),d("ngbNavOutlet",i),a(2),d("href",r.WikiLink.Customize,ve),a(),g(e("help")),a(2),g(e("close"))}}var vn=function(n){return n.Dashboard="dashboard",n.SideNav="sidenav",n.SmartFilters="smart-filters",n.ExternalSources="external-sources",n}(vn||{}),Lo=(()=>{let t=class t{constructor(){this.cdRef=T(Q),this.utilityService=T(ut),this.modal=T(Je),this.TabID=vn,this.Breakpoint=dt,this.WikiLink=Gt,this.activeTab=vn.SideNav}close(){this.modal.close()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=G({type:t,selectors:[["app-customize-dashboard-modal"]],standalone:!0,features:[H],decls:1,vars:1,consts:[["modalBody",""],["nav","ngbNav"],[4,"transloco","translocoRead"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],["ngbNav","",1,"nav-pills",2,"min-width","154px",3,"activeIdChange","activeId","orientation"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"modal-footer"],["target","_blank","rel","noopener noreferrer",1,"btn","btn-icon",3,"href"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(r,o){r&1&&f(0,nl,31,22,"ng-container",2),r&2&&d("translocoRead","customize-dashboard-modal")},dependencies:[te,K,Kr,Hr,qr,jr,Qr,Po,Ro,Ao,Vo],styles:[`.modal-body[_ngcontent-%COMP%]{overflow:hidden}.modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{max-height:calc(var(--vh) * 100 - 235px);overflow:auto}
/*# sourceMappingURL=customize-dashboard-modal.component-C7SG4DF6.css.map */`],changeDetection:0});let n=t;return n})();var rl=(n,t)=>t.url,$o=n=>({num:n});function ol(n,t){if(n&1&&(l(0,"li")(1,"div")(2,"a",6),_(3),p()(),l(4,"div"),_(5),l(6,"span"),C(7,"i",7),_(8),p()()()),n&2){let e=t.$implicit,i=c().$implicit;a(2),d("href",e.url,ve),a(),g(e.title),a(2),yi("by ",e.author," \u2022 ",i("series-count",ne(5,$o,e.seriesCount))," \u2022 "),a(3),g(i("restack-count",ne(7,$o,e.restackCount)))}}function al(n,t){if(n&1){let e=w();v(0),l(1,"div",1)(2,"h4",2),_(3),p(),l(4,"button",3),b("click",function(){S(e);let r=c();return x(r.ngbModal.close())}),p()(),l(5,"div",4)(6,"p"),_(7),p(),l(8,"ul"),ur(9,ol,9,9,"li",null,rl),p()(),C(11,"div",5),y()}if(n&2){let e=t.$implicit,i=c();a(3),g(e("title")),a(4),g(e("description")),a(2),_r(i.stacks)}}var zo=(()=>{let t=class t{constructor(){this.ngbModal=T(Je),this.collectionService=T(ro),this.cdRef=T(Q),this.stacks=[],this.isLoading=!0,this.collectionService.getMalStacks().subscribe(i=>{this.stacks=i,this.isLoading=!1,this.cdRef.markForCheck()})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=G({type:t,selectors:[["app-import-mal-collection-modal"]],standalone:!0,features:[H],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","scrollable-modal"],[1,"modal-footer"],["rel","noreferrer noopener","target","_blank",3,"href"],["aria-hidden","true",1,"fa-solid","fa-layer-group","me-1"]],template:function(r,o){r&1&&f(0,al,12,2,"ng-container",0),r&2&&d("translocoRead","import-mal-collection-modal")},dependencies:[K,Pe,so],styles:["/*# sourceMappingURL=import-mal-collection-modal.component-URAI6EPX.css.map */"],changeDetection:0});let n=t;return n})();var sl=n=>({closed:n}),ll=(n,t,e)=>({closed:n,hidden:t,"no-donate":e});function cl(n,t){if(n&1){let e=w();l(0,"div",11)(1,"label",12),_(2),p(),l(3,"div",13)(4,"input",14),At("ngModelChange",function(r){S(e);let o=c(5);return Dt(o.filterQuery,r)||(o.filterQuery=r),x(r)}),p(),l(5,"button",15),b("click",function(){S(e);let r=c(5);return x(r.filterQuery="")}),p()()()}if(n&2){let e=c(4).$implicit,i=c();a(2),g(e("filter-label")),a(2),Rt("ngModel",i.filterQuery),a(),ce("aria-label",e("clear"))}}function ml(n,t){if(n&1){let e=w();v(0),l(1,"app-side-nav-item",9),b("click",function(){S(e);let r=c(4);return x(r.showLess())}),p(),f(2,cl,6,3,"div",10),M(3,"async"),y()}if(n&2){let e=c().ngIf,i=c(2).$implicit,r=c();a(),d("title",i("back")),a(),d("ngIf",e.length>10&&P(3,2,r.navService==null?null:r.navService.sideNavCollapsed$)===!1)}}function pl(n,t){if(n&1){let e=w();v(0),l(1,"app-side-nav-item",18),v(2,5),l(3,"app-card-actionables",6),b("actionHandler",function(r){S(e);let o=c().$implicit,s=c(4);return x(s.performAction(r,o.library))}),p(),y(),p(),y()}if(n&2){let e=c().$implicit,i=c(4);a(),d("link","/library/"+e.libraryId+"/")("icon",i.getLibraryTypeIcon(e.library.type))("imageUrl",i.getLibraryImage(e.library))("title",e.library.name)("comparisonMethod","startsWith"),a(2),d("actions",i.actions)("labelBy",e.name)}}function dl(n,t){if(n&1&&(v(0),C(1,"app-side-nav-item",19),y()),n&2){let e=c(4).$implicit;a(),d("title",e("all-series"))}}function ul(n,t){if(n&1&&(v(0),C(1,"app-side-nav-item",20),y()),n&2){let e=c(4).$implicit;a(),d("title",e("bookmarks"))}}function _l(n,t){if(n&1){let e=w();v(0),l(1,"app-side-nav-item",21),v(2,5),l(3,"app-card-actionables",6),b("actionHandler",function(){S(e);let r=c(5);return x(r.importCbl())}),p(),y(),p(),y()}if(n&2){let e=c(4).$implicit,i=c();a(),d("title",e("reading-lists")),a(2),d("actions",i.readingListActions)("labelBy",e("reading-lists"))}}function fl(n,t){if(n&1&&(v(0),C(1,"app-side-nav-item",22),y()),n&2){let e=c(4).$implicit;a(),d("title",e("collections"))}}function hl(n,t){if(n&1&&(v(0),C(1,"app-side-nav-item",23),y()),n&2){let e=c(4).$implicit;a(),d("title",e("want-to-read"))}}function gl(n,t){if(n&1&&(v(0),C(1,"app-side-nav-item",24),y()),n&2){let e=c().$implicit;a(),d("title",e.name)("queryParams",e.smartFilterEncoded)}}function vl(n,t){if(n&1&&(v(0),C(1,"app-side-nav-item",25),y()),n&2){let e=c().$implicit;a(),d("title",e.name)("link",e.externalSource.host+"login?apiKey="+e.externalSource.apiKey)("external",!0)}}function yl(n,t){if(n&1&&(v(0)(1,16),f(2,pl,4,7,"ng-container",17)(3,dl,2,1,"ng-container",17)(4,ul,2,1,"ng-container",17)(5,_l,4,3,"ng-container",17)(6,fl,2,1,"ng-container",17)(7,hl,2,1,"ng-container",17)(8,gl,2,2,"ng-container",17)(9,vl,2,3,"ng-container",17),y()()),n&2){let e=t.$implicit,i=c(4);a(),d("ngSwitch",e.streamType),a(),d("ngSwitchCase",i.SideNavStreamType.Library),a(),d("ngSwitchCase",i.SideNavStreamType.AllSeries),a(),d("ngSwitchCase",i.SideNavStreamType.Bookmarks),a(),d("ngSwitchCase",i.SideNavStreamType.ReadingLists),a(),d("ngSwitchCase",i.SideNavStreamType.Collections),a(),d("ngSwitchCase",i.SideNavStreamType.WantToRead),a(),d("ngSwitchCase",i.SideNavStreamType.SmartFilter),a(),d("ngSwitchCase",i.SideNavStreamType.ExternalSource)}}function Cl(n,t){if(n&1){let e=w();v(0),l(1,"app-side-nav-item",26),b("click",function(){S(e);let r=c(4);return x(r.showMore())}),p(),y()}if(n&2){let e=c(3).$implicit;a(),d("title",e("more"))}}function Sl(n,t){if(n&1&&(v(0),f(1,ml,4,4,"ng-container",7)(2,yl,10,9,"ng-container",8),M(3,"filter"),f(4,Cl,2,1,"ng-container",7),y()),n&2){let e=t.ngIf,i=c(3);a(),d("ngIf",i.showAll),a(),d("ngForOf",ze(3,3,e,i.filterLibrary)),a(2),d("ngIf",i.totalSize>10&&!i.showAll)}}function xl(n,t){if(n&1){let e=w();l(0,"div",3),M(1,"async"),M(2,"async"),M(3,"async"),l(4,"app-side-nav-item",4),v(5,5),l(6,"app-card-actionables",6),b("actionHandler",function(r){S(e);let o=c(2);return x(o.handleHomeActions(r))}),p(),y(),p(),f(7,Sl,5,6,"ng-container",7),M(8,"async"),p()}if(n&2){let e=c().$implicit,i=c();d("ngClass",Ci(13,ll,P(1,5,i.navService.sideNavCollapsed$),P(2,7,i.navService.sideNavVisibility$)===!1,P(3,9,i.accountService.hasValidLicense$)===!0)),a(4),d("title",e("home")),a(2),d("actions",i.homeActions)("labelBy",e("home")),a(),d("ngIf",P(8,11,i.navStreams$))}}function bl(n,t){if(n&1){let e=w();v(0),f(1,xl,9,17,"div",1),M(2,"async"),l(3,"div",2),M(4,"async"),b("click",function(){S(e);let r=c();return x(r.toggleNavBar())}),p(),y()}if(n&2){let e=c();a(),d("ngIf",P(2,2,e.accountService.currentUser$)),a(2),d("ngClass",ne(6,sl,P(4,4,e.navService.sideNavCollapsed$)))}}var Bo=(()=>{let t=class t{constructor(){this.SideNavStreamType=ft,this.router=T(Be),this.utilityService=T(ut),this.messageHub=T(Mi),this.actionService=T(lo),this.navService=T(tt),this.cdRef=T(Q),this.ngbModal=T(zt),this.imageService=T(Ri),this.accountService=T(pe),this.destroyRef=T(ge),this.actionFactoryService=T(no),this.WikiLink=Gt,this.cachedData=null,this.actions=this.actionFactoryService.getLibraryActions(this.handleAction.bind(this)),this.readingListActions=[],this.homeActions=[{action:Qe.Edit,title:"customize",children:[],requiresAdmin:!1,callback:this.openCustomize.bind(this)},{action:Qe.Import,title:"import-cbl",children:[],requiresAdmin:!0,callback:this.importCbl.bind(this)}],this.filterQuery="",this.filterLibrary=i=>i.name.toLowerCase().indexOf((this.filterQuery||"").toLowerCase())>=0,this.showAll=!1,this.totalSize=0,this.showAllSubject=new Ct(!1),this.showAll$=this.showAllSubject.asObservable(),this.loadDataSubject=new tr,this.loadData$=this.loadDataSubject.asObservable(),this.loadDataOnInit$=this.loadData$.pipe(ke(()=>this.cachedData!=null?mt(this.cachedData):this.navService.getSideNavStreams().pipe(_e(i=>(this.cachedData=i,i))))),this.navStreams$=or(this.showAll$.pipe(sn(!1),Pt(),ae(i=>this.showAll=i),ke(i=>i?this.loadDataOnInit$.pipe(ae(r=>this.totalSize=r.length)):this.loadDataOnInit$.pipe(ae(r=>this.totalSize=r.length),_e(r=>r.slice(0,10)))),ee(this.destroyRef)),this.messageHub.messages$.pipe(fe(i=>i.event===qe.LibraryModified||i.event===qe.SideNavUpdate),ae(()=>{this.cachedData=null}),ke(()=>this.showAll?this.loadDataOnInit$:this.loadDataOnInit$.pipe(_e(i=>i.slice(0,10)))),ee(this.destroyRef))).pipe(sn(null),fe(i=>i!==null),ee(this.destroyRef)),this.collapseSideNavOnMobileNav$=this.router.events.pipe(fe(i=>i instanceof Lt),ee(this.destroyRef),_e(i=>i),fe(()=>this.utilityService.getActiveBreakpoint()<dt.Tablet),ke(()=>this.navService.sideNavCollapsed$),at(1),fe(i=>!i)),this.collapseSideNavOnMobileNav$.subscribe(()=>{this.navService.toggleSideNav(),this.cdRef.markForCheck()})}ngOnInit(){this.accountService.currentUser$.pipe(at(1)).subscribe(i=>{i&&this.loadDataSubject.next()})}handleAction(i,r){return ot(this,null,function*(){switch(i.action){case Qe.Scan:yield this.actionService.scanLibrary(r);break;case Qe.RefreshMetadata:yield this.actionService.refreshMetadata(r);break;case Qe.AnalyzeFiles:yield this.actionService.analyzeFiles(r);break;case Qe.Delete:yield this.actionService.deleteLibrary(r);break;case Qe.Edit:this.actionService.editLibrary(r,()=>window.scrollTo(0,0));break;default:break}})}handleHomeActions(i){i.callback(i,void 0)}openCustomize(){this.ngbModal.open(Lo,{size:"xl",fullscreen:"md"})}importCbl(){this.ngbModal.open(io,{size:"xl",fullscreen:"md"})}importMalCollection(){this.ngbModal.open(zo,{size:"xl",fullscreen:"md"})}performAction(i,r){typeof i.callback=="function"&&i.callback(i,r)}getLibraryTypeIcon(i){switch(i){case bt.Book:case bt.LightNovel:return"fa-book";case bt.Comic:case bt.ComicVine:case bt.Manga:return"fa-book-open";case bt.Images:return"fa-images"}}getLibraryImage(i){return i.coverImage?this.imageService.getLibraryCoverImage(i.id):null}toggleNavBar(){this.navService.toggleSideNav()}showMore(){this.showAllSubject.next(!0)}showLess(){this.filterQuery="",this.cdRef.markForCheck(),this.showAllSubject.next(!1)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=G({type:t,selectors:[["app-side-nav"]],standalone:!0,features:[H],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],["class","side-nav",3,"ngClass",4,"ngIf"],[1,"side-nav-overlay",3,"click","ngClass"],[1,"side-nav",3,"ngClass"],["icon","fa-home","link","/home/",3,"title"],["actions",""],["iconClass","fa-ellipsis-v",3,"actionHandler","actions","labelBy"],[4,"ngIf"],[4,"ngFor","ngForOf"],["icon","fa fa-chevron-left",3,"click","title"],["class","mb-2 mt-3 ms-2 me-2",4,"ngIf"],[1,"mb-2","mt-3","ms-2","me-2"],["for","filter",1,"form-label","visually-hidden"],[1,"form-group"],["id","filter","autocomplete","off","type","text","aria-describedby","reset-input",1,"form-control",3,"ngModelChange","ngModel"],["type","button","id","reset-input",1,"btn-close",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"link","icon","imageUrl","title","comparisonMethod"],["icon","fa-regular fa-rectangle-list","link","/all-series/",3,"title"],["icon","fa-bookmark","link","/bookmarks/",3,"title"],["icon","fa-list-ol","link","/lists/",3,"title"],["icon","fa-list","link","/collections/",3,"title"],["icon","fa-star","link","/want-to-read/",3,"title"],["icon","fa-bars-staggered","link","/all-series",3,"title","queryParams"],["icon","fa-server",3,"title","link","external"],["icon","fa fa-chevron-right",3,"click","title"]],template:function(r,o){r&1&&f(0,bl,5,8,"ng-container",0),r&2&&d("translocoRead","side-nav")},dependencies:[te,Ie,Me,W,xi,bi,Xe,No,co,it,$t,Ne,Oe,Vr,K],styles:[`.bottom[_ngcontent-%COMP%]{position:absolute;bottom:12px;width:190px;background:var(--navbar-bg-color);border-radius:var(--side-nav-border-radius);font-size:12px;transition:width var(--side-nav-openclose-transition);z-index:999}.bottom.closed[_ngcontent-%COMP%]{width:50px;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]     .bottom .donate .side-nav-item{justify-content:center;min-height:25px;align-items:center}[_nghost-%COMP%]     .bottom .donate .side-nav-item :hover{background-color:unset}[_nghost-%COMP%]     .bottom .donate .side-nav-item span{flex-grow:unset!important;min-width:unset!important}[_nghost-%COMP%]     .bottom .donate .side-nav-item span div{min-width:unset!important}[_nghost-%COMP%]     .bottom .donate .side-nav-item span div i{font-size:12px!important}[_nghost-%COMP%]     .bottom .donate .side-nav-item.closed span.phone-hidden div{width:100%}[_nghost-%COMP%]     .bottom .donate .side-nav-item.closed span.side-nav-text div{width:0}@media (max-width: 576px){[_nghost-%COMP%]     .bottom .donate .side-nav-item.closed{display:none}[_nghost-%COMP%]     .bottom .donate .side-nav-item span.phone-hidden{display:block!important}}.side-nav[_ngcontent-%COMP%]{padding-bottom:10px;width:190px;background-color:var(--side-nav-bg-color);height:calc(var(--vh) * 100 - 80px);position:fixed;margin:0;left:10px;top:73px;border-radius:var(--side-nav-border-radius);transition:width var(--side-nav-openclose-transition),background-color var(--side-nav-bg-color-transition),border-color var(--side-nav-border-transition);overflow:auto;border:var(--side-nav-border)}.side-nav.no-donate[_ngcontent-%COMP%]{height:calc(var(--vh) * 100 - 82px)}.side-nav.hidden[_ngcontent-%COMP%]{display:none;opacity:0}.side-nav.closed[_ngcontent-%COMP%]{width:50px;overflow-x:hidden;overflow-y:auto;background-color:var(--side-nav-closed-bg-color);border:var(--side-nav-border-closed)}.side-nav[_ngcontent-%COMP%]   .side-nav-item[_ngcontent-%COMP%]:first{border-top-left-radius:var(--side-nav-border-radius);border-top-right-radius:var(--side-nav-border-radius)}@media (max-width: 576px){.side-nav[_ngcontent-%COMP%]{padding:10px 0;width:55vw;background-color:var(--side-nav-mobile-bg-color);height:calc(var(--vh) * 100 - 125px);position:fixed;margin:0;left:0;top:56px;transition:width var(--side-nav-openclose-transition);z-index:999;overflow:auto;border:var(--side-nav-mobile-border)}.side-nav.closed[_ngcontent-%COMP%]{width:0;overflow:hidden;box-shadow:none}.side-nav[_ngcontent-%COMP%]   .side-nav-item[_ngcontent-%COMP%]:first{border-top-left-radius:var(--side-nav-border-radius);border-top-right-radius:var(--side-nav-border-radius)}.side-nav.no-donate[_ngcontent-%COMP%]{height:calc(var(--vh) * 100 - 56px)}.side-nav-overlay[_ngcontent-%COMP%]{background-color:var(--side-nav-overlay-color);width:100vw;height:calc(var(--vh) * 100 - 56px);position:absolute;left:0;z-index:998}.side-nav-overlay.closed[_ngcontent-%COMP%]{display:none}}.btn-close[_ngcontent-%COMP%]{margin-top:-28px;font-size:.8rem;position:absolute;right:16px}
/*# sourceMappingURL=side-nav.component-7FXNZKWI.css.map */`],changeDetection:0});let n=t;return n})();var Uo=(()=>{let t=class t{constructor(){this.translocoService=T(pt)}transform(i){switch(i){case j.Artist:return this.translocoService.translate("person-role-pipe.artist");case j.Character:return this.translocoService.translate("person-role-pipe.character");case j.Colorist:return this.translocoService.translate("person-role-pipe.colorist");case j.CoverArtist:return this.translocoService.translate("person-role-pipe.cover-artist");case j.Editor:return this.translocoService.translate("person-role-pipe.editor");case j.Inker:return this.translocoService.translate("person-role-pipe.inker");case j.Letterer:return this.translocoService.translate("person-role-pipe.letterer");case j.Penciller:return this.translocoService.translate("person-role-pipe.penciller");case j.Publisher:return this.translocoService.translate("person-role-pipe.publisher");case j.Imprint:return this.translocoService.translate("person-role-pipe.imprint");case j.Writer:return this.translocoService.translate("person-role-pipe.writer");case j.Team:return this.translocoService.translate("person-role-pipe.team");case j.Location:return this.translocoService.translate("person-role-pipe.location");case j.Translator:return this.translocoService.translate("person-role-pipe.translator");case j.Other:return this.translocoService.translate("person-role-pipe.other");default:return""}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=ui({name:"personRole",type:t,pure:!0,standalone:!0});let n=t;return n})();var El=(n,t,e)=>({colored:n,"colored-error":t,"colored-info":e}),yn=n=>({width:n}),Tl=n=>({item:n}),wl=n=>({num:n});function kl(n,t){if(n&1&&(v(0),l(1,"button",4),C(2,"i",5),p(),y()),n&2){let e=t.ngIf,i=c().ngIf,r=c().ngIf;c();let o=q(4),s=c().$implicit,m=c();a(),d("ngClass",Ci(5,El,m.activeEvents>0||r.length>0,i.length>0,e.length>0&&i.length===0))("ngbPopover",o)("title",s("title-alt"))("popoverClass","nav-events")("autoClose","outside")}}function Il(n,t){if(n&1&&(v(0),f(1,kl,3,9,"ng-container",3),M(2,"async"),y()),n&2){let e=c(4);a(),d("ngIf",P(2,1,e.infos$))}}function Ml(n,t){if(n&1&&(v(0),f(1,Il,3,3,"ng-container",3),M(2,"async"),y()),n&2){let e=c(3);a(),d("ngIf",P(2,1,e.errors$))}}function Nl(n,t){if(n&1){let e=w();l(0,"li",8),b("click",function(){S(e);let r=c(6);return x(r.clearAllErrorOrInfos())}),_(1),p()}if(n&2){let e=c(5).$implicit;a(),D(" ",e("dismiss-all")," ")}}function Ol(n,t){if(n&1&&(v(0),f(1,Nl,2,1,"li",7),y()),n&2){let e=t.ngIf,i=c().ngIf;a(),d("ngIf",i.length>0||e.length>0)}}function Pl(n,t){if(n&1&&(v(0),f(1,Ol,2,1,"ng-container",3),M(2,"async"),y()),n&2){let e=c(4);a(),d("ngIf",P(2,1,e.infos$))}}function Fl(n,t){if(n&1&&(v(0),l(1,"li",9)(2,"div",10),_(3,"Title goes here"),p(),l(4,"div",11),_(5,"Subtitle goes here"),p(),l(6,"div",12)(7,"div",13),C(8,"div",14),p()()(),l(9,"li",9)(10,"div",10),_(11,"Title goes here"),p(),l(12,"div",11),_(13,"Subtitle goes here"),p()(),l(14,"li",9)(15,"div")(16,"div",10),_(17,"Scanning Books"),p(),l(18,"div",11),_(19,"E:\\\\Books\\\\Demon King Daimaou\\\\Demon King Daimaou - Volume 11.epub"),p(),l(20,"div",12)(21,"div",15),_(22),p(),l(23,"div",16),C(24,"div",17),p()()()(),l(25,"li",18)(26,"div")(27,"div",10),C(28,"i",19),_(29,"There was some library scan error"),p(),l(30,"div",11),_(31,"Click for more information"),p()(),C(32,"button",20),p(),l(33,"li",21)(34,"div")(35,"div",10),C(36,"i",22),_(37,"Scan didn't run becasuse nothing to do"),p(),l(38,"div",11),_(39,"Click for more information"),p()(),C(40,"button",20),p(),l(41,"li",9)(42,"div",23)(43,"span",24),C(44,"app-circular-loader",25),l(45,"span",26),_(46," 10% downloaded "),p()(),l(47,"span",10),_(48),M(49,"sentenceCase"),p()(),l(50,"div",27),_(51,"PDFs"),p()(),y()),n&2){let e=c(4);a(8),ce("aria-valuenow",100),a(14),D("",e.prettyPrintProgress(.1),"%"),a(2),d("ngStyle",ne(10,yn,.1*100+"%")),ce("aria-valuenow",.1*100),a(20),d("currentValue",25)("showIcon",!0)("center",!1),a(4),D("Downloading ",P(49,8,"series"),"")}}function Rl(n,t){if(n&1&&(l(0,"div",32),_(1),p()),n&2){let e=c(2).$implicit;d("title",e.subTitle),a(),g(e.subTitle)}}function Dl(n,t){n&1&&(l(0,"div",13),C(1,"div",14),p()),n&2&&(a(),ce("aria-valuenow",100))}function Al(n,t){if(n&1&&(l(0,"li",9)(1,"div",10),_(2),p(),f(3,Rl,2,2,"div",30),l(4,"div",12),f(5,Dl,2,1,"div",31),p()()),n&2){let e=c().$implicit;a(2),g(e.title),a(),d("ngIf",e.subTitle!==""),a(2),d("ngIf",e.progress==="indeterminate")}}function Vl(n,t){if(n&1&&(l(0,"div",32),_(1),p()),n&2){let e=c(2).$implicit;d("title",e.subTitle),a(),g(e.subTitle)}}function Ll(n,t){if(n&1&&(l(0,"li",9)(1,"div",10),_(2),p(),f(3,Vl,2,2,"div",30),l(4,"div",12)(5,"div",15),_(6),p(),l(7,"div",16),C(8,"div",17),p()()()),n&2){let e=c().$implicit,i=c(5);a(2),g(e.title),a(),d("ngIf",e.subTitle!==""),a(3),g(i.prettyPrintProgress(e.body.progress)+"%"),a(2),d("ngStyle",ne(5,yn,e.body.progress*100+"%")),ce("aria-valuenow",e.body.progress*100)}}function $l(n,t){if(n&1&&(v(0),f(1,Al,6,3,"li",29)(2,Ll,9,7,"ng-template",null,1,$),y()),n&2){let e=t.$implicit,i=q(3);a(),d("ngIf",e.progress==="indeterminate"||e.progress==="none")("ngIfElse",i)}}function zl(n,t){if(n&1&&(v(0),f(1,$l,4,2,"ng-container",28),y()),n&2){let e=t.ngIf;a(),d("ngForOf",e)}}function Bl(n,t){if(n&1){let e=w();l(0,"li",35),b("click",function(){S(e);let r=c().$implicit,o=c(5);return x(o.handleUpdateAvailableClick(r))}),C(1,"i",36),_(2),p()}if(n&2){let e=c(5).$implicit;a(2),D("",e("update-available")," ")}}function Ul(n,t){if(n&1&&(l(0,"div",27),_(1),p()),n&2){let e=c(2).$implicit;a(),g(e.subTitle)}}function Gl(n,t){if(n&1&&(l(0,"li",37)(1,"div"),_(2),p(),f(3,Ul,2,1,"div",38),p()),n&2){let e=c().$implicit;a(2),g(e.title),a(),d("ngIf",e.subTitle!=="")}}function Hl(n,t){if(n&1&&(v(0),f(1,Bl,3,1,"li",33)(2,Gl,4,2,"li",34),y()),n&2){let e=t.$implicit,i=c(5);a(),d("ngIf",e.name===i.EVENTS.UpdateAvailable),a(),d("ngIf",e.name!==i.EVENTS.UpdateAvailable)}}function jl(n,t){if(n&1&&(v(0),f(1,Hl,3,2,"ng-container",28),y()),n&2){let e=t.ngIf;a(),d("ngForOf",e)}}function Kl(n,t){if(n&1&&(l(0,"div",32),_(1),p()),n&2){let e=c().$implicit;d("title",e.subTitle),a(),g(e.subTitle)}}function ql(n,t){if(n&1&&(v(0),l(1,"li",9)(2,"div",10),_(3),M(4,"sentenceCase"),p(),f(5,Kl,2,2,"div",30),l(6,"div",12)(7,"div",15),_(8),p(),l(9,"div",16),C(10,"div",17),p()()(),y()),n&2){let e=t.$implicit,i=c(4).$implicit;a(3),g(i("downloading-item",ne(7,Tl,P(4,5,e.entityType)))),a(2),d("ngIf",e.subTitle!==""),a(3),D("",e.progress,"%"),a(2),d("ngStyle",ne(9,yn,e.progress+"%")),ce("aria-valuenow",e.progress)}}function Ql(n,t){if(n&1&&(l(0,"li",9),_(1),p()),n&2){let e=c().ngIf;a(),D("",e.length," downloads in Queue")}}function Wl(n,t){if(n&1&&(v(0),f(1,ql,11,11,"ng-container",28)(2,Ql,2,1,"li",9),y()),n&2){let e=t.ngIf;a(),d("ngForOf",e),a(),dr(2,e.length>1?2:-1)}}function Yl(n,t){if(n&1){let e=w();v(0),l(1,"li",39),b("click",function(){let r=S(e).$implicit,o=c(5);return x(o.seeMore(r))}),l(2,"div")(3,"div",10),C(4,"i",19),_(5),p(),l(6,"div",11),_(7),p()(),l(8,"button",40),b("click",function(r){let o=S(e).$implicit,s=c(5);return x(s.removeErrorOrInfo(o,r))}),p()(),y()}if(n&2){let e=t.$implicit,i=c(4).$implicit;a(5),g(e.title),a(2),g(i("more-info")),a(),ce("aria-label",i("close"))}}function Zl(n,t){if(n&1&&(v(0),f(1,Yl,9,3,"ng-container",28),y()),n&2){let e=t.ngIf;a(),d("ngForOf",e)}}function Xl(n,t){if(n&1){let e=w();v(0),l(1,"li",41),b("click",function(){let r=S(e).$implicit,o=c(5);return x(o.seeMore(r))}),l(2,"div")(3,"div",10),C(4,"i",22),_(5),p(),l(6,"div",11),_(7),p()(),l(8,"button",40),b("click",function(r){let o=S(e).$implicit,s=c(5);return x(s.removeErrorOrInfo(o,r))}),p()(),y()}if(n&2){let e=t.$implicit,i=c(4).$implicit;a(5),g(e.title),a(2),g(i("more-info")),a(),ce("aria-label",i("close"))}}function Jl(n,t){if(n&1&&(v(0),f(1,Xl,9,3,"ng-container",28),y()),n&2){let e=t.ngIf;a(),d("ngForOf",e)}}function ec(n,t){if(n&1&&(l(0,"li",9)(1,"div"),_(2),p()()),n&2){let e=c().ngIf,i=c(3).$implicit;a(2),g(i("users-online-count",ne(1,wl,e.length)))}}function tc(n,t){if(n&1&&(l(0,"li",9),_(1),p()),n&2){let e=c(4).$implicit,i=c();a(),yi("",e("active-events-title")," ",i.activeEvents,"")}}function ic(n,t){if(n&1&&(v(0),f(1,ec,3,3,"li",42)(2,tc,2,2,"li",42),y()),n&2){let e=t.ngIf,i=c(4);a(),d("ngIf",e.length>1),a(),d("ngIf",i.debugMode)}}function nc(n,t){if(n&1&&(l(0,"li",9),_(1),p()),n&2){let e=c(4).$implicit;a(),g(e("no-data"))}}function rc(n,t){if(n&1&&(v(0),f(1,nc,2,1,"li",42),y()),n&2){let e=t.ngIf,i=c(4);a(),d("ngIf",i.activeEvents===0&&e.length===0)}}function oc(n,t){if(n&1&&(l(0,"ul",6),f(1,Pl,3,3,"ng-container",3),M(2,"async"),f(3,Fl,52,12,"ng-container",3)(4,zl,2,1,"ng-container",3),M(5,"async"),f(6,jl,2,1,"ng-container",3),M(7,"async"),f(8,Wl,3,2,"ng-container",3),M(9,"async"),f(10,Zl,2,1,"ng-container",3),M(11,"async"),f(12,Jl,2,1,"ng-container",3),M(13,"async"),f(14,ic,3,2,"ng-container",3),M(15,"async"),f(16,rc,2,1,"ng-container",3),M(17,"async"),p()),n&2){let e=c(3);a(),d("ngIf",P(2,9,e.errors$)),a(2),d("ngIf",e.debugMode),a(),d("ngIf",P(5,11,e.progressEvents$)),a(2),d("ngIf",P(7,13,e.singleUpdates$)),a(2),d("ngIf",P(9,15,e.downloadService.activeDownloads$)),a(2),d("ngIf",P(11,17,e.errors$)),a(2),d("ngIf",P(13,19,e.infos$)),a(2),d("ngIf",P(15,21,e.messageHub.onlineUsers$)),a(2),d("ngIf",P(17,23,e.downloadService.activeDownloads$))}}function ac(n,t){if(n&1&&(v(0),f(1,Ml,3,3,"ng-container",3),M(2,"async"),f(3,oc,18,25,"ng-template",null,0,$),y()),n&2){let e=c(2);a(),d("ngIf",P(2,1,e.downloadService.activeDownloads$))}}function sc(n,t){if(n&1&&(v(0),f(1,ac,5,3,"ng-container",3),M(2,"async"),y()),n&2){let e=c();a(),d("ngIf",P(2,1,e.isAdmin$))}}var Go=(()=>{let t=class t{constructor(i,r,o,s,m){this.messageHub=i,this.modalService=r,this.accountService=o,this.confirmService=s,this.cdRef=m,this.destroyRef=T(ge),this.isAdmin$=mt(!1),this.progressEventsSource=new Ct([]),this.progressEvents$=this.progressEventsSource.asObservable(),this.singleUpdateSource=new Ct([]),this.singleUpdates$=this.singleUpdateSource.asObservable(),this.errorSource=new Ct([]),this.errors$=this.errorSource.asObservable(),this.infoSource=new Ct([]),this.infos$=this.infoSource.asObservable(),this.updateNotificationModalRef=null,this.activeEvents=0,this.debugMode=!1,this.EVENTS=qe,this.downloadService=T(ho)}ngOnDestroy(){this.progressEventsSource.complete(),this.singleUpdateSource.complete(),this.errorSource.complete()}ngOnInit(){this.messageHub.messages$.pipe(ee(this.destroyRef)).subscribe(i=>{if(i.event===qe.NotificationProgress)this.processNotificationProgressEvent(i);else if(i.event===qe.Error){let r=this.errorSource.getValue();r.push(i.payload),this.errorSource.next(r),this.activeEvents+=1,this.cdRef.markForCheck()}else if(i.event===qe.Info){let r=this.infoSource.getValue();r.push(i.payload),this.infoSource.next(r),this.activeEvents+=1,this.cdRef.markForCheck()}else i.event===qe.UpdateAvailable&&this.handleUpdateAvailableClick(i.payload)}),this.isAdmin$=this.accountService.currentUser$.pipe(ee(this.destroyRef),_e(i=>i&&this.accountService.hasAdminRole(i)||!1),mi())}processNotificationProgressEvent(i){let r=i.payload,o;switch(i.payload.eventType){case"single":let s=this.singleUpdateSource.getValue();s.push(r),this.singleUpdateSource.next(s),this.activeEvents+=1,this.cdRef.markForCheck();break;case"started":o=this.mergeOrUpdate(this.progressEventsSource.getValue(),r),this.progressEventsSource.next(o);break;case"updated":o=this.mergeOrUpdate(this.progressEventsSource.getValue(),r),this.progressEventsSource.next(o);break;case"ended":o=this.progressEventsSource.getValue(),o=o.filter(m=>m.name!==r.name),this.progressEventsSource.next(o),this.activeEvents=Math.max(this.activeEvents-1,0),this.cdRef.markForCheck();break;default:break}}mergeOrUpdate(i,r){let o=i.findIndex(s=>s.name===r.name);return o<0?(i.push(r),this.activeEvents+=1,this.cdRef.markForCheck()):i[o]=r,i}handleUpdateAvailableClick(i){this.updateNotificationModalRef==null&&(this.updateNotificationModalRef=this.modalService.open(wo,{scrollable:!0,size:"lg"}),i.hasOwnProperty("body")?this.updateNotificationModalRef.componentInstance.updateData=i.body:this.updateNotificationModalRef.componentInstance.updateData=i,this.updateNotificationModalRef.closed.subscribe(()=>{this.updateNotificationModalRef=null}),this.updateNotificationModalRef.dismissed.subscribe(()=>{this.updateNotificationModalRef=null}))}seeMore(i){return ot(this,null,function*(){let r=new Xr;i.name===qe.Error?r.buttons=[{text:"Ok",type:"secondary"},{text:"Dismiss",type:"primary"}]:r.buttons=[{text:"Ok",type:"primary"}],r.header=i.title,r.content=i.subTitle,(yield this.confirmService.alert(i.subTitle||i.title,r))&&this.removeErrorOrInfo(i)})}clearAllErrorOrInfos(){let i=this.infoSource.getValue().length,r=this.errorSource.getValue().length;this.infoSource.next([]),this.errorSource.next([]),this.activeEvents-=Math.max(i+r,0),this.cdRef.markForCheck()}removeErrorOrInfo(i,r){r&&(r.stopPropagation(),r.preventDefault());let o=[];i.name===qe.Info?(o=this.infoSource.getValue(),o=o.filter(s=>s!==i),this.infoSource.next(o)):(o=this.errorSource.getValue(),o=o.filter(s=>s!==i),this.errorSource.next(o)),this.activeEvents=Math.max(this.activeEvents-1,0),this.cdRef.markForCheck()}prettyPrintProgress(i){return Math.trunc(i*100)}};t.\u0275fac=function(r){return new(r||t)(L(Mi),L(zt),L(pe),L(Pi),L(Q))},t.\u0275cmp=G({type:t,selectors:[["app-nav-events-toggle"]],inputs:{user:"user"},standalone:!0,features:[H],decls:1,vars:1,consts:[["popContent",""],["progressEvent",""],[4,"transloco","translocoRead"],[4,"ngIf"],["type","button","placement","bottom",1,"btn","btn-icon",3,"ngClass","ngbPopover","title","popoverClass","autoClose"],["aria-hidden","true",1,"fa","fa-wave-square","nav"],[1,"list-group","list-group-flush","dark-menu"],["class","list-group-item dark-menu-item clickable",3,"click",4,"ngIf"],[1,"list-group-item","dark-menu-item","clickable",3,"click"],[1,"list-group-item","dark-menu-item"],[1,"h6","mb-1"],[1,"accent-text","mb-1"],[1,"progress-container","row","g-0","align-items-center"],[1,"progress",2,"height","5px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated",2,"width","100%"],[1,"col-2"],[1,"col-10","progress",2,"height","5px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngStyle"],[1,"list-group-item","dark-menu-item","error"],[1,"fa-solid","fa-triangle-exclamation","me-2"],["type","button","aria-label","close",1,"btn-close","float-end"],[1,"list-group-item","dark-menu-item","info"],[1,"fa-solid","fa-circle-info","me-2"],[1,"d-inline-flex"],[1,"download"],["fontSize","16px","width","25px","height","unset",3,"currentValue","showIcon","center"],["role","status",1,"visually-hidden"],[1,"accent-text"],[4,"ngFor","ngForOf"],["class","list-group-item dark-menu-item",4,"ngIf","ngIfElse"],["class","accent-text mb-1",3,"title",4,"ngIf"],["class","progress","style","height: 5px;",4,"ngIf"],[1,"accent-text","mb-1",3,"title"],["class","list-group-item dark-menu-item update-available",3,"click",4,"ngIf"],["class","list-group-item dark-menu-item update-available",4,"ngIf"],[1,"list-group-item","dark-menu-item","update-available",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-circle-up","me-1"],[1,"list-group-item","dark-menu-item","update-available"],["class","accent-text",4,"ngIf"],["role","alert",1,"list-group-item","dark-menu-item","error",3,"click"],["type","button",1,"btn-close","float-end",3,"click"],["role","alert",1,"list-group-item","dark-menu-item","info",3,"click"],["class","list-group-item dark-menu-item",4,"ngIf"]],template:function(r,o){r&1&&f(0,sc,3,3,"ng-container",2),r&2&&d("translocoRead","events-widget")},dependencies:[W,Ie,Wr,vr,yo,Me,Xe,Ai,K],styles:[`.dark-menu[_ngcontent-%COMP%]{background-color:var(--navbar-bg-color);border-color:var(--event-widget-border-color)}.dark-menu-item[_ngcontent-%COMP%]{color:var(--event-widget-text-color);background-color:var(--event-widget-item-bg-color);border-color:var(--event-widget-item-border-color)}  .bs-popover-bottom>.popover-arrow:after, .bs-popover-bottom[_ngcontent-%COMP%] > .popover-arrow[_ngcontent-%COMP%]:before{border-bottom-color:transparent}  .nav-events .popover-body{min-width:250px;max-width:250px;padding:0;box-shadow:0 0 12px #000000bf;max-height:calc(100vh - 60px);overflow-y:auto}  .nav-events .popover{min-width:300px}.progress-container[_ngcontent-%COMP%]{width:100%}.progress[_ngcontent-%COMP%]{padding:0}.accent-text[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.btn[_ngcontent-%COMP%]:focus, .btn[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 .1rem var(--navbar-btn-hover-outline-color)}.small-spinner[_ngcontent-%COMP%]{width:1rem;height:1rem}.btn-icon[_ngcontent-%COMP%]{color:#fff}.colored[_ngcontent-%COMP%]{background-color:var(--primary-color);border-radius:60px}.colored-error[_ngcontent-%COMP%]{background-color:var(--error-color)!important;border-radius:60px}.colored-info[_ngcontent-%COMP%]{background-color:var(--event-widget-info-bg-color)!important;border-radius:60px}.update-available[_ngcontent-%COMP%]{cursor:pointer;color:var(--primary-color)}.update-available[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{color:var(--primary-color)!important}.error[_ngcontent-%COMP%]{cursor:pointer;position:relative}.error[_ngcontent-%COMP%]   .h6[_ngcontent-%COMP%]{color:var(--error-color)}.error[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{color:var(--primary-color)!important}.error[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{top:5px;right:10px;font-size:11px;position:absolute}.info[_ngcontent-%COMP%]{cursor:pointer;position:relative}.info[_ngcontent-%COMP%]   .h6[_ngcontent-%COMP%]{color:var(--event-widget-info-bg-color)}.info[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{color:var(--primary-color)!important}.info[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{top:10px;right:10px;font-size:11px;position:absolute}
/*# sourceMappingURL=events-widget.component-3OXKI6NA.css.map */`],changeDetection:0});let n=t;return n})();var lc=["itemTemplate"],cc=["seriesTemplate"],mc=["collectionTemplate"],pc=["tagTemplate"],dc=["personTemplate"],uc=["genreTemplate"],_c=["noResultsTemplate"],fc=["libraryTemplate"],hc=["readingListTemplate"],gc=["fileTemplate"],vc=["chapterTemplate"],yc=["bookmarkTemplate"],Cc=["input"],Sc=n=>({focused:n}),nt=(n,t)=>({$implicit:n,idx:t});function xc(n,t){if(n&1&&(l(0,"div",9)(1,"span",10),_(2),p()()),n&2){let e=c().$implicit;a(2),g(e("loading"))}}function bc(n,t){if(n&1){let e=w();l(0,"button",11),b("click",function(){S(e);let r=c(2);return x(r.resetField())}),p()}if(n&2){let e=c().$implicit;ce("aria-label",e("close"))}}function Ec(n,t){if(n&1){let e=w();l(0,"li",19),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.handleResultlick(r))}),me(1,20),p()}if(n&2){let e=t.$implicit,i=t.index,r=c(4);a(),d("ngTemplateOutlet",r.seriesTemplate)("ngTemplateOutletContext",J(2,nt,e,i))}}function Tc(n,t){if(n&1&&(v(0),l(1,"li",15)(2,"h5",16),_(3,"Series"),p()(),l(4,"ul",17),f(5,Ec,2,5,"li",18),p(),y()),n&2){let e=c(3);a(5),d("ngForOf",e.groupedData.series)}}function wc(n,t){if(n&1){let e=w();l(0,"li",23),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.handleResultlick(r))}),me(1,20),p()}if(n&2){let e=t.$implicit,i=t.index,r=c(4);a(),d("ngTemplateOutlet",r.collectionTemplate)("ngTemplateOutletContext",J(2,nt,e,i))}}function kc(n,t){if(n&1&&(v(0),l(1,"li",15)(2,"h5"),_(3),p()(),l(4,"ul",21),f(5,wc,2,5,"li",22),p(),y()),n&2){let e=c(2).$implicit,i=c();a(3),g(e("collections")),a(2),d("ngForOf",i.groupedData.collections)}}function Ic(n,t){if(n&1){let e=w();l(0,"li",23),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.handleResultlick(r))}),me(1,20),p()}if(n&2){let e=t.$implicit,i=t.index,r=c(4);a(),d("ngTemplateOutlet",r.readingListTemplate)("ngTemplateOutletContext",J(2,nt,e,i))}}function Mc(n,t){if(n&1&&(v(0),l(1,"li",15)(2,"h5"),_(3),p()(),l(4,"ul",21),f(5,Ic,2,5,"li",22),p(),y()),n&2){let e=c(2).$implicit,i=c();a(3),g(e("reading-lists")),a(2),d("ngForOf",i.groupedData.readingLists)}}function Nc(n,t){if(n&1){let e=w();l(0,"li",23),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.handleResultlick(r))}),me(1,20),p()}if(n&2){let e=t.$implicit,i=t.index,r=c(4);a(),d("ngTemplateOutlet",r.bookmarkTemplate)("ngTemplateOutletContext",J(2,nt,e,i))}}function Oc(n,t){if(n&1&&(v(0),l(1,"li",15)(2,"h5"),_(3),p()(),l(4,"ul",21),f(5,Nc,2,5,"li",22),p(),y()),n&2){let e=c(2).$implicit,i=c();a(3),g(e("bookmarks")),a(2),d("ngForOf",i.groupedData.bookmarks)}}function Pc(n,t){if(n&1){let e=w();l(0,"li",27),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.handleResultlick(r))}),me(1,20),p()}if(n&2){let e=t.$implicit,i=t.index,r=c(4);a(),d("ngTemplateOutlet",r.libraryTemplate)("ngTemplateOutletContext",J(2,nt,e,i))}}function Fc(n,t){if(n&1&&(v(0),l(1,"li",15)(2,"h5",24),_(3),p()(),l(4,"ul",25),f(5,Pc,2,5,"li",26),p(),y()),n&2){let e=c(2).$implicit,i=c();a(3),g(e("libraries")),a(2),d("ngForOf",i.groupedData.libraries)}}function Rc(n,t){if(n&1){let e=w();l(0,"li",23),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.handleResultlick(r))}),me(1,20),p()}if(n&2){let e=t.$implicit,i=t.index,r=c(4);a(),d("ngTemplateOutlet",r.genreTemplate)("ngTemplateOutletContext",J(2,nt,e,i))}}function Dc(n,t){if(n&1&&(v(0),l(1,"li",15)(2,"h5"),_(3),p()(),l(4,"ul",21),f(5,Rc,2,5,"li",22),p(),y()),n&2){let e=c(2).$implicit,i=c();a(3),g(e("genres")),a(2),d("ngForOf",i.groupedData.genres)}}function Ac(n,t){if(n&1){let e=w();l(0,"li",23),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.handleResultlick(r))}),me(1,20),p()}if(n&2){let e=t.$implicit,i=t.index,r=c(4);a(),d("ngTemplateOutlet",r.tagTemplate)("ngTemplateOutletContext",J(2,nt,e,i))}}function Vc(n,t){if(n&1&&(v(0),l(1,"li",15)(2,"h5"),_(3),p()(),l(4,"ul",21),f(5,Ac,2,5,"li",22),p(),y()),n&2){let e=c(2).$implicit,i=c();a(3),g(e("tags")),a(2),d("ngForOf",i.groupedData.tags)}}function Lc(n,t){if(n&1){let e=w();l(0,"li",23),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.handleResultlick(r))}),me(1,20),p()}if(n&2){let e=t.$implicit,i=t.index,r=c(4);a(),d("ngTemplateOutlet",r.personTemplate)("ngTemplateOutletContext",J(2,nt,e,i))}}function $c(n,t){if(n&1&&(v(0),l(1,"li",15)(2,"h5"),_(3),p()(),l(4,"ul",21),f(5,Lc,2,5,"li",22),p(),y()),n&2){let e=c(2).$implicit,i=c();a(3),g(e("people")),a(2),d("ngForOf",i.groupedData.persons)}}function zc(n,t){if(n&1){let e=w();l(0,"li",23),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.handleResultlick(r))}),me(1,20),p()}if(n&2){let e=t.$implicit,i=t.index,r=c(4);a(),d("ngTemplateOutlet",r.chapterTemplate)("ngTemplateOutletContext",J(2,nt,e,i))}}function Bc(n,t){if(n&1&&(v(0),l(1,"li",15)(2,"h5"),_(3),p()(),l(4,"ul",21),f(5,zc,2,5,"li",22),p(),y()),n&2){let e=c(2).$implicit,i=c();a(3),g(e("chapters")),a(2),d("ngForOf",i.groupedData.chapters)}}function Uc(n,t){if(n&1){let e=w();l(0,"li",23),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.handleResultlick(r))}),me(1,20),p()}if(n&2){let e=t.$implicit,i=t.index,r=c(4);a(),d("ngTemplateOutlet",r.fileTemplate)("ngTemplateOutletContext",J(2,nt,e,i))}}function Gc(n,t){if(n&1&&(v(0),l(1,"li",15)(2,"h5"),_(3),p()(),l(4,"ul",21),f(5,Uc,2,5,"li",22),p(),y()),n&2){let e=c(2).$implicit,i=c();a(3),g(e("files")),a(2),d("ngForOf",i.groupedData.files)}}function Hc(n,t){if(n&1&&(v(0),l(1,"ul",21)(2,"li",28),me(3,29),p()(),y()),n&2){let e=c(3);a(3),d("ngTemplateOutlet",e.noResultsTemplate)}}function jc(n,t){if(n&1&&(l(0,"div",12)(1,"ul",13),f(2,Tc,6,1,"ng-container",14)(3,kc,6,2,"ng-container",14)(4,Mc,6,2,"ng-container",14)(5,Oc,6,2,"ng-container",14)(6,Fc,6,2,"ng-container",14)(7,Dc,6,2,"ng-container",14)(8,Vc,6,2,"ng-container",14)(9,$c,6,2,"ng-container",14)(10,Bc,6,2,"ng-container",14)(11,Gc,6,2,"ng-container",14)(12,Hc,4,1,"ng-container",14),p()()),n&2){let e=c(2);a(2),d("ngIf",e.seriesTemplate!==void 0&&e.groupedData.series.length>0),a(),d("ngIf",e.collectionTemplate!==void 0&&e.groupedData.collections.length>0),a(),d("ngIf",e.readingListTemplate!==void 0&&e.groupedData.readingLists.length>0),a(),d("ngIf",e.bookmarkTemplate!==void 0&&e.groupedData.bookmarks.length>0),a(),d("ngIf",e.libraryTemplate!==void 0&&e.groupedData.libraries.length>0),a(),d("ngIf",e.genreTemplate!==void 0&&e.groupedData.genres.length>0),a(),d("ngIf",e.tagTemplate!==void 0&&e.groupedData.tags.length>0),a(),d("ngIf",e.personTemplate!==void 0&&e.groupedData.persons.length>0),a(),d("ngIf",e.chapterTemplate!==void 0&&e.groupedData.chapters.length>0),a(),d("ngIf",e.fileTemplate!==void 0&&e.groupedData.files.length>0),a(),d("ngIf",!e.hasData&&e.searchTerm.length>0)}}function Kc(n,t){if(n&1){let e=w();v(0),l(1,"form",2)(2,"div",3),b("click",function(r){S(e);let o=c();return x(o.onInputFocus(r))}),l(3,"div",4)(4,"input",5,0),b("focusout",function(r){S(e);let o=c();return x(o.close(r))})("focus",function(r){S(e);let o=c();return x(o.open(r))}),p(),f(6,xc,3,1,"div",6)(7,bc,1,1,"button",7),p()(),f(8,jc,13,11,"div",8),p(),y()}if(n&2){let e,i=c();a(),d("formGroup",i.typeaheadForm),a(),d("ngClass",ne(8,Sc,i.hasFocus)),a(2),d("id",i.id)("placeholder",i.placeholder),ce("aria-expanded",i.hasFocus&&i.hasData),a(2),d("ngIf",i.isLoading),a(),d("ngIf",((e=i.typeaheadForm.get("typeahead"))==null?null:e.value.length)>0),a(),d("ngIf",i.hasFocus)}}var Ho=(()=>{let t=class t{get searchTerm(){return this.typeaheadForm.get("typeahead")?.value||""}get hasData(){return!(this.noResultsTemplate!=null&&!this.groupedData.persons.length&&!this.groupedData.collections.length&&!this.groupedData.series.length&&!this.groupedData.persons.length&&!this.groupedData.tags.length&&!this.groupedData.genres.length&&!this.groupedData.libraries.length&&!this.groupedData.files.length&&!this.groupedData.chapters.length&&!this.groupedData.bookmarks.length)}constructor(i){this.cdRef=i,this.id="grouped-typeahead",this.minQueryLength=0,this.initialValue="",this.groupedData=new Jt,this.placeholder="",this.debounceTime=200,this.inputChanged=new $e,this.selected=new $e,this.clearField=new $e,this.focusChanged=new $e,this.destroyRef=T(ge),this.hasFocus=!1,this.isLoading=!1,this.typeaheadForm=new De({}),this.prevSearchTerm=""}handleDocumentClick(i){this.close()}handleKeyPress(i){if(this.hasFocus)switch(i.key){case Xt.ESC_KEY:this.close(),i.stopPropagation();break;default:break}}ngOnInit(){this.typeaheadForm.addControl("typeahead",new se(this.initialValue,[])),this.cdRef.markForCheck(),this.typeaheadForm.valueChanges.pipe(ci(this.debounceTime),ee(this.destroyRef)).subscribe(i=>{let r=this.typeaheadForm.get("typeahead")?.value;if(r!=null&&r!=""&&!this.hasFocus&&(this.hasFocus=!0,this.cdRef.markForCheck()),r!=null&&r.length>=this.minQueryLength){if(this.prevSearchTerm===r)return;this.inputChanged.emit(r),this.prevSearchTerm=r,this.cdRef.markForCheck()}})}onInputFocus(i){return i&&(i.stopPropagation(),i.preventDefault()),this.openDropdown(),this.hasFocus}openDropdown(){setTimeout(()=>{let i=this.typeaheadForm.get("typeahead");i&&i.setValue(i.value)})}handleResultlick(i){this.selected.emit(i)}resetField(){this.prevSearchTerm="",this.typeaheadForm.get("typeahead")?.setValue(this.initialValue),this.clearField.emit(),this.cdRef.markForCheck()}close(i){i&&this.hasData||(this.searchTerm===""&&this.resetField(),this.hasFocus=!1,this.cdRef.markForCheck(),this.focusChanged.emit(this.hasFocus))}open(i){this.hasFocus=!0,this.focusChanged.emit(this.hasFocus),this.cdRef.markForCheck()}clear(){this.prevSearchTerm="",this.typeaheadForm.get("typeahead")?.setValue(this.initialValue),this.cdRef.markForCheck()}};t.\u0275fac=function(r){return new(r||t)(L(Q))},t.\u0275cmp=G({type:t,selectors:[["app-grouped-typeahead"]],contentQueries:function(r,o,s){if(r&1&&(Re(s,lc,5),Re(s,cc,5),Re(s,mc,5),Re(s,pc,5),Re(s,dc,5),Re(s,uc,5),Re(s,_c,5),Re(s,fc,5),Re(s,hc,5),Re(s,gc,5),Re(s,vc,5),Re(s,yc,5)),r&2){let m;ye(m=Ce())&&(o.itemTemplate=m.first),ye(m=Ce())&&(o.seriesTemplate=m.first),ye(m=Ce())&&(o.collectionTemplate=m.first),ye(m=Ce())&&(o.tagTemplate=m.first),ye(m=Ce())&&(o.personTemplate=m.first),ye(m=Ce())&&(o.genreTemplate=m.first),ye(m=Ce())&&(o.noResultsTemplate=m.first),ye(m=Ce())&&(o.libraryTemplate=m.first),ye(m=Ce())&&(o.readingListTemplate=m.first),ye(m=Ce())&&(o.fileTemplate=m.first),ye(m=Ce())&&(o.chapterTemplate=m.first),ye(m=Ce())&&(o.bookmarkTemplate=m.first)}},viewQuery:function(r,o){if(r&1&&vi(Cc,5),r&2){let s;ye(s=Ce())&&(o.inputElem=s.first)}},hostBindings:function(r,o){r&1&&b("click",function(m){return o.handleDocumentClick(m)},!1,Ft)("keydown",function(m){return o.handleKeyPress(m)},!1,Ft)},inputs:{id:"id",minQueryLength:"minQueryLength",initialValue:"initialValue",groupedData:"groupedData",placeholder:"placeholder",debounceTime:"debounceTime"},outputs:{inputChanged:"inputChanged",selected:"selected",clearField:"clearField",focusChanged:"focusChanged"},standalone:!0,features:[H],decls:1,vars:1,consts:[["input",""],[4,"transloco","translocoRead"],[1,"grouped-typeahead",3,"formGroup"],[1,"typeahead-input",3,"click","ngClass"],[1,"search"],["type","text","inputmode","search","autocomplete","off","formControlName","typeahead","aria-haspopup","listbox","aria-owns","dropdown","aria-autocomplete","list","role","search",3,"focusout","focus","id","placeholder"],["class","spinner-border spinner-border-sm","role","status",4,"ngIf"],["type","button","class","btn-close",3,"click",4,"ngIf"],["class","dropdown",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"],["type","button",1,"btn-close",3,"click"],[1,"dropdown"],["role","listbox","id","dropdown",1,"list-group"],[4,"ngIf"],[1,"list-group-item","section-header"],["id","series-group"],["role","group","aria-describedby","series-group",1,"list-group","results"],["tabindex","0","class","list-group-item","aria-labelledby","series-group","role","option",3,"click",4,"ngFor","ngForOf"],["tabindex","0","aria-labelledby","series-group","role","option",1,"list-group-item",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"list-group","results"],["tabindex","0","class","list-group-item","role","option",3,"click",4,"ngFor","ngForOf"],["tabindex","0","role","option",1,"list-group-item",3,"click"],["id","libraries-group"],["role","group","aria-describedby","libraries-group",1,"list-group","results"],["tabindex","0","class","list-group-item","aria-labelledby","libraries-group","role","option",3,"click",4,"ngFor","ngForOf"],["tabindex","0","aria-labelledby","libraries-group","role","option",1,"list-group-item",3,"click"],[1,"list-group-item"],[3,"ngTemplateOutlet"]],template:function(r,o){r&1&&f(0,Kc,9,10,"ng-container",1),r&2&&d("translocoRead","grouped-typeahead")},dependencies:[Pe,Ge,Ne,Oe,Ue,He,je,Ie,W,Me,Ei,K],styles:[`form[_ngcontent-%COMP%]{max-height:38px}.search-result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%!important}.btn-close[_ngcontent-%COMP%]{margin-top:8px;font-size:.8rem;position:absolute;right:5px}.typeahead-input[_ngcontent-%COMP%]{border:1px solid transparent;border-radius:4px;padding:0 6px;display:inline-block;overflow:hidden;position:relative;z-index:1;box-sizing:border-box;box-shadow:none;cursor:text;background-color:var(--input-bg-color);color:var(--body-text-color);min-height:38px;transition-property:all;transition-duration:.3s;display:block}.typeahead-input[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;position:relative}.typeahead-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:0!important;border-radius:.28571429rem;padding:0!important;min-height:0px!important;max-width:100%!important;margin:0!important;text-indent:0!important;line-height:inherit!important;box-shadow:none!important;width:300px;transition-property:all;transition-duration:.3s;display:block;opacity:1;position:relative;left:4px;border:none}.typeahead-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{width:calc(100vw - 180px)}.typeahead-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:empty{padding-top:6px!important}.typeahead-input.focused[_ngcontent-%COMP%]{width:99%;border-color:var(--input-focused-border-color)}@media only screen and (max-width: 650px){input[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]:focus-visible{width:100%!important}}.section-header[_ngcontent-%COMP%]{color:var(--body-text-color)}.section-header[_ngcontent-%COMP%]:hover{background-color:var(--list-group-item-bg-color)!important;cursor:default}.dropdown[_ngcontent-%COMP%]{width:100vw;height:calc(100vh - 56px);background:var(--dropdown-overlay-color);position:fixed;justify-content:center;left:0;overflow-y:auto;display:flex;flex-wrap:wrap;margin-top:9px}.list-group[_ngcontent-%COMP%]{max-width:600px;z-index:1000;overflow-y:auto;overflow-x:hidden;display:block;flex:auto;max-height:calc(100vh - 58px);height:fit-content}.list-group.results[_ngcontent-%COMP%]{max-height:unset}@media only screen and (max-width: 600px){.list-group[_ngcontent-%COMP%]{max-width:unset}}.list-group-item[_ngcontent-%COMP%]{padding:5px 10px}li[_ngcontent-%COMP%]{list-style:none;border-radius:0!important;margin:0!important}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{border-radius:0!important}.spinner-border[_ngcontent-%COMP%]{position:absolute;right:10px;margin:auto;cursor:pointer;top:30%}
/*# sourceMappingURL=grouped-typeahead.component-3ROGJ3TJ.css.map */`],changeDetection:0});let n=t;return n})();var qc=["search"];function Qc(n,t){if(n&1){let e=w();l(0,"a",25),b("click",function(){S(e);let r=c(3);return x(r.hideSideNav())}),C(1,"i",26),p()}}function Wc(n,t){if(n&1){let e=w();l(0,"div",31),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.clickLibraryResult(r))}),l(1,"div",32)(2,"span"),_(3),p()()()}if(n&2){let e=t.$implicit;a(3),g(e.name)}}function Yc(n,t){if(n&1&&(l(0,"span"),_(1),p()),n&2){let e=c(2).$implicit;a(),g(e.name)}}function Zc(n,t){if(n&1&&C(0,"span",38),n&2){let e=c(2).$implicit;d("innerHTML",e.localizedName,xt)}}function Xc(n,t){if(n&1&&(v(0),f(1,Yc,2,1,"span",37)(2,Zc,1,1,"ng-template",null,12,$),y()),n&2){let e=t.ngIf,i=q(3),r=c().$implicit;a(),d("ngIf",r.name.toLowerCase().trim().indexOf(e)>=0)("ngIfElse",i)}}function Jc(n,t){if(n&1){let e=w();l(0,"div",31),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.clickSeriesSearchResult(r))}),l(1,"div",33),C(2,"app-image",34),p(),l(3,"div",32),C(4,"app-series-format",35),f(5,Xc,4,2,"ng-container",24),l(6,"div",36),_(7),p()()()}if(n&2){let e=t.$implicit,i=c(4);a(2),d("imageUrl",i.imageService.getSeriesCoverImage(e.seriesId)),a(2),d("format",e.format),a(),d("ngIf",i.searchTerm.toLowerCase().trim()),a(2),D("in ",e.libraryName,"")}}function em(n,t){if(n&1&&(l(0,"span"),_(1),p()),n&2){let e=c(2).$implicit;a(),g(e.seriesName)}}function tm(n,t){if(n&1&&C(0,"span",38),n&2){let e=c(2).$implicit;d("innerHTML",e.localizedSeriesName,xt)}}function im(n,t){if(n&1&&(v(0),f(1,em,2,1,"span",37)(2,tm,1,1,"ng-template",null,12,$),y()),n&2){let e=t.ngIf,i=q(3),r=c().$implicit;a(),d("ngIf",r.seriesName.toLowerCase().trim().indexOf(e)>=0)("ngIfElse",i)}}function nm(n,t){if(n&1){let e=w();l(0,"div",31),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.clickBookmarkSearchResult(r))}),l(1,"div",33),C(2,"app-image",34),p(),l(3,"div",32),C(4,"app-series-format",35),f(5,im,4,2,"ng-container",24),p()()}if(n&2){let e=t.$implicit,i=c(4);a(2),d("imageUrl",i.imageService.getSeriesCoverImage(e.seriesId)),a(2),d("format",e.format),a(),d("ngIf",i.searchTerm.toLowerCase().trim())}}function rm(n,t){if(n&1){let e=w();l(0,"div",31),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.clickCollectionSearchResult(r))}),l(1,"div",33),C(2,"app-image",34),p(),l(3,"div",32)(4,"div")(5,"span"),_(6),p(),C(7,"app-promoted-icon",39),p(),C(8,"app-collection-owner",40),p()()}if(n&2){let e=t.$implicit,i=c(4);a(2),d("imageUrl",i.imageService.getCollectionCoverImage(e.id)),a(4),g(e.title),a(),d("promoted",e.promoted),a(),d("collection",e)}}function om(n,t){if(n&1&&(l(0,"span"),_(1," \xA0"),C(2,"i",41),l(3,"span",42),_(4),p()()),n&2){let e=c(4).$implicit;a(2),d("title",e("promoted")),a(2),g(e("promoted"))}}function am(n,t){if(n&1){let e=w();l(0,"div",31),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.clickReadingListSearchResult(r))}),l(1,"div",32)(2,"span"),_(3),p(),f(4,om,5,2,"span",24),p()()}if(n&2){let e=t.$implicit;a(3),g(e.title),a(),d("ngIf",e.promoted)}}function sm(n,t){if(n&1){let e=w();l(0,"div",31),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.goToOther(o.FilterField.Tags,r.id))}),l(1,"div",32)(2,"span"),_(3),p()()()}if(n&2){let e=t.$implicit;a(3),g(e.title)}}function lm(n,t){if(n&1){let e=w();l(0,"div",43),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.goToPerson(r.role,r.id))}),l(1,"div",32),C(2,"div",38),l(3,"div",44),_(4),M(5,"personRole"),p()()()}if(n&2){let e=t.$implicit;a(2),d("innerHTML",e.name,xt),a(2),g(P(5,2,e.role))}}function cm(n,t){if(n&1){let e=w();l(0,"div",43),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.goToOther(o.FilterField.Genres,r.id))}),l(1,"div",32),C(2,"div",38),p()()}if(n&2){let e=t.$implicit;a(2),d("innerHTML",e.title,xt)}}function mm(n,t){if(n&1&&(v(0),C(1,"app-series-format",35),y()),n&2){let e=c().$implicit;a(),d("format",e.files==null?null:e.files[0].format)}}function pm(n,t){if(n&1){let e=w();l(0,"div",43),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.clickChapterSearchResult(r))}),l(1,"div",32),f(2,mm,2,1,"ng-container",24),l(3,"span"),_(4),p()()()}if(n&2){let e=t.$implicit;a(2),d("ngIf",e.files.length>0),a(2),g(e.titleName||e.range)}}function dm(n,t){if(n&1){let e=w();l(0,"div",31),b("click",function(){let r=S(e).$implicit,o=c(4);return x(o.clickFileSearchResult(r))}),l(1,"div",32),C(2,"app-series-format",35),l(3,"span"),_(4),p()()()}if(n&2){let e=t.$implicit;a(2),d("format",e.format),a(2),g(e.filePath)}}function um(n,t){if(n&1&&_(0),n&2){let e=c(3).$implicit;D(" ",e("no-data")," ")}}function _m(n,t){if(n&1){let e=w();l(0,"div",27)(1,"label",28),_(2),p(),l(3,"div",29)(4,"app-grouped-typeahead",30,0),b("inputChanged",function(r){S(e);let o=c(3);return x(o.onChangeSearch(r))})("clearField",function(){S(e);let r=c(3);return x(r.clearSearch())})("focusChanged",function(r){S(e);let o=c(3);return x(o.focusUpdate(r))}),f(6,Wc,4,1,"ng-template",null,1,$)(8,Jc,8,4,"ng-template",null,2,$)(10,nm,6,3,"ng-template",null,3,$)(12,rm,9,4,"ng-template",null,4,$)(14,am,5,2,"ng-template",null,5,$)(16,sm,4,1,"ng-template",null,6,$)(18,lm,6,4,"ng-template",null,7,$)(20,cm,3,1,"ng-template",null,8,$)(22,pm,5,2,"ng-template",null,9,$)(24,dm,5,2,"ng-template",null,10,$)(26,um,1,1,"ng-template",null,11,$),p()()()}if(n&2){let e=c(2).$implicit,i=c();a(2),g(e("search-series-alt")),a(2),d("minQueryLength",2)("placeholder",e("search-alt"))("groupedData",i.searchResults)}}function fm(n,t){if(n&1){let e=w();l(0,"div",46)(1,"button",47),b("click",function(){S(e);let r=c(4);return x(r.scrollToTop())}),C(2,"i",48),l(3,"span",42),_(4),p()()()}if(n&2){let e=c(3).$implicit;a(4),g(e("scroll-to-top-alt"))}}function hm(n,t){if(n&1&&(l(0,"a",53),C(1,"i",54),l(2,"span",42),_(3),p()()),n&2){let e=c(4).$implicit;a(3),g(e("server-settings"))}}function gm(n,t){if(n&1&&(l(0,"a",66),_(1),p()),n&2){let e=c(5).$implicit;a(),g(e("server-settings"))}}function vm(n,t){if(n&1&&(l(0,"a",67),_(1),p()),n&2){let e=c(5).$implicit;a(),g(e("announcements"))}}function ym(n,t){if(n&1){let e=w();l(0,"div",55)(1,"button",56),C(2,"i",57),l(3,"span",58),_(4),M(5,"sentenceCase"),p()(),l(6,"div",59),f(7,gm,2,1,"a",60),l(8,"a",61),_(9),p(),l(10,"a",62),_(11),p(),l(12,"a",63),_(13),p(),f(14,vm,2,1,"a",64),l(15,"a",65),b("click",function(){S(e);let r=c(5);return x(r.logout())}),_(16),p()()()}if(n&2){let e=t.ngIf,i=c(4).$implicit,r=c();a(4),g(P(5,7,e.username)),a(3),d("ngIf",e.roles.includes("Admin")),a(2),g(i("settings")),a(2),g(i("all-filters")),a(2),g(i("help")),a(),d("ngIf",r.accountService.hasAdminRole(e)),a(2),g(i("logout"))}}function Cm(n,t){if(n&1&&(v(0),l(1,"div",27),C(2,"app-nav-events-toggle",49),p(),l(3,"div",50),f(4,hm,4,1,"a",51),p(),f(5,ym,17,9,"div",52),M(6,"async"),y()),n&2){let e=t.ngIf,i=c(4);a(2),d("user",e),a(2),d("ngIf",e.roles.includes("Admin")),a(),d("ngIf",P(6,3,i.accountService.currentUser$))}}function Sm(n,t){if(n&1&&(v(0),f(1,fm,5,1,"div",45)(2,Cm,7,5,"ng-container",24),M(3,"async"),y()),n&2){let e=c(3);a(),d("ngIf",e.backToTopNeeded),a(),d("ngIf",P(3,2,e.accountService.currentUser$))}}function xm(n,t){if(n&1){let e=w();l(0,"nav",15)(1,"div",16)(2,"a",17),b("click",function(){S(e);let r=c(2);return x(r.moveFocus())}),_(3),p(),f(4,Qc,2,0,"a",18),M(5,"async"),l(6,"a",19),C(7,"app-image",20),l(8,"span",21),_(9," Kavita"),p()(),l(10,"ul",22),f(11,_m,28,4,"div",23),M(12,"async"),p(),f(13,Sm,4,4,"ng-container",24),p()()}if(n&2){let e=c().$implicit,i=c();a(3),g(e("skip-alt")),a(),d("ngIf",P(5,4,i.navService==null?null:i.navService.sideNavVisibility$)),a(7),d("ngIf",P(12,6,i.accountService.currentUser$)),a(2),d("ngIf",!i.searchFocused)}}function bm(n,t){if(n&1&&(v(0),f(1,xm,14,8,"nav",14),M(2,"async"),y()),n&2){let e=c();a(),d("ngIf",P(2,1,e.navService==null?null:e.navService.navbarVisible$))}}var jo=(()=>{let t=class t{constructor(i,r,o,s,m,u,h,k,E){this.accountService=i,this.router=r,this.navService=o,this.imageService=s,this.document=m,this.scrollService=u,this.searchService=h,this.cdRef=k,this.filterUtilityService=E,this.destroyRef=T(ge),this.isLoading=!1,this.debounceTime=300,this.searchResults=new Jt,this.searchTerm="",this.backToTopNeeded=!1,this.searchFocused=!1,this.FilterField=xe,this.ScrobbleProvider=bo,this.scrollElem=this.document.body}ngOnInit(){this.scrollService.scrollContainer$.pipe(Pt(),ee(this.destroyRef),ae(i=>{if(i==="body"||i===void 0)this.scrollElem=this.document.body;else{let r=i;this.scrollElem=r.nativeElement}nr(this.scrollElem,"scroll").pipe(ci(20)).subscribe(()=>this.checkBackToTopNeeded(this.scrollElem))})).subscribe(),this.router.events.pipe(fe(i=>i instanceof Lt)).subscribe(()=>{this.checkBackToTopNeeded(this.scrollElem)})}checkBackToTopNeeded(i){let r=i.scrollTop||0;r>100?this.backToTopNeeded=!0:r<40&&(this.backToTopNeeded=!1),this.cdRef.markForCheck()}logout(){this.accountService.logout(),this.navService.hideNavBar(),this.navService.hideSideNav(),this.router.navigateByUrl("/login")}moveFocus(){this.document.getElementById("content")?.focus()}onChangeSearch(i){this.isLoading=!0,this.searchTerm=i.trim(),this.cdRef.markForCheck(),this.searchService.search(i.trim()).pipe(ee(this.destroyRef)).subscribe(r=>{this.searchResults=r,this.isLoading=!1,this.cdRef.markForCheck()},()=>{this.searchResults.reset(),this.isLoading=!1,this.searchTerm="",this.cdRef.markForCheck()})}goTo(i){let r={},o=this.filterUtilityService.createSeriesV2Filter();o.statements=[i],r.page=1,this.clearSearch(),this.filterUtilityService.applyFilterWithParams(["all-series"],o,r).subscribe()}goToOther(i,r){this.goTo({field:i,comparison:Se.Equal,value:r+""})}goToPerson(i,r){switch(this.clearSearch(),r=r+"",i){case j.Other:break;case j.Writer:this.goTo({field:xe.Writers,comparison:Se.Equal,value:r});break;case j.Artist:this.goTo({field:xe.CoverArtist,comparison:Se.Equal,value:r});break;case j.Character:this.goTo({field:xe.Characters,comparison:Se.Equal,value:r});break;case j.Colorist:this.goTo({field:xe.Colorist,comparison:Se.Equal,value:r});break;case j.Editor:this.goTo({field:xe.Editor,comparison:Se.Equal,value:r});break;case j.Inker:this.goTo({field:xe.Inker,comparison:Se.Equal,value:r});break;case j.CoverArtist:this.goTo({field:xe.CoverArtist,comparison:Se.Equal,value:r});break;case j.Letterer:this.goTo({field:xe.Letterer,comparison:Se.Equal,value:r});break;case j.Penciller:this.goTo({field:xe.Penciller,comparison:Se.Equal,value:r});break;case j.Publisher:this.goTo({field:xe.Publisher,comparison:Se.Equal,value:r});break;case j.Imprint:this.goTo({field:xe.Imprint,comparison:Se.Equal,value:r});break;case j.Team:this.goTo({field:xe.Team,comparison:Se.Equal,value:r});break;case j.Location:this.goTo({field:xe.Location,comparison:Se.Equal,value:r});break;case j.Translator:this.goTo({field:xe.Translators,comparison:Se.Equal,value:r});break}}clearSearch(){this.searchViewRef.clear(),this.searchTerm="",this.searchResults=new Jt,this.cdRef.markForCheck()}clickSeriesSearchResult(i){this.clearSearch();let r=i.libraryId,o=i.seriesId;this.router.navigate(["library",r,"series",o])}clickBookmarkSearchResult(i){this.clearSearch();let r=i.libraryId,o=i.seriesId;this.router.navigate(["library",r,"series",o,"manga",i.chapterId],{queryParams:{incognitoMode:!1,bookmarkMode:!0}})}clickFileSearchResult(i){this.clearSearch(),this.searchService.getSeriesForMangaFile(i.id).subscribe(r=>{r!=null&&this.router.navigate(["library",r.libraryId,"series",r.id])})}clickChapterSearchResult(i){this.clearSearch(),this.searchService.getSeriesForChapter(i.id).subscribe(r=>{r!=null&&this.router.navigate(["library",r.libraryId,"series",r.id])})}clickLibraryResult(i){this.clearSearch(),this.router.navigate(["library",i.id])}clickCollectionSearchResult(i){this.clearSearch(),this.router.navigate(["collections",i.id])}clickReadingListSearchResult(i){this.clearSearch(),this.router.navigate(["lists",i.id])}scrollToTop(){this.scrollService.scrollTo(0,this.scrollElem)}focusUpdate(i){this.searchFocused=i,this.cdRef.markForCheck()}hideSideNav(){this.navService.toggleSideNav()}};t.\u0275fac=function(r){return new(r||t)(L(pe),L(Be),L(tt),L(Ri),L(Vt),L(go),L(po),L(Q),L(xo))},t.\u0275cmp=G({type:t,selectors:[["app-nav-header"]],viewQuery:function(r,o){if(r&1&&vi(qc,5),r&2){let s;ye(s=Ce())&&(o.searchViewRef=s.first)}},standalone:!0,features:[H],decls:1,vars:1,consts:[["search",""],["libraryTemplate",""],["seriesTemplate",""],["bookmarkTemplate",""],["collectionTemplate",""],["readingListTemplate",""],["tagTemplate",""],["personTemplate",""],["genreTemplate",""],["chapterTemplate",""],["fileTemplate",""],["noResultsTemplate",""],["localizedName",""],[4,"transloco","translocoRead"],["class","navbar navbar-expand-md navbar-dark fixed-top",4,"ngIf"],[1,"navbar","navbar-expand-md","navbar-dark","fixed-top"],[1,"container-fluid"],["href","javascript:void(0);",1,"visually-hidden-focusable","focus-visible",3,"click"],["class","side-nav-toggle",3,"click",4,"ngIf"],["routerLink","/home","routerLinkActive","active",1,"navbar-brand","dark-exempt"],["width","28px","height","28px","imageUrl","assets/images/logo-32.png","classes","logo"],[1,"d-none","d-md-inline","logo"],[1,"navbar-nav","col","me-auto"],["class","nav-item",4,"ngIf"],[4,"ngIf"],[1,"side-nav-toggle",3,"click"],[1,"fas","fa-bars"],[1,"nav-item"],["for","nav-search",1,"form-label","visually-hidden"],[1,"ng-autocomplete"],["id","nav-search","initialValue","",3,"inputChanged","clearField","focusChanged","minQueryLength","placeholder","groupedData"],[2,"display","flex","padding","5px",3,"click"],[1,"ms-1"],[1,"me-1",2,"width","24px"],["width","24px",1,"me-3","search-result",3,"imageUrl"],[3,"format"],[1,"text-light","fst-italic",2,"font-size","0.8rem"],[4,"ngIf","ngIfElse"],[3,"innerHTML"],[3,"promoted"],[3,"collection"],["aria-hidden","true",1,"fa","fa-angle-double-up",3,"title"],[1,"visually-hidden"],[1,"clickable",2,"display","flex","padding","5px",3,"click"],[1,"text-light","fst-italic"],["class","back-to-top",4,"ngIf"],[1,"back-to-top"],[1,"btn","btn-icon","scroll-to-top",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-up","nav"],[3,"user"],[1,"nav-item","not-xs-only"],["routerLink","/admin/dashboard","class","dark-exempt btn btn-icon","title","Server Settings",4,"ngIf"],["ngbDropdown","","class","nav-item dropdown","display","dynamic","placement","bottom-right","dropdown","",4,"ngIf"],["routerLink","/admin/dashboard","title","Server Settings",1,"dark-exempt","btn","btn-icon"],["aria-hidden","true",1,"fa","fa-cogs","nav"],["ngbDropdown","","display","dynamic","placement","bottom-right","dropdown","",1,"nav-item","dropdown"],["ngbDropdownToggle","",1,"btn","btn-outline-secondary","primary-text"],[1,"fa-solid","fa-user-circle","align-self-center","phone-hidden","d-xs-inline-block","d-sm-inline-block","d-md-none"],[1,"d-none","d-xs-none","d-sm-none","d-md-inline-block"],["ngbDropdownMenu",""],["class","xs-only","ngbDropdownItem","","routerLink","/admin/dashboard",4,"ngIf"],["ngbDropdownItem","","routerLink","/preferences/"],["ngbDropdownItem","","routerLink","/all-filters/"],["ngbDropdownItem","","href","https://wiki.kavitareader.com","rel","noopener noreferrer","target","_blank"],["ngbDropdownItem","","routerLink","/announcements/",4,"ngIf"],["ngbDropdownItem","",3,"click"],["ngbDropdownItem","","routerLink","/admin/dashboard",1,"xs-only"],["ngbDropdownItem","","routerLink","/announcements/"]],template:function(r,o){r&1&&f(0,bm,3,3,"ng-container",13),r&2&&d("translocoRead","nav-header")},dependencies:[W,ki,wr,Ho,Di,So,Go,Ur,Br,zr,$r,Xe,Uo,Ai,K,ko,Co],styles:[`.btn[_ngcontent-%COMP%]:focus, .btn[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 .1rem var(--navbar-btn-hover-outline-color)}.navbar[_ngcontent-%COMP%]{background-color:var(--navbar-bg-color)}.navbar[_ngcontent-%COMP%]   .side-nav-toggle[_ngcontent-%COMP%]{cursor:pointer;margin-left:13px;font-size:1.2rem}.navbar[_ngcontent-%COMP%]   .side-nav-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--navbar-fa-icon-color)}@media only screen and (max-width: 650px){.navbar-nav[_ngcontent-%COMP%]{width:0}}.xs-only[_ngcontent-%COMP%]{display:none}.not-xs-only[_ngcontent-%COMP%]{display:inherit}@media only screen and (max-width: 300px){.xs-only[_ngcontent-%COMP%]{display:inherit}.not-xs-only[_ngcontent-%COMP%]{display:none}}.nav-item.dropdown[_ngcontent-%COMP%]{position:unset}.navbar-brand[_ngcontent-%COMP%]{font-family:var(--brand-font-family);font-weight:700;margin:0 1rem}.navbar-brand[_ngcontent-%COMP%]:hover{text-decoration:none}.navbar-brand[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-height:28px;vertical-align:text-top}.navbar-brand[_ngcontent-%COMP%]   .phone-hidden[_ngcontent-%COMP%]{vertical-align:middle}.focus-visible[_ngcontent-%COMP%]:focus{visibility:visible;color:var(--nav-header-text-color)}.ng-autocomplete[_ngcontent-%COMP%]{margin-bottom:0}.primary-text[_ngcontent-%COMP%]{color:var(--nav-header-text-color);border:none}.search-result[_ngcontent-%COMP%]{width:24px;margin-top:5px}.scroll-to-top[_ngcontent-%COMP%]:hover{animation:MoveUpDown 1s linear infinite}.text-light[_ngcontent-%COMP%]{color:var(--search-result-text-lite-color)!important}
/*# sourceMappingURL=nav-header.component-F3BLT4NT.css.map */`],changeDetection:0});let n=t;return n})();var Em=n=>({count:n});function Tm(n,t){if(n&1){let e=w();v(0),l(1,"div",1)(2,"h4",2),_(3),p(),l(4,"button",3),b("click",function(){S(e);let r=c();return x(r.close())}),p()(),l(5,"div",4)(6,"p")(7,"strong"),_(8),p()(),l(9,"p"),_(10),p(),C(11,"p",5),M(12,"safeHtml"),l(13,"p"),_(14),p()(),l(15,"div",6)(16,"a",7),_(17,"Discord"),p(),l(18,"button",8),b("click",function(){S(e);let r=c();return x(r.close())}),_(19),p()(),y()}if(n&2){let e=t.$implicit,i=c();a(3),g(e("title")),a(),ce("aria-label",e("close")),a(4),g(e("subtitle",ne(9,Em,i.versionsOutOfDate))),a(2),g(e("description-1")),a(),d("innerHTML",P(12,7,e("description-2")),xt),a(3),g(e("description-3")),a(5),g(e("close"))}}var Ko=(()=>{let t=class t{constructor(){this.ngbModal=T(Je),this.versionsOutOfDate=0}close(){this.ngbModal.close()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=G({type:t,selectors:[["app-out-of-date-modal"]],inputs:{versionsOutOfDate:"versionsOutOfDate"},standalone:!0,features:[H],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"innerHTML"],[1,"modal-footer"],["href","https://discord.gg/b52wT37kt7","target","_blank","rel","noreferrer noopener",1,"btn","btn-link","me-1"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(r,o){r&1&&f(0,Tm,20,11,"ng-container",0),r&2&&d("translocoRead","out-of-date-modal")},dependencies:[$t,K,Dr],styles:["/*# sourceMappingURL=out-of-date-modal.component-5TA3T7CO.css.map */"]});let n=t;return n})();var wm=n=>({"no-transitions":n}),km=(n,t)=>({closed:n,"content-wrapper":t}),Im=n=>({"g-0":n}),Mm=n=>({"companion-bar-content":n});function Nm(n,t){n&1&&C(0,"app-side-nav")}function Om(n,t){if(n&1&&(l(0,"div",6)(1,"div",7),M(2,"async"),C(3,"router-outlet"),p()()),n&2){let e=c();a(),d("ngClass",ne(3,Mm,P(2,1,e.navService.sideNavCollapsed$)===!1))}}function Pm(n,t){n&1&&C(0,"router-outlet")}var qo=(()=>{let t=class t{constructor(i,r,o,s,m,u,h,k){this.accountService=i,this.libraryService=r,this.router=o,this.ngbModal=s,this.document=u,this.themeService=h,this.modalConfig=k,this.destroyRef=T(ge),this.offcanvas=T(Zr),this.navService=T(tt),this.cdRef=T(Q),this.serverService=T(Io),k.fullscreen="md",m.max=5,m.resettable=!0,o.events.pipe(fe(E=>E instanceof Er),ee(this.destroyRef)).subscribe(E=>ot(this,null,function*(){if(!(!this.ngbModal.hasOpenModals()&&!this.offcanvas.hasOpenOffcanvas())&&(this.ngbModal.hasOpenModals()&&this.ngbModal.dismissAll(),this.offcanvas.hasOpenOffcanvas()&&this.offcanvas.dismiss(),E.navigationTrigger==="popstate")){let V=this.router.routerState;yield this.router.navigateByUrl(V.snapshot.url,{skipLocationChange:!0})}})),this.transitionState$=this.accountService.currentUser$.pipe(ae(E=>{}),_e(E=>E?E.preferences.noTransitions:!1),ee(this.destroyRef))}setDocHeight(){let i=window.innerHeight*.01;this.document.documentElement.style.setProperty("--vh",`${i}px`)}ngOnInit(){this.setDocHeight(),this.setCurrentUser()}setCurrentUser(){let i=this.accountService.getUserFromLocalStorage();this.accountService.setCurrentUser(i),i&&(this.themeService.getThemes().subscribe(),this.libraryService.getLibraryNames().pipe(at(1),mi({refCount:!0,bufferSize:1})).subscribe(),this.accountService.hasValidLicense().subscribe(),rr(2*60*60*1e3).pipe(ke(()=>this.accountService.currentUser$),fe(r=>r!==void 0&&this.accountService.hasAdminRole(r)),ke(r=>this.serverService.checkHowOutOfDate()),fe(r=>!isNaN(r)&&r>2),ae(r=>{if(!this.ngbModal.hasOpenModals()){let o=this.ngbModal.open(Ko,{size:"xl",fullscreen:"md"});o.componentInstance.versionsOutOfDate=3}})).subscribe())}};t.\u0275fac=function(r){return new(r||t)(L(pe),L(ao),L(Be),L(zt),L(Yr),L(Vt),L(to),L(Gr))},t.\u0275cmp=G({type:t,selectors:[["app-root"]],hostBindings:function(r,o){r&1&&b("resize",function(m){return o.setDocHeight(m)},!1,Ft)("orientationchange",function(m){return o.setDocHeight(m)},!1,Ft)},standalone:!0,features:[H],decls:15,vars:25,consts:[["noSideNav",""],[3,"ngClass"],["id","content"],[4,"ngIf"],[1,"container-fluid",3,"ngClass"],["style","padding: 20px 0 0;",4,"ngIf","ngIfElse"],[2,"padding","20px 0 0"],[1,"companion-bar",3,"ngClass"]],template:function(r,o){if(r&1&&(l(0,"div",1),M(1,"async"),C(2,"app-nav-header"),l(3,"div",1),M(4,"async"),M(5,"async"),C(6,"a",2),f(7,Nm,1,0,"app-side-nav",3),M(8,"async"),l(9,"div",4),M(10,"async"),f(11,Om,4,5,"div",5),M(12,"async"),f(13,Pm,1,0,"ng-template",null,0,$),p()()()),r&2){let s=q(14);d("ngClass",ne(18,wm,P(1,6,o.transitionState$))),a(3),d("ngClass",J(20,km,P(4,8,o.navService.sideNavCollapsed$),P(5,10,o.navService.sideNavVisibility$))),a(4),d("ngIf",P(8,12,o.navService.sideNavVisibility$)),a(2),d("ngClass",ne(23,Im,P(10,14,o.navService.sideNavVisibility$)===!1)),a(2),d("ngIf",P(12,16,o.navService.sideNavVisibility$))("ngIfElse",s)}},dependencies:[Ie,W,Bo,Tr,Xe,jo],styles:[`.content-wrapper[_ngcontent-%COMP%]{padding:0 10px;height:100%}.companion-bar[_ngcontent-%COMP%]{transition:all var(--side-nav-companion-bar-transistion);margin-left:40px}.companion-bar-content[_ngcontent-%COMP%]{margin-left:190px;width:auto}@media (max-width: 576px){.container-fluid[_ngcontent-%COMP%]{padding:0}.content-wrapper[_ngcontent-%COMP%]{padding:0 5px;overflow:hidden;height:calc(100vh - 56px)}.content-wrapper.closed[_ngcontent-%COMP%]{overflow:auto}.companion-bar[_ngcontent-%COMP%]{margin-left:0;padding-left:0}.companion-bar-content[_ngcontent-%COMP%]{margin-left:0;width:auto}}
/*# sourceMappingURL=app.component-6KOUCKJS.css.map */`]});let n=t;return n})();function Qo(n){return new U(3e3,!1)}function Fm(){return new U(3100,!1)}function Rm(){return new U(3101,!1)}function Dm(n){return new U(3001,!1)}function Am(n){return new U(3003,!1)}function Vm(n){return new U(3004,!1)}function Lm(n,t){return new U(3005,!1)}function $m(){return new U(3006,!1)}function zm(){return new U(3007,!1)}function Bm(n,t){return new U(3008,!1)}function Um(n){return new U(3002,!1)}function Gm(n,t,e,i,r){return new U(3010,!1)}function Hm(){return new U(3011,!1)}function jm(){return new U(3012,!1)}function Km(){return new U(3200,!1)}function qm(){return new U(3202,!1)}function Qm(){return new U(3013,!1)}function Wm(n){return new U(3014,!1)}function Ym(n){return new U(3015,!1)}function Zm(n){return new U(3016,!1)}function Xm(n,t){return new U(3404,!1)}function Jm(n){return new U(3502,!1)}function ep(n){return new U(3503,!1)}function tp(){return new U(3300,!1)}function ip(n){return new U(3504,!1)}function np(n){return new U(3301,!1)}function rp(n,t){return new U(3302,!1)}function op(n){return new U(3303,!1)}function ap(n,t){return new U(3400,!1)}function sp(n){return new U(3401,!1)}function lp(n){return new U(3402,!1)}function cp(n,t){return new U(3505,!1)}function ht(n){switch(n.length){case 0:return new Bt;case 1:return n[0];default:return new un(n)}}function la(n,t,e=new Map,i=new Map){let r=[],o=[],s=-1,m=null;if(t.forEach(u=>{let h=u.get("offset"),k=h==s,E=k&&m||new Map;u.forEach((V,A)=>{let N=A,R=V;if(A!=="offset")switch(N=n.normalizePropertyName(N,r),R){case Fi:R=e.get(A);break;case et:R=i.get(A);break;default:R=n.normalizeStyleValue(A,N,R,r);break}E.set(N,R)}),k||o.push(E),m=E,s=h}),r.length)throw Jm(r);return o}function Un(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&Cn(e,"start",n)));break;case"done":n.onDone(()=>i(e&&Cn(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&Cn(e,"destroy",n)));break}}function Cn(n,t,e){let i=e.totalTime,r=!!e.disabled,o=Gn(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function Gn(n,t,e,i,r="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Ve(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function Wo(n){let t=n.indexOf(":"),e=n.substring(1,t),i=n.slice(t+1);return[e,i]}var mp=typeof document>"u"?null:document.documentElement;function Hn(n){let t=n.parentNode||n.host||null;return t===mp?null:t}function pp(n){return n.substring(1,6)=="ebkit"}var Et=null,Yo=!1;function dp(n){Et||(Et=up()||{},Yo=Et.style?"WebkitAppearance"in Et.style:!1);let t=!0;return Et.style&&!pp(n)&&(t=n in Et.style,!t&&Yo&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Et.style)),t}function up(){return typeof document<"u"?document.body:null}function ca(n,t){for(;t;){if(t===n)return!0;t=Hn(t)}return!1}function ma(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let i=n.querySelector(t);return i?[i]:[]}var jn=(()=>{let t=class t{validateStyleProperty(i){return dp(i)}matchesElement(i,r){return!1}containsElement(i,r){return ca(i,r)}getParentElement(i){return Hn(i)}query(i,r,o){return ma(i,r,o)}computeStyle(i,r,o){return o||""}animate(i,r,o,s,m,u=[],h){return new Bt(o,s)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=he({token:t,factory:t.\u0275fac});let n=t;return n})(),Wn=class Wn{};Wn.NOOP=new jn;var kt=Wn,It=class{};var _p=1e3,pa="{{",fp="}}",da="ng-enter",wn="ng-leave",zi="ng-trigger",ji=".ng-trigger",Zo="ng-animating",kn=".ng-animating";function lt(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:In(parseFloat(t[1]),t[2])}function In(n,t){switch(t){case"s":return n*_p;default:return n}}function Ki(n,t,e){return n.hasOwnProperty("duration")?n:hp(n,t,e)}function hp(n,t,e){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let m=n.match(i);if(m===null)return t.push(Qo(n)),{duration:0,delay:0,easing:""};r=In(parseFloat(m[1]),m[2]);let u=m[3];u!=null&&(o=In(parseFloat(u),m[4]));let h=m[5];h&&(s=h)}else r=n;if(!e){let m=!1,u=t.length;r<0&&(t.push(Fm()),m=!0),o<0&&(t.push(Rm()),m=!0),m&&t.splice(u,0,Qo(n))}return{duration:r,delay:o,easing:s}}function gp(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function rt(n,t,e){t.forEach((i,r)=>{let o=Kn(r);e&&!e.has(r)&&e.set(r,n.style[o]),n.style[o]=i})}function wt(n,t){t.forEach((e,i)=>{let r=Kn(i);n.style[r]=""})}function ti(n){return Array.isArray(n)?n.length==1?n[0]:Jr(n):n}function vp(n,t,e){let i=t.params||{},r=ua(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(Dm(o))})}var Mn=new RegExp(`${pa}\\s*(.+?)\\s*${fp}`,"g");function ua(n){let t=[];if(typeof n=="string"){let e;for(;e=Mn.exec(n);)t.push(e[1]);Mn.lastIndex=0}return t}function ni(n,t,e){let i=`${n}`,r=i.replace(Mn,(o,s)=>{let m=t[s];return m==null&&(e.push(Am(s)),m=""),m.toString()});return r==i?n:r}var yp=/-+([a-z0-9])/g;function Kn(n){return n.replace(yp,(...t)=>t[1].toUpperCase())}function Cp(n,t){return n===0||t===0}function Sp(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<t.length;o++){let s=t[o];r.forEach(m=>s.set(m,qn(n,m)))}}return t}function Ae(n,t,e){switch(t.type){case z.Trigger:return n.visitTrigger(t,e);case z.State:return n.visitState(t,e);case z.Transition:return n.visitTransition(t,e);case z.Sequence:return n.visitSequence(t,e);case z.Group:return n.visitGroup(t,e);case z.Animate:return n.visitAnimate(t,e);case z.Keyframes:return n.visitKeyframes(t,e);case z.Style:return n.visitStyle(t,e);case z.Reference:return n.visitReference(t,e);case z.AnimateChild:return n.visitAnimateChild(t,e);case z.AnimateRef:return n.visitAnimateRef(t,e);case z.Query:return n.visitQuery(t,e);case z.Stagger:return n.visitStagger(t,e);default:throw Vm(t.type)}}function qn(n,t){return window.getComputedStyle(n)[t]}var xp=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),qi=class extends It{normalizePropertyName(t,e){return Kn(t)}normalizeStyleValue(t,e,i,r){let o="",s=i.toString().trim();if(xp.has(e)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let m=i.match(/^[+-]?[\d\.]+([a-z]*)$/);m&&m[1].length==0&&r.push(Lm(t,i))}return s+o}};var Qi="*";function bp(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>Ep(i,e,t)):e.push(n),e}function Ep(n,t,e){if(n[0]==":"){let u=Tp(n,e);if(typeof u=="function"){t.push(u);return}n=u}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(Ym(n)),t;let r=i[1],o=i[2],s=i[3];t.push(Xo(r,s));let m=r==Qi&&s==Qi;o[0]=="<"&&!m&&t.push(Xo(s,r))}function Tp(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(Zm(n)),"* => *"}}var Bi=new Set(["true","1"]),Ui=new Set(["false","0"]);function Xo(n,t){let e=Bi.has(n)||Ui.has(n),i=Bi.has(t)||Ui.has(t);return(r,o)=>{let s=n==Qi||n==r,m=t==Qi||t==o;return!s&&e&&typeof r=="boolean"&&(s=r?Bi.has(n):Ui.has(n)),!m&&i&&typeof o=="boolean"&&(m=o?Bi.has(t):Ui.has(t)),s&&m}}var _a=":self",wp=new RegExp(`s*${_a}s*,?`,"g");function fa(n,t,e,i){return new Nn(n).build(t,e,i)}var Jo="",Nn=class{constructor(t){this._driver=t}build(t,e,i){let r=new On(e);return this._resetContextStyleTimingState(r),Ae(this,ti(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector=Jo,t.collectedStyles=new Map,t.collectedStyles.set(Jo,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0,o=[],s=[];return t.name.charAt(0)=="@"&&e.errors.push($m()),t.definitions.forEach(m=>{if(this._resetContextStyleTimingState(e),m.type==z.State){let u=m,h=u.name;h.toString().split(/\s*,\s*/).forEach(k=>{u.name=k,o.push(this.visitState(u,e))}),u.name=h}else if(m.type==z.Transition){let u=this.visitTransition(m,e);i+=u.queryCount,r+=u.depCount,s.push(u)}else e.errors.push(zm())}),{type:z.Trigger,name:t.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(m=>{m instanceof Map&&m.forEach(u=>{ua(u).forEach(h=>{s.hasOwnProperty(h)||o.add(h)})})}),o.size&&e.errors.push(Bm(t.name,[...o.values()]))}return{type:z.State,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=Ae(this,ti(t.animation),e),r=bp(t.expr,e.errors);return{type:z.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Tt(t.options)}}visitSequence(t,e){return{type:z.Sequence,steps:t.steps.map(i=>Ae(this,i,e)),options:Tt(t.options)}}visitGroup(t,e){let i=e.currentTime,r=0,o=t.steps.map(s=>{e.currentTime=i;let m=Ae(this,s,e);return r=Math.max(r,e.currentTime),m});return e.currentTime=r,{type:z.Group,steps:o,options:Tt(t.options)}}visitAnimate(t,e){let i=Np(t.timings,e.errors);e.currentAnimateTimings=i;let r,o=t.styles?t.styles:dn({});if(o.type==z.Keyframes)r=this.visitKeyframes(o,e);else{let s=t.styles,m=!1;if(!s){m=!0;let h={};i.easing&&(h.easing=i.easing),s=dn(h)}e.currentTime+=i.duration+i.delay;let u=this.visitStyle(s,e);u.isEmptyStep=m,r=u}return e.currentAnimateTimings=null,{type:z.Animate,timings:i,style:r,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let m of r)typeof m=="string"?m===et?i.push(m):e.errors.push(Um(m)):i.push(new Map(Object.entries(m)));let o=!1,s=null;return i.forEach(m=>{if(m instanceof Map&&(m.has("easing")&&(s=m.get("easing"),m.delete("easing")),!o)){for(let u of m.values())if(u.toString().indexOf(pa)>=0){o=!0;break}}}),{type:z.Style,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{typeof s!="string"&&s.forEach((m,u)=>{let h=e.collectedStyles.get(e.currentQuerySelector),k=h.get(u),E=!0;k&&(o!=r&&o>=k.startTime&&r<=k.endTime&&(e.errors.push(Gm(u,k.startTime,k.endTime,o,r)),E=!1),o=k.startTime),E&&h.set(u,{startTime:o,endTime:r}),e.options&&vp(m,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:z.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(Hm()),i;let r=1,o=0,s=[],m=!1,u=!1,h=0,k=t.steps.map(ie=>{let re=this._makeStyleAst(ie,e),be=re.offset!=null?re.offset:Mp(re.styles),le=0;return be!=null&&(o++,le=re.offset=be),u=u||le<0||le>1,m=m||le<h,h=le,s.push(le),re});u&&e.errors.push(jm()),m&&e.errors.push(Km());let E=t.steps.length,V=0;o>0&&o<E?e.errors.push(qm()):o==0&&(V=r/(E-1));let A=E-1,N=e.currentTime,R=e.currentAnimateTimings,Z=R.duration;return k.forEach((ie,re)=>{let be=V>0?re==A?1:V*re:s[re],le=be*Z;e.currentTime=N+R.delay+le,R.duration=le,this._validateStyleAst(ie,e),ie.offset=be,i.styles.push(ie)}),i}visitReference(t,e){return{type:z.Reference,animation:Ae(this,ti(t.animation),e),options:Tt(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:z.AnimateChild,options:Tt(t.options)}}visitAnimateRef(t,e){return{type:z.AnimateRef,animation:this.visitReference(t.animation,e),options:Tt(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;let[o,s]=kp(t.selector);e.currentQuerySelector=i.length?i+" "+o:o,Ve(e.collectedStyles,e.currentQuerySelector,new Map);let m=Ae(this,ti(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:z.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:m,originalSelector:t.selector,options:Tt(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(Qm());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:Ki(t.timings,e.errors,!0);return{type:z.Stagger,animation:Ae(this,ti(t.animation),e),timings:i,options:null}}};function kp(n){let t=!!n.split(/\s*,\s*/).find(e=>e==_a);return t&&(n=n.replace(wp,"")),n=n.replace(/@\*/g,ji).replace(/@\w+/g,e=>ji+"-"+e.slice(1)).replace(/:animating/g,kn),[n,t]}function Ip(n){return n?ue({},n):null}var On=class{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function Mp(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function Np(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Ki(n,t).duration;return Sn(o,0,"")}let e=n;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=Sn(0,0,"");return o.dynamic=!0,o.strValue=e,o}let r=Ki(e,t);return Sn(r.duration,r.delay,r.easing)}function Tt(n){return n?(n=ue({},n),n.params&&(n.params=Ip(n.params))):n={},n}function Sn(n,t,e){return{duration:n,delay:t,easing:e}}function Qn(n,t,e,i,r,o,s=null,m=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:m}}var ri=class{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},Op=1,Pp=":enter",Fp=new RegExp(Pp,"g"),Rp=":leave",Dp=new RegExp(Rp,"g");function ha(n,t,e,i,r,o=new Map,s=new Map,m,u,h=[]){return new Pn().buildKeyframes(n,t,e,i,r,o,s,m,u,h)}var Pn=class{buildKeyframes(t,e,i,r,o,s,m,u,h,k=[]){h=h||new ri;let E=new Fn(t,e,h,r,o,k,[]);E.options=u;let V=u.delay?lt(u.delay):0;E.currentTimeline.delayNextStep(V),E.currentTimeline.setStyles([s],null,E.errors,u),Ae(this,i,E);let A=E.timelines.filter(N=>N.containsAnimation());if(A.length&&m.size){let N;for(let R=A.length-1;R>=0;R--){let Z=A[R];if(Z.element===e){N=Z;break}}N&&!N.allowOnlyTimelineStyles()&&N.setStyles([m],null,E.errors,u)}return A.length?A.map(N=>N.buildKeyframes()):[Qn(e,[],[],[],0,V,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let r of t){let o=r?.delay;if(o){let s=typeof o=="number"?o:lt(ni(o,r?.params??{},e.errors));i.delayNextStep(s)}}}_visitSubInstructions(t,e,i){let o=e.currentTimeline.currentTime,s=i.duration!=null?lt(i.duration):null,m=i.delay!=null?lt(i.delay):null;return s!==0&&t.forEach(u=>{let h=e.appendInstructionToTimeline(u,s,m);o=Math.max(o,h.duration+h.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),Ae(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,r=e,o=t.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==z.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Wi);let s=lt(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>Ae(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],r=e.currentTimeline.currentTime,o=t.options&&t.options.delay?lt(t.options.delay):0;t.steps.forEach(s=>{let m=e.createSubContext(t.options);o&&m.delayNextStep(o),Ae(this,s,m),r=Math.max(r,m.currentTimeline.currentTime),i.push(m.currentTimeline)}),i.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,r=e.params?ni(i,e.params,e.errors):i;return Ki(r,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let o=t.style;o.type==z.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,m=e.createSubContext().currentTimeline;m.easing=i.easing,t.styles.forEach(u=>{let h=u.offset||0;m.forwardTime(h*o),m.setStyles(u.styles,u.easing,e.errors,e.options),m.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(m),e.transformIntoNewTimeline(r+o),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?lt(r.delay):0;o&&(e.previousNode.type===z.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Wi);let s=i,m=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=m.length;let u=null;m.forEach((h,k)=>{e.currentQueryIndex=k;let E=e.createSubContext(t.options,h);o&&E.delayNextStep(o),h===e.element&&(u=E.currentTimeline),Ae(this,t.animation,E),E.currentTimeline.applyStylesToKeyframe();let V=E.currentTimeline.currentTime;s=Math.max(s,V)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,r=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),m=s*(e.currentQueryTotal-1),u=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":u=m-u;break;case"full":u=i.currentStaggerTime;break}let k=e.currentTimeline;u&&k.delayNextStep(u);let E=k.currentTime;Ae(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-E+(r.startTime-i.currentTimeline.startTime)}},Wi={},Fn=class n{constructor(t,e,i,r,o,s,m,u){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=m,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Wi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new Yi(this._driver,e,0),m.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,r=this.options;i.duration!=null&&(r.duration=lt(i.duration)),i.delay!=null&&(r.delay=lt(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(m=>{(!e||!s.hasOwnProperty(m))&&(s[m]=ni(o[m],s,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){let r=e||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Wi,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new Rn(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,o,s){let m=[];if(r&&m.push(this.element),t.length>0){t=t.replace(Fp,"."+this._enterClassName),t=t.replace(Dp,"."+this._leaveClassName);let u=i!=1,h=this._driver.query(this.element,t,u);i!==0&&(h=i<0?h.slice(h.length+i,h.length):h.slice(0,i)),m.push(...h)}return!o&&m.length==0&&s.push(Wm(e)),m}},Yi=class n{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Op,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||et),this._currentKeyframe.set(e,et);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);let o=r&&r.params||{},s=Ap(t,this._globalTimelineStyles);for(let[m,u]of s){let h=ni(u,o,i);this._pendingStyles.set(m,h),this._localTimelineStyles.has(m)||this._backFill.set(m,this._globalTimelineStyles.get(m)??et),this._updateStyle(m,h)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((m,u)=>{let h=new Map([...this._backFill,...m]);h.forEach((k,E)=>{k===Fi?t.add(E):k===et&&e.add(E)}),i||h.set("offset",u/this.duration),r.push(h)});let o=[...t.values()],s=[...e.values()];if(i){let m=r[0],u=new Map(m);m.set("offset",0),u.set("offset",1),r=[m,u]}return Qn(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},Rn=class extends Yi{constructor(t,e,i,r,o,s,m=!1){super(t,e,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=m,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=i+e,m=e/s,u=new Map(t[0]);u.set("offset",0),o.push(u);let h=new Map(t[0]);h.set("offset",ea(m)),o.push(h);let k=t.length-1;for(let E=1;E<=k;E++){let V=new Map(t[E]),A=V.get("offset"),N=e+A*i;V.set("offset",ea(N/s)),o.push(V)}i=s,e=0,r="",t=o}return Qn(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function ea(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function Ap(n,t){let e=new Map,i;return n.forEach(r=>{if(r==="*"){i??=t.keys();for(let o of i)e.set(o,et)}else for(let[o,s]of r)e.set(o,s)}),e}function ta(n,t,e,i,r,o,s,m,u,h,k,E,V){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:s,timelines:m,queriedElements:u,preStyleProps:h,postStyleProps:k,totalTime:E,errors:V}}var xn={},Zi=class{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return Vp(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return t!==void 0&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,o,s,m,u,h,k){let E=[],V=this.ast.options&&this.ast.options.params||xn,A=m&&m.params||xn,N=this.buildStyles(i,A,E),R=u&&u.params||xn,Z=this.buildStyles(r,R,E),ie=new Set,re=new Map,be=new Map,le=r==="void",Mt={params:ga(R,V),delay:this.ast.options?.delay},Ye=k?[]:ha(t,e,this.ast.animation,o,s,N,Z,Mt,h,E),Ee=0;return Ye.forEach(we=>{Ee=Math.max(we.duration+we.delay,Ee)}),E.length?ta(e,this._triggerName,i,r,le,N,Z,[],[],re,be,Ee,E):(Ye.forEach(we=>{let gt=we.element,Nt=Ve(re,gt,new Set);we.preStyleProps.forEach(vt=>Nt.add(vt));let Zn=Ve(be,gt,new Set);we.postStyleProps.forEach(vt=>Zn.add(vt)),gt!==e&&ie.add(gt)}),ta(e,this._triggerName,i,r,le,N,Z,Ye,[...ie.values()],re,be,Ee))}};function Vp(n,t,e,i,r){return n.some(o=>o(t,e,i,r))}function ga(n,t){let e=ue({},t);return Object.entries(n).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var Dn=class{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,r=ga(t,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,m)=>{s&&(s=ni(s,r,e));let u=this.normalizer.normalizePropertyName(m,e);s=this.normalizer.normalizeStyleValue(m,u,s,e),i.set(m,s)})}),i}};function Lp(n,t,e){return new An(n,t,e)}var An=class{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new Dn(r.style,o,i))}),ia(this.states,"true","1"),ia(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new Zi(t,r,this.states))}),this.fallbackTransition=$p(t,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(s=>s.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function $p(n,t,e){let i=[(s,m)=>!0],r={type:z.Sequence,steps:[],options:null},o={type:z.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new Zi(n,o,t)}function ia(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var zp=new ri,Vn=class{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){let i=[],r=[],o=fa(this._driver,e,i,r);if(i.length)throw ep(i);r.length&&void 0,this._animations.set(t,o)}_buildPlayer(t,e,i){let r=t.element,o=la(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let r=[],o=this._animations.get(t),s,m=new Map;if(o?(s=ha(this._driver,e,o,da,wn,new Map,new Map,i,zp,r),s.forEach(k=>{let E=Ve(m,k.element,new Map);k.postStyleProps.forEach(V=>E.set(V,null))})):(r.push(tp()),s=[]),r.length)throw ip(r);m.forEach((k,E)=>{k.forEach((V,A)=>{k.set(A,this._driver.computeStyle(E,A,et))})});let u=s.map(k=>{let E=m.get(k.element);return this._buildPlayer(k,new Map,E)}),h=ht(u);return this._playersById.set(t,h),h.onDestroy(()=>this.destroy(t)),this.players.push(h),h}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw np(t);return e}listen(t,e,i,r){let o=Gn(e,"","","");return Un(this._getPlayer(t),i,o,r),()=>{}}command(t,e,i,r){if(i=="register"){this.register(t,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(t,e,s);return}let o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t);break}}},na="ng-animate-queued",Bp=".ng-animate-queued",bn="ng-animate-disabled",Up=".ng-animate-disabled",Gp="ng-star-inserted",Hp=".ng-star-inserted",jp=[],va={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Kp={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},We="__ng_removed",oi=class{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),r=i?t.value:t;if(this.value=Qp(r),i){let o=t,{value:s}=o,m=Ot(o,["value"]);this.options=m}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},ii="void",En=new oi(ii),Ln=class{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ke(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw rp(i,e);if(i==null||i.length==0)throw op(e);if(!Wp(i))throw ap(i,e);let o=Ve(this._elementListeners,t,[]),s={name:e,phase:i,callback:r};o.push(s);let m=Ve(this._engine.statesByElement,t,new Map);return m.has(e)||(Ke(t,zi),Ke(t,zi+"-"+e),m.set(e,En)),()=>{this._engine.afterFlush(()=>{let u=o.indexOf(s);u>=0&&o.splice(u,1),this._triggers.has(e)||m.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw sp(t);return e}trigger(t,e,i,r=!0){let o=this._getTrigger(e),s=new ai(this.id,e,t),m=this._engine.statesByElement.get(t);m||(Ke(t,zi),Ke(t,zi+"-"+e),this._engine.statesByElement.set(t,m=new Map));let u=m.get(e),h=new oi(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&u&&h.absorbOptions(u.options),m.set(e,h),u||(u=En),!(h.value===ii)&&u.value===h.value){if(!Xp(u.params,h.params)){let R=[],Z=o.matchStyles(u.value,u.params,R),ie=o.matchStyles(h.value,h.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{wt(t,Z),rt(t,ie)})}return}let V=Ve(this._engine.playersByElement,t,[]);V.forEach(R=>{R.namespaceId==this.id&&R.triggerName==e&&R.queued&&R.destroy()});let A=o.matchTransition(u.value,h.value,t,h.params),N=!1;if(!A){if(!r)return;A=o.fallbackTransition,N=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:A,fromState:u,toState:h,player:s,isFallbackTransition:N}),N||(Ke(t,na),s.onStart(()=>{qt(t,na)})),s.onDone(()=>{let R=this.players.indexOf(s);R>=0&&this.players.splice(R,1);let Z=this._engine.playersByElement.get(t);if(Z){let ie=Z.indexOf(s);ie>=0&&Z.splice(ie,1)}}),this.players.push(s),V.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,ji,!0);i.forEach(r=>{if(r[We])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){let o=this._engine.statesByElement.get(t),s=new Map;if(o){let m=[];if(o.forEach((u,h)=>{if(s.set(h,u.value),this._triggers.has(h)){let k=this.trigger(t,h,ii,r);k&&m.push(k)}}),m.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),i&&ht(m).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let r=new Set;e.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let u=this._triggers.get(s).fallbackTransition,h=i.get(s)||En,k=new oi(ii),E=new ai(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:u,fromState:h,toState:k,player:E,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{let o=t[We];(!o||o===va)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Ke(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(m=>{if(m.name==i.triggerName){let u=Gn(o,i.triggerName,i.fromState.value,i.toState.value);u._data=t,Un(i.player,m.phase,u,m.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},$n=class{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i,r){this.bodyNode=t,this.driver=e,this._normalizer=i,this.scheduler=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new Ln(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,m=this.driver.getParentElement(e);for(;m;){let u=r.get(m);if(u){let h=i.indexOf(u);i.splice(h+1,0,t),s=!0;break}m=this.driver.getParentElement(m)}s||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}}return e}trigger(t,e,i,r){if(Gi(e)){let o=this._fetchNamespace(t);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!Gi(e))return;let o=e[We];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){let s=this._fetchNamespace(t);s&&s.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ke(t,bn)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),qt(t,bn))}removeNode(t,e,i){if(Gi(e)){this.scheduler?.notify();let r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,o){this.collectedLeaveElements.push(e),e[We]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,i,r,o){return Gi(e)?this._fetchNamespace(t).listen(e,i,r,o):()=>{}}_buildInstruction(t,e,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,ji,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,kn,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ht(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[We];if(e&&e.setForRemoval){if(t[We]=va,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(bn)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Up,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Ke(r,Gp)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?ht(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw lp(t)}_flushAnimations(t,e){let i=new ri,r=[],o=new Map,s=[],m=new Map,u=new Map,h=new Map,k=new Set;this.disabledNodes.forEach(I=>{k.add(I);let O=this.driver.query(I,Bp,!0);for(let F=0;F<O.length;F++)k.add(O[F])});let E=this.bodyNode,V=Array.from(this.statesByElement.keys()),A=aa(V,this.collectedEnterElements),N=new Map,R=0;A.forEach((I,O)=>{let F=da+R++;N.set(O,F),I.forEach(B=>Ke(B,F))});let Z=[],ie=new Set,re=new Set;for(let I=0;I<this.collectedLeaveElements.length;I++){let O=this.collectedLeaveElements[I],F=O[We];F&&F.setForRemoval&&(Z.push(O),ie.add(O),F.hasAnimation?this.driver.query(O,Hp,!0).forEach(B=>ie.add(B)):re.add(O))}let be=new Map,le=aa(V,Array.from(ie));le.forEach((I,O)=>{let F=wn+R++;be.set(O,F),I.forEach(B=>Ke(B,F))}),t.push(()=>{A.forEach((I,O)=>{let F=N.get(O);I.forEach(B=>qt(B,F))}),le.forEach((I,O)=>{let F=be.get(O);I.forEach(B=>qt(B,F))}),Z.forEach(I=>{this.processLeaveNode(I)})});let Mt=[],Ye=[];for(let I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(e).forEach(F=>{let B=F.player,oe=F.element;if(Mt.push(B),this.collectedEnterElements.length){let de=oe[We];if(de&&de.setForMove){if(de.previousTriggersValues&&de.previousTriggersValues.has(F.triggerName)){let yt=de.previousTriggersValues.get(F.triggerName),Le=this.statesByElement.get(F.element);if(Le&&Le.has(F.triggerName)){let si=Le.get(F.triggerName);si.value=yt,Le.set(F.triggerName,si)}}B.destroy();return}}let Ze=!E||!this.driver.containsElement(E,oe),Fe=be.get(oe),ct=N.get(oe),X=this._buildInstruction(F,i,ct,Fe,Ze);if(X.errors&&X.errors.length){Ye.push(X);return}if(Ze){B.onStart(()=>wt(oe,X.fromStyles)),B.onDestroy(()=>rt(oe,X.toStyles)),r.push(B);return}if(F.isFallbackTransition){B.onStart(()=>wt(oe,X.fromStyles)),B.onDestroy(()=>rt(oe,X.toStyles)),r.push(B);return}let er=[];X.timelines.forEach(de=>{de.stretchStartingKeyframe=!0,this.disabledNodes.has(de.element)||er.push(de)}),X.timelines=er,i.append(oe,X.timelines);let Va={instruction:X,player:B,element:oe};s.push(Va),X.queriedElements.forEach(de=>Ve(m,de,[]).push(B)),X.preStyleProps.forEach((de,yt)=>{if(de.size){let Le=u.get(yt);Le||u.set(yt,Le=new Set),de.forEach((si,rn)=>Le.add(rn))}}),X.postStyleProps.forEach((de,yt)=>{let Le=h.get(yt);Le||h.set(yt,Le=new Set),de.forEach((si,rn)=>Le.add(rn))})});if(Ye.length){let I=[];Ye.forEach(O=>{I.push(cp(O.triggerName,O.errors))}),Mt.forEach(O=>O.destroy()),this.reportError(I)}let Ee=new Map,we=new Map;s.forEach(I=>{let O=I.element;i.has(O)&&(we.set(O,O),this._beforeAnimationBuild(I.player.namespaceId,I.instruction,Ee))}),r.forEach(I=>{let O=I.element;this._getPreviousPlayers(O,!1,I.namespaceId,I.triggerName,null).forEach(B=>{Ve(Ee,O,[]).push(B),B.destroy()})});let gt=Z.filter(I=>sa(I,u,h)),Nt=new Map;oa(Nt,this.driver,re,h,et).forEach(I=>{sa(I,u,h)&&gt.push(I)});let vt=new Map;A.forEach((I,O)=>{oa(vt,this.driver,new Set(I),u,Fi)}),gt.forEach(I=>{let O=Nt.get(I),F=vt.get(I);Nt.set(I,new Map([...O?.entries()??[],...F?.entries()??[]]))});let nn=[],Xn=[],Jn={};s.forEach(I=>{let{element:O,player:F,instruction:B}=I;if(i.has(O)){if(k.has(O)){F.onDestroy(()=>rt(O,B.toStyles)),F.disabled=!0,F.overrideTotalTime(B.totalTime),r.push(F);return}let oe=Jn;if(we.size>1){let Fe=O,ct=[];for(;Fe=Fe.parentNode;){let X=we.get(Fe);if(X){oe=X;break}ct.push(Fe)}ct.forEach(X=>we.set(X,oe))}let Ze=this._buildAnimation(F.namespaceId,B,Ee,o,vt,Nt);if(F.setRealPlayer(Ze),oe===Jn)nn.push(F);else{let Fe=this.playersByElement.get(oe);Fe&&Fe.length&&(F.parentPlayer=ht(Fe)),r.push(F)}}else wt(O,B.fromStyles),F.onDestroy(()=>rt(O,B.toStyles)),Xn.push(F),k.has(O)&&r.push(F)}),Xn.forEach(I=>{let O=o.get(I.element);if(O&&O.length){let F=ht(O);I.setRealPlayer(F)}}),r.forEach(I=>{I.parentPlayer?I.syncPlayerEvents(I.parentPlayer):I.destroy()});for(let I=0;I<Z.length;I++){let O=Z[I],F=O[We];if(qt(O,wn),F&&F.hasAnimation)continue;let B=[];if(m.size){let Ze=m.get(O);Ze&&Ze.length&&B.push(...Ze);let Fe=this.driver.query(O,kn,!0);for(let ct=0;ct<Fe.length;ct++){let X=m.get(Fe[ct]);X&&X.length&&B.push(...X)}}let oe=B.filter(Ze=>!Ze.destroyed);oe.length?Yp(this,O,oe):this.processLeaveNode(O)}return Z.length=0,nn.forEach(I=>{this.players.push(I),I.onDone(()=>{I.destroy();let O=this.players.indexOf(I);this.players.splice(O,1)}),I.play()}),nn}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,o){let s=[];if(e){let m=this.playersByQueriedElement.get(t);m&&(s=m)}else{let m=this.playersByElement.get(t);if(m){let u=!o||o==ii;m.forEach(h=>{h.queued||!u&&h.triggerName!=r||s.push(h)})}}return(i||r)&&(s=s.filter(m=>!(i&&i!=m.namespaceId||r&&r!=m.triggerName))),s}_beforeAnimationBuild(t,e,i){let r=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:t,m=e.isRemovalTransition?void 0:r;for(let u of e.timelines){let h=u.element,k=h!==o,E=Ve(i,h,[]);this._getPreviousPlayers(h,k,s,m,e.toState).forEach(A=>{let N=A.getRealPlayer();N.beforeDestroy&&N.beforeDestroy(),A.destroy(),E.push(A)})}wt(o,e.fromStyles)}_buildAnimation(t,e,i,r,o,s){let m=e.triggerName,u=e.element,h=[],k=new Set,E=new Set,V=e.timelines.map(N=>{let R=N.element;k.add(R);let Z=R[We];if(Z&&Z.removedBeforeQueried)return new Bt(N.duration,N.delay);let ie=R!==u,re=Zp((i.get(R)||jp).map(Ee=>Ee.getRealPlayer())).filter(Ee=>{let we=Ee;return we.element?we.element===R:!1}),be=o.get(R),le=s.get(R),Mt=la(this._normalizer,N.keyframes,be,le),Ye=this._buildPlayer(N,Mt,re);if(N.subTimeline&&r&&E.add(R),ie){let Ee=new ai(t,m,R);Ee.setRealPlayer(Ye),h.push(Ee)}return Ye});h.forEach(N=>{Ve(this.playersByQueriedElement,N.element,[]).push(N),N.onDone(()=>qp(this.playersByQueriedElement,N.element,N))}),k.forEach(N=>Ke(N,Zo));let A=ht(V);return A.onDestroy(()=>{k.forEach(N=>qt(N,Zo)),rt(u,e.toStyles)}),E.forEach(N=>{Ve(r,N,[]).push(A)}),A}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Bt(t.duration,t.delay)}},ai=class{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Bt,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>Un(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ve(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function qp(n,t,e){let i=n.get(t);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&n.delete(t)}return i}function Qp(n){return n??null}function Gi(n){return n&&n.nodeType===1}function Wp(n){return n=="start"||n=="done"}function ra(n,t){let e=n.style.display;return n.style.display=t??"none",e}function oa(n,t,e,i,r){let o=[];e.forEach(u=>o.push(ra(u)));let s=[];i.forEach((u,h)=>{let k=new Map;u.forEach(E=>{let V=t.computeStyle(h,E,r);k.set(E,V),(!V||V.length==0)&&(h[We]=Kp,s.push(h))}),n.set(h,k)});let m=0;return e.forEach(u=>ra(u,o[m++])),s}function aa(n,t){let e=new Map;if(n.forEach(m=>e.set(m,[])),t.length==0)return e;let i=1,r=new Set(t),o=new Map;function s(m){if(!m)return i;let u=o.get(m);if(u)return u;let h=m.parentNode;return e.has(h)?u=h:r.has(h)?u=i:u=s(h),o.set(m,u),u}return t.forEach(m=>{let u=s(m);u!==i&&e.get(u).push(m)}),e}function Ke(n,t){n.classList?.add(t)}function qt(n,t){n.classList?.remove(t)}function Yp(n,t,e){ht(e).onDone(()=>n.processLeaveNode(t))}function Zp(n){let t=[];return ya(n,t),t}function ya(n,t){for(let e=0;e<n.length;e++){let i=n[e];i instanceof un?ya(i.players,t):t.push(i)}}function Xp(n,t){let e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let o=e[r];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}function sa(n,t,e){let i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(o=>r.add(o)):t.set(n,i),e.delete(n),!0}var Wt=class{constructor(t,e,i,r){this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new $n(t.body,e,i,r),this._timelineEngine=new Vn(t.body,e,i),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(t,e,i,r,o){let s=t+"-"+r,m=this._triggerCache[s];if(!m){let u=[],h=[],k=fa(this._driver,o,u,h);if(u.length)throw Xm(r,u);h.length&&void 0,m=Lp(r,k,this._normalizer),this._triggerCache[s]=m}this._transitionEngine.registerTrigger(e,r,m)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if(i.charAt(0)=="@"){let[o,s]=Wo(i),m=r;this._timelineEngine.command(o,e,s,m)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,o){if(i.charAt(0)=="@"){let[s,m]=Wo(i);return this._timelineEngine.listen(s,e,m,o)}return this._transitionEngine.listen(t,e,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function Jp(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=Tn(t[0]),t.length>1&&(i=Tn(t[t.length-1]))):t instanceof Map&&(e=Tn(t)),e||i?new zn(n,e,i):null}var Qt=class Qt{constructor(t,e,i){this._element=t,this._startStyles=e,this._endStyles=i,this._state=0;let r=Qt.initialStylesByElement.get(t);r||Qt.initialStylesByElement.set(t,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&rt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(rt(this._element,this._initialStyles),this._endStyles&&(rt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Qt.initialStylesByElement.delete(this._element),this._startStyles&&(wt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wt(this._element,this._endStyles),this._endStyles=null),rt(this._element,this._initialStyles),this._state=3)}};Qt.initialStylesByElement=new WeakMap;var zn=Qt;function Tn(n){let t=null;return n.forEach((e,i)=>{ed(i)&&(t=t||new Map,t.set(i,e))}),t}function ed(n){return n==="display"||n==="position"}var Xi=class{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&t.set(r,this._finished?i:qn(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Ji=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return ca(t,e)}getParentElement(t){return Hn(t)}query(t,e,i){return ma(t,e,i)}computeStyle(t,e,i){return qn(t,e)}animate(t,e,i,r,o,s=[]){let m=r==0?"both":"forwards",u={duration:i,delay:r,fill:m};o&&(u.easing=o);let h=new Map,k=s.filter(A=>A instanceof Xi);Cp(i,r)&&k.forEach(A=>{A.currentSnapshot.forEach((N,R)=>h.set(R,N))});let E=gp(e).map(A=>new Map(A));E=Sp(t,E,h);let V=Jp(t,E);return new Xi(t,E,u,V)}};var Hi="@",Ca="@.disabled",en=class{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==Hi&&e==Ca?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},Bn=class extends en{constructor(t,e,i,r,o){super(e,i,r,o),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==Hi?e.charAt(1)=="."&&e==Ca?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if(e.charAt(0)==Hi){let r=td(t),o=e.slice(1),s="";return o.charAt(0)!=Hi&&([o,s]=id(o)),this.engine.listen(this.namespaceId,r,o,s,m=>{let u=m._data||-1;this.factory.scheduleListenerCallback(u,i,m)})}return this.delegate.listen(t,e,i)}};function td(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function id(n){let t=n.indexOf("."),e=n.substring(0,t),i=n.slice(t+1);return[e,i]}var tn=class{constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(r,o)=>{let s=o?.parentNode(r);s&&o.removeChild(s,r)}}createRenderer(t,e){let i="",r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let h=this._rendererCache,k=h.get(r);if(!k){let E=()=>h.delete(r);k=new en(i,r,this.engine,E),h.set(r,k)}return k}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);let m=h=>{Array.isArray(h)?h.forEach(m):this.engine.registerTrigger(o,s,t,h.name,h)};return e.data.animation.forEach(m),new Bn(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,m]=o;s(m)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var rd=(()=>{let t=class t extends Wt{constructor(i,r,o){super(i,r,o,T(cr,{optional:!0}))}ngOnDestroy(){this.flush()}};t.\u0275fac=function(r){return new(r||t)(Te(Vt),Te(kt),Te(It))},t.\u0275prov=he({token:t,factory:t.\u0275fac});let n=t;return n})();function od(){return new qi}function ad(n,t,e){return new tn(n,t,e)}var xa=[{provide:It,useFactory:od},{provide:Wt,useClass:rd},{provide:mr,useFactory:ad,deps:[Sr,Wt,pr]}],Sa=[{provide:kt,useFactory:()=>new Ji},{provide:ln,useValue:"BrowserAnimations"},...xa],sd=[{provide:kt,useClass:jn},{provide:ln,useValue:"NoopAnimations"},...xa],ba=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:i.disableAnimations?sd:Sa}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=di({type:t}),t.\u0275inj=pi({providers:Sa,imports:[wi]});let n=t;return n})();var ld=[{path:"",canActivate:[_n],runGuardsAndResolvers:"always",children:[{path:"admin",canActivate:[fn],loadChildren:()=>import("./chunk-OMT2OGRR.js").then(n=>n.routes)},{path:"preferences",loadChildren:()=>import("./chunk-N4WN7KHO.js").then(n=>n.routes)},{path:"collections",loadChildren:()=>import("./chunk-KSGHIAYS.js").then(n=>n.routes)},{path:"lists",loadChildren:()=>import("./chunk-GREZGXOD.js").then(n=>n.routes)},{path:"announcements",canActivate:[fn],loadChildren:()=>import("./chunk-QLG2M2JD.js").then(n=>n.routes)},{path:"bookmarks",loadChildren:()=>import("./chunk-5D3NDSFD.js").then(n=>n.routes)},{path:"all-series",loadChildren:()=>import("./chunk-OYN3AID3.js").then(n=>n.routes)},{path:"all-filters",loadChildren:()=>import("./chunk-N5KYQ6HC.js").then(n=>n.routes)},{path:"want-to-read",loadChildren:()=>import("./chunk-WJJRKHHC.js").then(n=>n.routes)},{path:"home",loadChildren:()=>import("./chunk-6UQRQD2S.js").then(n=>n.routes)},{path:"library",runGuardsAndResolvers:"always",canActivate:[_n,Mo],children:[{path:":libraryId",pathMatch:"full",loadChildren:()=>import("./chunk-OTUH3ALY.js").then(n=>n.routes)},{path:":libraryId/series/:seriesId",pathMatch:"full",loadComponent:()=>import("./chunk-7TUZOV5N.js").then(n=>n.SeriesDetailComponent)},{path:":libraryId/series/:seriesId/manga",loadChildren:()=>import("./chunk-HCNMYPLD.js").then(n=>n.routes)},{path:":libraryId/series/:seriesId/book",loadChildren:()=>import("./chunk-FNXOSSP4.js").then(n=>n.routes)},{path:":libraryId/series/:seriesId/pdf",loadChildren:()=>import("./chunk-GHDYTRII.js").then(n=>n.routes)}]},{path:"",pathMatch:"full",redirectTo:"home"}]},{path:"registration",loadChildren:()=>import("./chunk-OGXOVN5X.js").then(n=>n.routes)},{path:"login",loadChildren:()=>import("./chunk-OGXOVN5X.js").then(n=>n.routes)},{path:"libraries",pathMatch:"full",redirectTo:"home"},{path:"**",pathMatch:"prefix",redirectTo:"home"},{path:"**",pathMatch:"full",redirectTo:"home"},{path:"",pathMatch:"full",redirectTo:"home"}],Ea=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=di({type:t}),t.\u0275inj=pi({imports:[pn.forRoot(ld,{scrollPositionRestoration:"enabled",preloadingStrategy:kr}),pn]});let n=t;return n})();var Ta=(()=>{let t=class t{constructor(i){this.accountService=i}intercept(i,r){return this.accountService.currentUser$.pipe(at(1),ke(o=>(o&&(i=i.clone({setHeaders:{Authorization:`Bearer ${o.token}`}})),r.handle(i))))}};t.\u0275fac=function(r){return new(r||t)(Te(pe))},t.\u0275prov=he({token:t,factory:t.\u0275fac});let n=t;return n})();var wa=(()=>{let t=class t{constructor(i,r,o,s){this.router=i,this.toastr=r,this.accountService=o,this.translocoService=s}intercept(i,r){return r.handle(i).pipe(ar(o=>{if(o==null)return an(o);switch(o.status){case 400:this.handleValidationError(o);break;case 401:this.handleAuthError(o);break;case 404:this.handleNotFound(o);break;case 500:this.handleServerException(o);break;default:let s=st("errors.generic");this.toastr.previousToastMessage!=="Something unexpected went wrong."&&this.toastr.previousToastMessage!==s&&this.toast(s);break}return an(o)}))}handleValidationError(i){if(Array.isArray(i.error)){let r=[];throw i.error.length>0&&i.error[0].hasOwnProperty("message")?i.error[0].details===null?i.error.forEach(o=>{r.push(o.message)}):i.error.forEach(o=>{r.push(o.details)}):i.error.forEach(o=>{r.push(o.description)}),r.flat()}else if(i.error.errors){let r=[];for(let o in i.error.errors)i.error.errors[o]&&r.push(i.error.errors[o]);throw r.flat()}else if(console.error("error:",i),i.statusText==="Bad Request"){if(i.error instanceof Blob){this.toast("errors.download",i.status);return}this.toast(i.error,this.translocoService.translate("errors.error-code",{num:i.status}))}else this.toast(i.statusText==="OK"?i.error:i.statusText,this.translocoService.translate("errors.error-code",{num:i.status}))}handleNotFound(i){this.toast("errors.not-found")}handleServerException(i){let r=i.error;if(r.hasOwnProperty("message")&&r.message.trim()!==""){r.message!="User is not authenticated"&&i.message!=="errors.user-not-auth"&&console.error("500 error: ",i),this.toast(r.message);return}if(i.hasOwnProperty("message")&&i.message.trim()!==""){i.message!=="User is not authenticated"&&i.message!=="errors.user-not-auth"&&console.error("500 error: ",i);return}this.toast("errors.unknown-crit"),console.error("500 error:",i)}handleAuthError(i){location.href.includes("/registration/confirm-email?token=")||this.accountService.logout()}toast(i,r){i.startsWith("errors.")?this.toastr.error(this.translocoService.translate(i),r):this.toastr.error(i,r)}};t.\u0275fac=function(r){return new(r||t)(Te(Be),Te(Ut),Te(pe),Te(pt))},t.\u0275prov=he({token:t,factory:t.\u0275fac});let n=t;return n})();var ka={};var Ia=(()=>{let t=class t{constructor(i){this.http=i}getTranslation(i){let r=i.split("/"),o=r[r.length-1],s=`assets/langs/${o}.json?v=${ka[o]}`;return console.log("loading locale: ",s),this.http.get(s)}};t.\u0275fac=function(r){return new(r||t)(Te(Ti))},t.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ma=new St("TRANSLOCO_PERSIST_LANG_STORAGE"),Na=new St("TRANSLOCO_PERSIST_LANG_CONFIG"),md=(()=>{class n{service=T(pt);storage=T(Ma);config=T(Na);subscription=null;storageKey=this.config.storageKey||"translocoLang";constructor(){Oi()&&this.init()}getCachedLang(){return Oi()?this.storage.getItem(this.storageKey):null}clear(){Oi()&&this.storage.removeItem(this.storageKey)}updateStorageOnLangChange(){return this.service.langChanges$.pipe(sr(1)).subscribe(e=>{this.save(e)})}init(){this.setActiveLang(),this.subscription?.unsubscribe(),this.subscription=this.updateStorageOnLangChange()}setActiveLang(){let e=this.storage.getItem(this.storageKey),i=this.service.config.defaultLang,r=e||i;if(Ni(this.config.getLangFn)){let o=Fr(),s=Rr();r=this.config.getLangFn({browserLang:o,defaultLang:i,cultureLang:s,cachedLang:e})}r&&this.service.setActiveLang(r)}save(e){this.service.config.prodMode||console.log(`%c \u{1F37B} Saving ${e} to storage`,"background: #fff; color: #2196F3;"),this.storage.setItem(this.storageKey,e)}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscription=null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pd(){}function Oa(e){var i=e,{storage:n}=i,t=Ot(i,["storage"]);return _i([{provide:Na,useValue:t??{}},{provide:Si,useFactory:()=>pd,multi:!0,deps:[md]},ue({provide:Ma},n)])}var dd=86400,ud={ttl:dd,storageKey:"@transloco/translations"},Fa=new St("TRANSLOCO_PERSIST_TRANSLATIONS_LOADER"),Ra=new St("The storage to use for the persistance behavior"),Da=new St("Configuration for the storage behavior");function _d(n){return n&&Ni(n.then)}function Pa(n){return _d(n)||ir(n)?on(n):mt(n)}function Yn(n){return`${n}/timestamp`}var fd=(()=>{class n{loader=T(Fa);storage=T(Ra);config=T(Da);subscription=this.clearCurrentStorage().subscribe();cache=null;getTranslation(e){let i=this.config.storageKey;return this.getCached(i).pipe(ke(r=>r?.[e]?mt(r[e]):on(this.loader.getTranslation(e)).pipe(ae(o=>this.setCache(i,e,o)))))}clearCache(){this.clearTimestamp(this.config.storageKey),this.clearTranslations(),this.cache=null}getCached(e){return this.cache?mt(this.cache):Pa(this.storage.getItem(e)).pipe(_e(i=>i?this.decode(e,i):null),ae(i=>{this.cache=i}),at(1))}setCache(e,i,r){let o=this.cache||{};o[i]=r,this.setTimestamp(e),this.storage.setItem(e,this.encode(o)),this.cache=o}encode(e){return JSON.stringify(e)}decode(e,i){if(Or(i))return i;if(Nr(i))try{return JSON.parse(i)}catch{return console.error(`storage key: ${e} is not serializable`),null}return null}setTimestamp(e){this.storage.setItem(Yn(e),Date.now())}getTimestamp(e){return Pa(this.storage.getItem(Yn(e))).pipe(_e(parseInt))}clearTimestamp(e){this.storage.removeItem(Yn(e))}clearTranslations(){this.storage.removeItem(this.config.storageKey)}clearCurrentStorage(){let e=this.config.storageKey;return this.getTimestamp(e).pipe(fe(Boolean),ae(i=>{Date.now()-i>=this.config.ttl&&this.storage.removeItem(e)}))}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscription=null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function Aa(i){var r=i,{storage:n,loader:t}=r,e=Ot(r,["storage","loader"]);return _i([{provide:Mr,useClass:fd},hd(e),{provide:Fa,useClass:t},ue({provide:Ra},n)])}function hd(n){return{provide:Da,useValue:ue(ue({},ud),n)}}var gd=!("animate"in document.documentElement);function vd(n,t){return function(){return n.currentUser$.pipe(Pt(),ke(e=>{if(e&&e.preferences.locale)return t.setActiveLang(e.preferences.locale),t.load(e.preferences.locale);let i=localStorage.getItem(pe.localeKey)||"en";return t.setActiveLang(i),t.load(i)})).subscribe()}}var yd={provide:Si,multi:!0,useFactory:vd,deps:[pe,pt]};function Cd(n){let t=[];return n.forEach(e=>{if(t.push(e),e.includes("-")){let i=e.replace("-","_");t.push(i)}}),t}var Sd=["af","af_ZA","ar","ar_AE","ar_BH","ar_DZ","ar_EG","ar_IQ","ar_JO","ar_KW","ar_LB","ar_LY","ar_MA","ar_OM","ar_QA","ar_SA","ar_SY","ar_TN","ar_YE","az","az_AZ","az_AZ","be","be_BY","bg","bg_BG","bs_BA","ca","ca_ES","cs","cs_CZ","cy","cy_GB","da","da_DK","de","de_AT","de_CH","de_DE","de_LI","de_LU","dv","dv_MV","el","el_GR","en","en_AU","en_BZ","en_CA","en_CB","en_GB","en_IE","en_JM","en_NZ","en_PH","en_TT","en_US","en_ZA","en_ZW","eo","es","es_AR","es_BO","es_CL","es_CO","es_CR","es_DO","es_EC","es_ES","es_ES","es_GT","es_HN","es_MX","es_NI","es_PA","es_PE","es_PR","es_PY","es_SV","es_UY","es_VE","et","et_EE","eu","eu_ES","fa","fa_IR","fi","fi_FI","fo","fo_FO","fr","fr_BE","fr_CA","fr_CH","fr_FR","fr_LU","fr_MC","gl","gl_ES","gu","gu_IN","he","he_IL","hi","hi_IN","hr","hr_BA","hr_HR","hu","hu_HU","hy","hy_AM","id","id_ID","is","is_IS","it","it_CH","it_IT","ja","ja_JP","ka","ka_GE","kk","kk_KZ","kn","kn_IN","ko","ko_KR","kok","kok_IN","ky","ky_KG","lt","lt_LT","lv","lv_LV","mi","mi_NZ","mk","mk_MK","mn","mn_MN","mr","mr_IN","ms","ms_BN","ms_MY","mt","mt_MT","nb","nb_NO","nl","nl_BE","nl_NL","nn_NO","ns","ns_ZA","pa","pa_IN","pl","pl_PL","ps","ps_AR","pt","pt_BR","pt_PT","qu","qu_BO","qu_EC","qu_PE","ro","ro_RO","ru","ru_RU","sa","sa_IN","se","se_FI","se_FI","se_FI","se_NO","se_NO","se_NO","se_SE","se_SE","se_SE","sk","sk_SK","sl","sl_SI","sq","sq_AL","sr_BA","sr_BA","sr_SP","sr_SP","sv","sv_FI","sv_SE","sw","sw_KE","syr","syr_SY","ta","ta_IN","te","te_IN","th","th_TH","tl","tl_PH","tn","tn_ZA","tr","tr_TR","tt","tt_RU","ts","uk","uk_UA","ur","ur_PK","uz","uz_UZ","uz_UZ","vi","vi_VN","xh","xh_ZA","zh","zh_CN","zh_HK","zh_MO","zh_SG","zh_TW","zu","zu_ZA","zh_Hans","zh_Hant","nb_NO"],xd={config:{reRenderOnLangChange:!0,availableLangs:Cd(Sd),prodMode:Ii.production,defaultLang:"en",fallbackLang:"en",missingHandler:{useFallbackTranslation:!0,allowEmpty:!1}}};xr(qo,{providers:[lr(wi,Ea,ba.withConfig({disableAnimations:gd}),oo,eo.forRoot({positionClass:"toast-bottom-right",preventDuplicates:!0,timeOut:6e3,countDuplicates:!0,autoDismiss:!0}),vo.forRoot()),Pr(xd),uo({defaultLocale:"en"}),Aa({loader:Ia,storage:{useValue:localStorage},ttl:604800}),Oa({storage:{useValue:localStorage}}),{provide:mn,useClass:wa,multi:!0},{provide:mn,useClass:Ta,multi:!0},yd,br,{provide:_o,useFactory:fo},yr(Cr())]}).catch(n=>console.error(n));export{yd as preLoad,vd as preloadUser};
//# sourceMappingURL=main-CJ6QNG7N.js.map
