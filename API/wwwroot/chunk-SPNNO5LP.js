import{d as Ei,e as zt,s as Pi}from"./chunk-E6ZKMAWP.js";import{$b as zr,A as Rt,Ab as ai,B as N,Bb as Pt,C as Ve,Ca as Ge,D as Hn,Da as le,Dc as fi,Dd as Ft,E as Ur,Ea as xt,Ec as gi,Fa as $r,Fb as At,Ga as Or,Hc as mi,Hd as Ue,Ib as Mt,Id as O,Ja as Lr,Jd as ye,Ka as Xn,L as Z,La as jr,Mc as vi,Na as Dt,Nb as ci,Nc as qr,O as ne,Oa as Nr,Oc as bi,P as ke,Pa as Ee,Pc as Ci,Pe as Di,Qc as Lt,Qe as Ui,R as Pr,Rc as jt,Rd as Vr,S as H,T as Fn,Td as xi,Uc as Nt,Vb as Ke,W as It,Wb as De,Wc as yi,X as ce,Xb as $t,Y as Ar,Yb as li,Z as zn,Zb as hi,_ as Wn,_c as Ht,a as d,ad as wi,b as D,ba as Bn,bd as Ze,c as Te,ca as F,cc as Qe,cd as _i,da as qn,db as Ut,dc as Je,dd as Si,eb as Yn,ed as Xe,fa as U,g as y,gb as ei,h as On,ha as $,hd as Ri,i as Ln,id as Ii,jc as ui,k as xr,ka as S,l as Dr,la as Vn,lb as Ce,lc as di,m as oe,ma as Gn,mb as z,mc as pi,n as L,na as V,nb as ti,o as se,oa as Mr,oc as Wr,pa as T,pc as Br,qa as f,r as ae,ra as Kn,rb as ri,sa as Qn,sb as Hr,t as j,tb as xe,u as p,ua as Tt,ub as ni,ud as Ti,v as be,va as kt,vb as ii,w as jn,wa as Jn,x as Nn,xa as Et,xb as oi,xc as Ot,ya as Zn,yb as si,yd as ki,z as v,zb as Fr}from"./chunk-2LHIXASS.js";var b="primary",pt=Symbol("RouteTitle"),Zr=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function Oe(r){return new Zr(r)}function Mo(r,e,i){let t=i.path.split("/");if(t.length>r.length||i.pathMatch==="full"&&(e.hasChildren()||t.length<r.length))return null;let n={};for(let o=0;o<t.length;o++){let s=t[o],a=r[o];if(s.startsWith(":"))n[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:r.slice(0,t.length),posParams:n}}function $o(r,e){if(r.length!==e.length)return!1;for(let i=0;i<r.length;++i)if(!X(r[i],e[i]))return!1;return!0}function X(r,e){let i=r?Xr(r):void 0,t=e?Xr(e):void 0;if(!i||!t||i.length!=t.length)return!1;let n;for(let o=0;o<i.length;o++)if(n=i[o],!zi(r[n],e[n]))return!1;return!0}function Xr(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function zi(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;let i=[...r].sort(),t=[...e].sort();return i.every((n,o)=>t[o]===n)}else return r===e}function Wi(r){return r.length>0?r[r.length-1]:null}function pe(r){return jn(r)?r:vi(r)?j(Promise.resolve(r)):p(r)}var Oo={exact:qi,subset:Vi},Bi={exact:Lo,subset:jo,ignored:()=>!0};function Ai(r,e,i){return Oo[i.paths](r.root,e.root,i.matrixParams)&&Bi[i.queryParams](r.queryParams,e.queryParams)&&!(i.fragment==="exact"&&r.fragment!==e.fragment)}function Lo(r,e){return X(r,e)}function qi(r,e,i){if(!_e(r.segments,e.segments)||!qt(r.segments,e.segments,i)||r.numberOfChildren!==e.numberOfChildren)return!1;for(let t in e.children)if(!r.children[t]||!qi(r.children[t],e.children[t],i))return!1;return!0}function jo(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(i=>zi(r[i],e[i]))}function Vi(r,e,i){return Gi(r,e,e.segments,i)}function Gi(r,e,i,t){if(r.segments.length>i.length){let n=r.segments.slice(0,i.length);return!(!_e(n,i)||e.hasChildren()||!qt(n,i,t))}else if(r.segments.length===i.length){if(!_e(r.segments,i)||!qt(r.segments,i,t))return!1;for(let n in e.children)if(!r.children[n]||!Vi(r.children[n],e.children[n],t))return!1;return!0}else{let n=i.slice(0,r.segments.length),o=i.slice(r.segments.length);return!_e(r.segments,n)||!qt(r.segments,n,t)||!r.children[b]?!1:Gi(r.children[b],e,o,t)}}function qt(r,e,i){return e.every((t,n)=>Bi[i](r[n].parameters,t.parameters))}var he=class{constructor(e=new w([],{}),i={},t=null){this.root=e,this.queryParams=i,this.fragment=t}get queryParamMap(){return this._queryParamMap??=Oe(this.queryParams),this._queryParamMap}toString(){return Fo.serialize(this)}},w=class{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Object.values(i).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vt(this)}},we=class{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap??=Oe(this.parameters),this._parameterMap}toString(){return Qi(this)}};function No(r,e){return _e(r,e)&&r.every((i,t)=>X(i.parameters,e[t].parameters))}function _e(r,e){return r.length!==e.length?!1:r.every((i,t)=>i.path===e[t].path)}function Ho(r,e){let i=[];return Object.entries(r.children).forEach(([t,n])=>{t===b&&(i=i.concat(e(n,t)))}),Object.entries(r.children).forEach(([t,n])=>{t!==b&&(i=i.concat(e(n,t)))}),i}var ft=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:()=>new ot,providedIn:"root"});let r=e;return r})(),ot=class{parse(e){let i=new en(e);return new he(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){let i=`/${Ye(e.root,!0)}`,t=Bo(e.queryParams),n=typeof e.fragment=="string"?`#${zo(e.fragment)}`:"";return`${i}${t}${n}`}},Fo=new ot;function Vt(r){return r.segments.map(e=>Qi(e)).join("/")}function Ye(r,e){if(!r.hasChildren())return Vt(r);if(e){let i=r.children[b]?Ye(r.children[b],!1):"",t=[];return Object.entries(r.children).forEach(([n,o])=>{n!==b&&t.push(`${n}:${Ye(o,!1)}`)}),t.length>0?`${i}(${t.join("//")})`:i}else{let i=Ho(r,(t,n)=>n===b?[Ye(r.children[b],!1)]:[`${n}:${Ye(t,!1)}`]);return Object.keys(r.children).length===1&&r.children[b]!=null?`${Vt(r)}/${i[0]}`:`${Vt(r)}/(${i.join("//")})`}}function Ki(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wt(r){return Ki(r).replace(/%3B/gi,";")}function zo(r){return encodeURI(r)}function Yr(r){return Ki(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gt(r){return decodeURIComponent(r)}function Mi(r){return Gt(r.replace(/\+/g,"%20"))}function Qi(r){return`${Yr(r.path)}${Wo(r.parameters)}`}function Wo(r){return Object.entries(r).map(([e,i])=>`;${Yr(e)}=${Yr(i)}`).join("")}function Bo(r){let e=Object.entries(r).map(([i,t])=>Array.isArray(t)?t.map(n=>`${Wt(i)}=${Wt(n)}`).join("&"):`${Wt(i)}=${Wt(t)}`).filter(i=>i);return e.length?`?${e.join("&")}`:""}var qo=/^[^\/()?;#]+/;function Gr(r){let e=r.match(qo);return e?e[0]:""}var Vo=/^[^\/()?;=#]+/;function Go(r){let e=r.match(Vo);return e?e[0]:""}var Ko=/^[^=?&#]+/;function Qo(r){let e=r.match(Ko);return e?e[0]:""}var Jo=/^[^&#]+/;function Zo(r){let e=r.match(Jo);return e?e[0]:""}var en=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new w([],{}):new w([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(t[b]=new w(e,i)),t}parseSegment(){let e=Gr(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new we(Gt(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let i=Go(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let n=Gr(this.remaining);n&&(t=n,this.capture(t))}e[Gt(i)]=Gt(t)}parseQueryParam(e){let i=Qo(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let s=Zo(this.remaining);s&&(t=s,this.capture(t))}let n=Mi(i),o=Mi(t);if(e.hasOwnProperty(n)){let s=e[n];Array.isArray(s)||(s=[s],e[n]=s),s.push(o)}else e[n]=o}parseParens(e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=Gr(this.remaining),n=this.remaining[t.length];if(n!=="/"&&n!==")"&&n!==";")throw new $(4010,!1);let o;t.indexOf(":")>-1?(o=t.slice(0,t.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=b);let s=this.parseChildren();i[o]=Object.keys(s).length===1?s[b]:new w([],s),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function Ji(r){return r.segments.length>0?new w([],{[b]:r}):r}function Zi(r){let e={};for(let[t,n]of Object.entries(r.children)){let o=Zi(n);if(t===b&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[t]=o)}let i=new w(r.segments,e);return Xo(i)}function Xo(r){if(r.numberOfChildren===1&&r.children[b]){let e=r.children[b];return new w(r.segments.concat(e.segments),e.children)}return r}function Le(r){return r instanceof he}function Yo(r,e,i=null,t=null){let n=Xi(r);return Yi(n,e,i,t)}function Xi(r){let e;function i(o){let s={};for(let l of o.children){let c=i(l);s[l.outlet]=c}let a=new w(o.url,s);return o===r&&(e=a),a}let t=i(r.root),n=Ji(t);return e??n}function Yi(r,e,i,t){let n=r;for(;n.parent;)n=n.parent;if(e.length===0)return Kr(n,n,n,i,t);let o=es(e);if(o.toRoot())return Kr(n,n,new w([],{}),i,t);let s=ts(o,n,r),a=s.processChildren?rt(s.segmentGroup,s.index,o.commands):to(s.segmentGroup,s.index,o.commands);return Kr(n,s.segmentGroup,a,i,t)}function Kt(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function st(r){return typeof r=="object"&&r!=null&&r.outlets}function Kr(r,e,i,t,n){let o={};t&&Object.entries(t).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;r===e?s=i:s=eo(r,e,i);let a=Ji(Zi(s));return new he(a,o,n)}function eo(r,e,i){let t={};return Object.entries(r.children).forEach(([n,o])=>{o===e?t[n]=i:t[n]=eo(o,e,i)}),new w(r.segments,t)}var Qt=class{constructor(e,i,t){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=t,e&&t.length>0&&Kt(t[0]))throw new $(4003,!1);let n=t.find(st);if(n&&n!==Wi(t))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function es(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new Qt(!0,0,r);let e=0,i=!1,t=r.reduce((n,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...n,{outlets:a}]}if(o.segmentPath)return[...n,o.segmentPath]}return typeof o!="string"?[...n,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?i=!0:a===".."?e++:a!=""&&n.push(a))}),n):[...n,o]},[]);return new Qt(i,e,t)}var Me=class{constructor(e,i,t){this.segmentGroup=e,this.processChildren=i,this.index=t}};function ts(r,e,i){if(r.isAbsolute)return new Me(e,!0,0);if(!i)return new Me(e,!1,NaN);if(i.parent===null)return new Me(i,!0,0);let t=Kt(r.commands[0])?0:1,n=i.segments.length-1+t;return rs(i,n,r.numberOfDoubleDots)}function rs(r,e,i){let t=r,n=e,o=i;for(;o>n;){if(o-=n,t=t.parent,!t)throw new $(4005,!1);n=t.segments.length}return new Me(t,!1,n-o)}function ns(r){return st(r[0])?r[0].outlets:{[b]:r}}function to(r,e,i){if(r??=new w([],{}),r.segments.length===0&&r.hasChildren())return rt(r,e,i);let t=is(r,e,i),n=i.slice(t.commandIndex);if(t.match&&t.pathIndex<r.segments.length){let o=new w(r.segments.slice(0,t.pathIndex),{});return o.children[b]=new w(r.segments.slice(t.pathIndex),r.children),rt(o,0,n)}else return t.match&&n.length===0?new w(r.segments,{}):t.match&&!r.hasChildren()?tn(r,e,i):t.match?rt(r,0,n):tn(r,e,i)}function rt(r,e,i){if(i.length===0)return new w(r.segments,{});{let t=ns(i),n={};if(Object.keys(t).some(o=>o!==b)&&r.children[b]&&r.numberOfChildren===1&&r.children[b].segments.length===0){let o=rt(r.children[b],e,i);return new w(r.segments,o.children)}return Object.entries(t).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(n[o]=to(r.children[o],e,s))}),Object.entries(r.children).forEach(([o,s])=>{t[o]===void 0&&(n[o]=s)}),new w(r.segments,n)}}function is(r,e,i){let t=0,n=e,o={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(t>=i.length)return o;let s=r.segments[n],a=i[t];if(st(a))break;let l=`${a}`,c=t<i.length-1?i[t+1]:null;if(n>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Oi(l,c,s))return o;t+=2}else{if(!Oi(l,{},s))return o;t++}n++}return{match:!0,pathIndex:n,commandIndex:t}}function tn(r,e,i){let t=r.segments.slice(0,e),n=0;for(;n<i.length;){let o=i[n];if(st(o)){let l=os(o.outlets);return new w(t,l)}if(n===0&&Kt(i[0])){let l=r.segments[e];t.push(new we(l.path,$i(i[0]))),n++;continue}let s=st(o)?o.outlets[b]:`${o}`,a=n<i.length-1?i[n+1]:null;s&&a&&Kt(a)?(t.push(new we(s,$i(a))),n+=2):(t.push(new we(s,{})),n++)}return new w(t,{})}function os(r){let e={};return Object.entries(r).forEach(([i,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(e[i]=tn(new w([],{}),0,t))}),e}function $i(r){let e={};return Object.entries(r).forEach(([i,t])=>e[i]=`${t}`),e}function Oi(r,e,i){return r==i.path&&X(e,i.parameters)}var nt="imperative",P=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(P||{}),G=class{constructor(e,i){this.id=e,this.url=i}},je=class extends G{constructor(e,i,t="imperative",n=null){super(e,i),this.type=P.NavigationStart,this.navigationTrigger=t,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Q=class extends G{constructor(e,i,t){super(e,i),this.urlAfterRedirects=t,this.type=P.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},B=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(B||{}),Jt=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(Jt||{}),ue=class extends G{constructor(e,i,t,n){super(e,i),this.reason=t,this.code=n,this.type=P.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},de=class extends G{constructor(e,i,t,n){super(e,i),this.reason=t,this.code=n,this.type=P.NavigationSkipped}},at=class extends G{constructor(e,i,t,n){super(e,i),this.error=t,this.target=n,this.type=P.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zt=class extends G{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=P.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rn=class extends G{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=P.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nn=class extends G{constructor(e,i,t,n,o){super(e,i),this.urlAfterRedirects=t,this.state=n,this.shouldActivate=o,this.type=P.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},on=class extends G{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=P.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sn=class extends G{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=P.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},an=class{constructor(e){this.route=e,this.type=P.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cn=class{constructor(e){this.route=e,this.type=P.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ln=class{constructor(e){this.snapshot=e,this.type=P.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hn=class{constructor(e){this.snapshot=e,this.type=P.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},un=class{constructor(e){this.snapshot=e,this.type=P.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dn=class{constructor(e){this.snapshot=e,this.type=P.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xt=class{constructor(e,i,t){this.routerEvent=e,this.position=i,this.anchor=t,this.type=P.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ct=class{},lt=class{constructor(e){this.url=e}};var pn=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new gt,this.attachRef=null}},gt=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){let o=this.getOrCreateContext(t);o.outlet=n,this.contexts.set(t,o)}onChildOutletDestroyed(t){let n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new pn,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Yt=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){let i=fn(e,this._root);return i?i.children.map(t=>t.value):[]}firstChild(e){let i=fn(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){let i=gn(e,this._root);return i.length<2?[]:i[i.length-2].children.map(n=>n.value).filter(n=>n!==e)}pathFromRoot(e){return gn(e,this._root).map(i=>i.value)}};function fn(r,e){if(r===e.value)return e;for(let i of e.children){let t=fn(r,i);if(t)return t}return null}function gn(r,e){if(r===e.value)return[e];for(let i of e.children){let t=gn(r,i);if(t.length)return t.unshift(e),t}return[]}var W=class{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}};function Ae(r){let e={};return r&&r.children.forEach(i=>e[i.value.outlet]=i),e}var er=class extends Yt{constructor(e,i){super(e),this.snapshot=i,In(this,e)}toString(){return this.snapshot.toString()}};function ro(r){let e=ss(r),i=new L([new we("",{})]),t=new L({}),n=new L({}),o=new L({}),s=new L(""),a=new Se(i,t,o,s,n,b,r,e.root);return a.snapshot=e.root,new er(new W(a,[]),e)}function ss(r){let e={},i={},t={},n="",o=new ht([],e,t,n,i,b,r,null,{});return new tr("",new W(o,[]))}var Se=class{constructor(e,i,t,n,o,s,a,l){this.urlSubject=e,this.paramsSubject=i,this.queryParamsSubject=t,this.fragmentSubject=n,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(v(c=>c[pt]))??p(void 0),this.url=e,this.params=i,this.queryParams=t,this.fragment=n,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(v(e=>Oe(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(v(e=>Oe(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rn(r,e,i="emptyOnly"){let t,{routeConfig:n}=r;return e!==null&&(i==="always"||n?.path===""||!e.component&&!e.routeConfig?.loadComponent)?t={params:d(d({},e.params),r.params),data:d(d({},e.data),r.data),resolve:d(d(d(d({},r.data),e.data),n?.data),r._resolvedData)}:t={params:d({},r.params),data:d({},r.data),resolve:d(d({},r.data),r._resolvedData??{})},n&&io(n)&&(t.resolve[pt]=n.title),t}var ht=class{get title(){return this.data?.[pt]}constructor(e,i,t,n,o,s,a,l,c){this.url=e,this.params=i,this.queryParams=t,this.fragment=n,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Oe(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Oe(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(t=>t.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${i}')`}},tr=class extends Yt{constructor(e,i){super(i),this.url=e,In(this,i)}toString(){return no(this._root)}};function In(r,e){e.value._routerState=r,e.children.forEach(i=>In(r,i))}function no(r){let e=r.children.length>0?` { ${r.children.map(no).join(", ")} } `:"";return`${r.value}${e}`}function Qr(r){if(r.snapshot){let e=r.snapshot,i=r._futureSnapshot;r.snapshot=i,X(e.queryParams,i.queryParams)||r.queryParamsSubject.next(i.queryParams),e.fragment!==i.fragment&&r.fragmentSubject.next(i.fragment),X(e.params,i.params)||r.paramsSubject.next(i.params),$o(e.url,i.url)||r.urlSubject.next(i.url),X(e.data,i.data)||r.dataSubject.next(i.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function mn(r,e){let i=X(r.params,e.params)&&No(r.url,e.url),t=!r.parent!=!e.parent;return i&&!t&&(!r.parent||mn(r.parent,e.parent))}function io(r){return typeof r.title=="string"||r.title===null}var as=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=b,this.activateEvents=new Ee,this.deactivateEvents=new Ee,this.attachEvents=new Ee,this.detachEvents=new Ee,this.parentContexts=f(gt),this.location=f(ii),this.changeDetector=f(jt),this.environmentInjector=f(Ge),this.inputBinder=f(sr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:n,previousValue:o}=t.name;if(n)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let o=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new vn(t,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=Et({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xt]});let r=e;return r})(),vn=class{constructor(e,i,t){this.route=e,this.childContexts=i,this.parent=t}get(e,i){return e===Se?this.route:e===gt?this.childContexts:this.parent.get(e,i)}},sr=new V(""),Li=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:n}=t,o=Rt([n.queryParams,n.params,n.data]).pipe(F(([s,a,l],c)=>(l=d(d(d({},s),a),l),c===0?p(l):Promise.resolve(l)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(t);return}let a=yi(n.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,s[l])});this.outletDataSubscriptions.set(t,o)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let r=e;return r})();function cs(r,e,i){let t=ut(r,e._root,i?i._root:void 0);return new er(t,e)}function ut(r,e,i){if(i&&r.shouldReuseRoute(e.value,i.value.snapshot)){let t=i.value;t._futureSnapshot=e.value;let n=ls(r,e,i);return new W(t,n)}else{if(r.shouldAttach(e.value)){let o=r.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ut(r,a)),s}}let t=hs(e.value),n=e.children.map(o=>ut(r,o));return new W(t,n)}}function ls(r,e,i){return e.children.map(t=>{for(let n of i.children)if(r.shouldReuseRoute(t.value,n.value.snapshot))return ut(r,t,n);return ut(r,t)})}function hs(r){return new Se(new L(r.url),new L(r.params),new L(r.queryParams),new L(r.fragment),new L(r.data),r.outlet,r.component,r)}var oo="ngNavigationCancelingError";function so(r,e){let{redirectTo:i,navigationBehaviorOptions:t}=Le(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,n=ao(!1,B.Redirect);return n.url=i,n.navigationBehaviorOptions=t,n}function ao(r,e){let i=new Error(`NavigationCancelingError: ${r||""}`);return i[oo]=!0,i.cancellationCode=e,i}function us(r){return co(r)&&Le(r.url)}function co(r){return!!r&&r[oo]}var ds=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=kt({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ot],decls:1,vars:0,template:function(n,o){n&1&&$t(0,"router-outlet")},dependencies:[as],encapsulation:2});let r=e;return r})();function ps(r,e){return r.providers&&!r._injector&&(r._injector=Fr(r.providers,e,`Route: ${r.path}`)),r._injector??e}function Tn(r){let e=r.children&&r.children.map(Tn),i=e?D(d({},r),{children:e}):d({},r);return!i.component&&!i.loadComponent&&(e||i.loadChildren)&&i.outlet&&i.outlet!==b&&(i.component=ds),i}function Y(r){return r.outlet||b}function fs(r,e){let i=r.filter(t=>Y(t)===e);return i.push(...r.filter(t=>Y(t)!==e)),i}function mt(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let e=r.parent;e;e=e.parent){let i=e.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var gs=(r,e,i,t)=>v(n=>(new bn(e,n.targetRouterState,n.currentRouterState,i,t).activate(r),n)),bn=class{constructor(e,i,t,n,o){this.routeReuseStrategy=e,this.futureState=i,this.currState=t,this.forwardEvent=n,this.inputBindingEnabled=o}activate(e){let i=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,t,e),Qr(this.futureState.root),this.activateChildRoutes(i,t,e)}deactivateChildRoutes(e,i,t){let n=Ae(i);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,n[s],t),delete n[s]}),Object.values(n).forEach(o=>{this.deactivateRouteAndItsChildren(o,t)})}deactivateRoutes(e,i,t){let n=e.value,o=i?i.value:null;if(n===o)if(n.component){let s=t.getContext(n.outlet);s&&this.deactivateChildRoutes(e,i,s.children)}else this.deactivateChildRoutes(e,i,t);else o&&this.deactivateRouteAndItsChildren(i,t)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){let t=i.getContext(e.value.outlet),n=t&&e.value.component?t.children:i,o=Ae(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,n);if(t&&t.outlet){let s=t.outlet.detach(),a=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,i){let t=i.getContext(e.value.outlet),n=t&&e.value.component?t.children:i,o=Ae(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,n);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(e,i,t){let n=Ae(i);e.children.forEach(o=>{this.activateRoutes(o,n[o.value.outlet],t),this.forwardEvent(new dn(o.value.snapshot))}),e.children.length&&this.forwardEvent(new hn(e.value.snapshot))}activateRoutes(e,i,t){let n=e.value,o=i?i.value:null;if(Qr(n),n===o)if(n.component){let s=t.getOrCreateContext(n.outlet);this.activateChildRoutes(e,i,s.children)}else this.activateChildRoutes(e,i,t);else if(n.component){let s=t.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let a=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Qr(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=mt(n.snapshot);s.attachRef=null,s.route=n,s.injector=a,s.outlet&&s.outlet.activateWith(n,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,t)}},rr=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$e=class{constructor(e,i){this.component=e,this.route=i}};function ms(r,e,i){let t=r._root,n=e?e._root:null;return et(t,n,i,[t.value])}function vs(r){let e=r.routeConfig?r.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:r,guards:e}}function Fe(r,e){let i=Symbol(),t=e.get(r,i);return t===i?typeof r=="function"&&!Gn(r)?r:e.get(r):t}function et(r,e,i,t,n={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ae(e);return r.children.forEach(s=>{bs(s,o[s.value.outlet],i,t.concat([s.value]),n),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>it(a,i.getContext(s),n)),n}function bs(r,e,i,t,n={canDeactivateChecks:[],canActivateChecks:[]}){let o=r.value,s=e?e.value:null,a=i?i.getContext(r.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Cs(s,o,o.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new rr(t)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?et(r,e,a?a.children:null,t,n):et(r,e,i,t,n),l&&a&&a.outlet&&a.outlet.isActivated&&n.canDeactivateChecks.push(new $e(a.outlet.component,s))}else s&&it(e,a,n),n.canActivateChecks.push(new rr(t)),o.component?et(r,null,a?a.children:null,t,n):et(r,null,i,t,n);return n}function Cs(r,e,i){if(typeof i=="function")return i(r,e);switch(i){case"pathParamsChange":return!_e(r.url,e.url);case"pathParamsOrQueryParamsChange":return!_e(r.url,e.url)||!X(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mn(r,e)||!X(r.queryParams,e.queryParams);case"paramsChange":default:return!mn(r,e)}}function it(r,e,i){let t=Ae(r),n=r.value;Object.entries(t).forEach(([o,s])=>{n.component?e?it(s,e.children.getContext(o),i):it(s,null,i):it(s,e,i)}),n.component?e&&e.outlet&&e.outlet.isActivated?i.canDeactivateChecks.push(new $e(e.outlet.component,n)):i.canDeactivateChecks.push(new $e(null,n)):i.canDeactivateChecks.push(new $e(null,n))}function vt(r){return typeof r=="function"}function ys(r){return typeof r=="boolean"}function ws(r){return r&&vt(r.canLoad)}function _s(r){return r&&vt(r.canActivate)}function Ss(r){return r&&vt(r.canActivateChild)}function Rs(r){return r&&vt(r.canDeactivate)}function Is(r){return r&&vt(r.canMatch)}function lo(r){return r instanceof Nn||r?.name==="EmptyError"}var Bt=Symbol("INITIAL_VALUE");function Ne(){return F(r=>Rt(r.map(e=>e.pipe(H(1),Bn(Bt)))).pipe(v(e=>{for(let i of e)if(i!==!0){if(i===Bt)return Bt;if(i===!1||i instanceof he)return i}return!0}),Z(e=>e!==Bt),H(1)))}function Ts(r,e){return N(i=>{let{targetSnapshot:t,currentSnapshot:n,guards:{canActivateChecks:o,canDeactivateChecks:s}}=i;return s.length===0&&o.length===0?p(D(d({},i),{guardsResult:!0})):ks(s,t,n,r).pipe(N(a=>a&&ys(a)?Es(t,o,r,e):p(a)),v(a=>D(d({},i),{guardsResult:a})))})}function ks(r,e,i,t){return j(r).pipe(N(n=>As(n.component,n.route,i,e,t)),ce(n=>n!==!0,!0))}function Es(r,e,i,t){return j(e).pipe(ke(n=>Hn(Ds(n.route.parent,t),xs(n.route,t),Ps(r,n.path,i),Us(r,n.route,i))),ce(n=>n!==!0,!0))}function xs(r,e){return r!==null&&e&&e(new un(r)),p(!0)}function Ds(r,e){return r!==null&&e&&e(new ln(r)),p(!0)}function Us(r,e,i){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return p(!0);let n=t.map(o=>Ur(()=>{let s=mt(e)??i,a=Fe(o,s),l=_s(a)?a.canActivate(e,r):le(s,()=>a(e,r));return pe(l).pipe(ce())}));return p(n).pipe(Ne())}function Ps(r,e,i){let t=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>vs(s)).filter(s=>s!==null).map(s=>Ur(()=>{let a=s.guards.map(l=>{let c=mt(s.node)??i,u=Fe(l,c),m=Ss(u)?u.canActivateChild(t,r):le(c,()=>u(t,r));return pe(m).pipe(ce())});return p(a).pipe(Ne())}));return p(o).pipe(Ne())}function As(r,e,i,t,n){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return p(!0);let s=o.map(a=>{let l=mt(e)??n,c=Fe(a,l),u=Rs(c)?c.canDeactivate(r,e,i,t):le(l,()=>c(r,e,i,t));return pe(u).pipe(ce())});return p(s).pipe(Ne())}function Ms(r,e,i,t){let n=e.canLoad;if(n===void 0||n.length===0)return p(!0);let o=n.map(s=>{let a=Fe(s,r),l=ws(a)?a.canLoad(e,i):le(r,()=>a(e,i));return pe(l)});return p(o).pipe(Ne(),ho(t))}function ho(r){return Ln(U(e=>{if(Le(e))throw so(r,e)}),v(e=>e===!0))}function $s(r,e,i,t){let n=e.canMatch;if(!n||n.length===0)return p(!0);let o=n.map(s=>{let a=Fe(s,r),l=Is(a)?a.canMatch(e,i):le(r,()=>a(e,i));return pe(l)});return p(o).pipe(Ne(),ho(t))}var dt=class{constructor(e){this.segmentGroup=e||null}},nr=class extends Error{constructor(e){super(),this.urlTree=e}};function Pe(r){return be(new dt(r))}function Os(r){return be(new $(4e3,!1))}function Ls(r){return be(ao(!1,B.GuardRejected))}var Cn=class{constructor(e,i){this.urlSerializer=e,this.urlTree=i}lineralizeSegments(e,i){let t=[],n=i.root;for(;;){if(t=t.concat(n.segments),n.numberOfChildren===0)return p(t);if(n.numberOfChildren>1||!n.children[b])return Os(e.redirectTo);n=n.children[b]}}applyRedirectCommands(e,i,t){let n=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),e,t);if(i.startsWith("/"))throw new nr(n);return n}applyRedirectCreateUrlTree(e,i,t,n){let o=this.createSegmentGroup(e,i.root,t,n);return new he(o,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){let t={};return Object.entries(e).forEach(([n,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);t[n]=i[a]}else t[n]=o}),t}createSegmentGroup(e,i,t,n){let o=this.createSegments(e,i.segments,t,n),s={};return Object.entries(i.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,t,n)}),new w(o,s)}createSegments(e,i,t,n){return i.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,n):this.findOrReturn(o,t))}findPosParam(e,i,t){let n=t[i.path.substring(1)];if(!n)throw new $(4001,!1);return n}findOrReturn(e,i){let t=0;for(let n of i){if(n.path===e.path)return i.splice(t),n;t++}return e}},yn={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function js(r,e,i,t,n){let o=kn(r,e,i);return o.matched?(t=ps(e,t),$s(t,e,i,n).pipe(v(s=>s===!0?o:d({},yn)))):p(o)}function kn(r,e,i){if(e.path==="**")return Ns(i);if(e.path==="")return e.pathMatch==="full"&&(r.hasChildren()||i.length>0)?d({},yn):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let n=(e.matcher||Mo)(i,r,e);if(!n)return d({},yn);let o={};Object.entries(n.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=n.consumed.length>0?d(d({},o),n.consumed[n.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:n.consumed,remainingSegments:i.slice(n.consumed.length),parameters:s,positionalParamSegments:n.posParams??{}}}function Ns(r){return{matched:!0,parameters:r.length>0?Wi(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function ji(r,e,i,t){return i.length>0&&zs(r,i,t)?{segmentGroup:new w(e,Fs(t,new w(i,r.children))),slicedSegments:[]}:i.length===0&&Ws(r,i,t)?{segmentGroup:new w(r.segments,Hs(r,i,t,r.children)),slicedSegments:i}:{segmentGroup:new w(r.segments,r.children),slicedSegments:i}}function Hs(r,e,i,t){let n={};for(let o of i)if(ar(r,e,o)&&!t[Y(o)]){let s=new w([],{});n[Y(o)]=s}return d(d({},t),n)}function Fs(r,e){let i={};i[b]=e;for(let t of r)if(t.path===""&&Y(t)!==b){let n=new w([],{});i[Y(t)]=n}return i}function zs(r,e,i){return i.some(t=>ar(r,e,t)&&Y(t)!==b)}function Ws(r,e,i){return i.some(t=>ar(r,e,t))}function ar(r,e,i){return(r.hasChildren()||e.length>0)&&i.pathMatch==="full"?!1:i.path===""}function Bs(r,e,i,t){return Y(r)!==t&&(t===b||!ar(e,i,r))?!1:kn(e,r,i).matched}function qs(r,e,i){return e.length===0&&!r.children[i]}var wn=class{};function Vs(r,e,i,t,n,o,s="emptyOnly"){return new _n(r,e,i,t,n,s,o).recognize()}var Gs=31,_n=class{constructor(e,i,t,n,o,s,a){this.injector=e,this.configLoader=i,this.rootComponentType=t,this.config=n,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Cn(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=ji(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(v(i=>{let t=new ht([],Object.freeze({}),Object.freeze(d({},this.urlTree.queryParams)),this.urlTree.fragment,{},b,this.rootComponentType,null,{}),n=new W(t,i),o=new tr("",n),s=Yo(t,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,b).pipe(ne(t=>{if(t instanceof nr)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof dt?this.noMatchError(t):t}))}inheritParamsAndData(e,i){let t=e.value,n=Rn(t,i,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(o=>this.inheritParamsAndData(o,t))}processSegmentGroup(e,i,t,n){return t.segments.length===0&&t.hasChildren()?this.processChildren(e,i,t):this.processSegment(e,i,t,t.segments,n,!0).pipe(v(o=>o instanceof W?[o]:[]))}processChildren(e,i,t){let n=[];for(let o of Object.keys(t.children))o==="primary"?n.unshift(o):n.push(o);return j(n).pipe(ke(o=>{let s=t.children[o],a=fs(i,o);return this.processSegmentGroup(e,a,s,o)}),Wn((o,s)=>(o.push(...s),o)),Pr(null),zn(),N(o=>{if(o===null)return Pe(t);let s=uo(o);return Ks(s),p(s)}))}processSegment(e,i,t,n,o,s){return j(i).pipe(ke(a=>this.processSegmentAgainstRoute(a._injector??e,i,a,t,n,o,s).pipe(ne(l=>{if(l instanceof dt)return p(null);throw l}))),ce(a=>!!a),ne(a=>{if(lo(a))return qs(t,n,o)?p(new wn):Pe(t);throw a}))}processSegmentAgainstRoute(e,i,t,n,o,s,a){return Bs(t,n,o,s)?t.redirectTo===void 0?this.matchSegmentAgainstRoute(e,n,t,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,n,i,t,o,s):Pe(n):Pe(n)}expandSegmentAgainstRouteUsingRedirect(e,i,t,n,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=kn(i,n,o);if(!a)return Pe(i);n.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Gs&&(this.allowRedirects=!1));let m=this.applyRedirects.applyRedirectCommands(l,n.redirectTo,c);return this.applyRedirects.lineralizeSegments(n,m).pipe(N(C=>this.processSegment(e,t,i,C.concat(u),s,!1)))}matchSegmentAgainstRoute(e,i,t,n,o){let s=js(i,t,n,e,this.urlSerializer);return t.path==="**"&&(i.children={}),s.pipe(F(a=>a.matched?(e=t._injector??e,this.getChildConfig(e,t,n).pipe(F(({routes:l})=>{let c=t._loadedInjector??e,{consumedSegments:u,remainingSegments:m,parameters:C}=a,E=new ht(u,C,Object.freeze(d({},this.urlTree.queryParams)),this.urlTree.fragment,Js(t),Y(t),t.component??t._loadedComponent??null,t,Zs(t)),{segmentGroup:Be,slicedSegments:qe}=ji(i,u,m,l);if(qe.length===0&&Be.hasChildren())return this.processChildren(c,l,Be).pipe(v(ve=>ve===null?null:new W(E,ve)));if(l.length===0&&qe.length===0)return p(new W(E,[]));let Er=Y(t)===o;return this.processSegment(c,l,Be,qe,Er?b:o,!0).pipe(v(ve=>new W(E,ve instanceof W?[ve]:[])))}))):Pe(i)))}getChildConfig(e,i,t){return i.children?p({routes:i.children,injector:e}):i.loadChildren?i._loadedRoutes!==void 0?p({routes:i._loadedRoutes,injector:i._loadedInjector}):Ms(e,i,t,this.urlSerializer).pipe(N(n=>n?this.configLoader.loadChildren(e,i).pipe(U(o=>{i._loadedRoutes=o.routes,i._loadedInjector=o.injector})):Ls(i))):p({routes:[],injector:e})}};function Ks(r){r.sort((e,i)=>e.value.outlet===b?-1:i.value.outlet===b?1:e.value.outlet.localeCompare(i.value.outlet))}function Qs(r){let e=r.value.routeConfig;return e&&e.path===""}function uo(r){let e=[],i=new Set;for(let t of r){if(!Qs(t)){e.push(t);continue}let n=e.find(o=>t.value.routeConfig===o.value.routeConfig);n!==void 0?(n.children.push(...t.children),i.add(n)):e.push(t)}for(let t of i){let n=uo(t.children);e.push(new W(t.value,n))}return e.filter(t=>!i.has(t))}function Js(r){return r.data||{}}function Zs(r){return r.resolve||{}}function Xs(r,e,i,t,n,o){return N(s=>Vs(r,e,i,t,s.extractedUrl,n,o).pipe(v(({state:a,tree:l})=>D(d({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function Ys(r,e){return N(i=>{let{targetSnapshot:t,guards:{canActivateChecks:n}}=i;if(!n.length)return p(i);let o=new Set(n.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of po(l))s.add(c);let a=0;return j(s).pipe(ke(l=>o.has(l)?ea(l,t,r,e):(l.data=Rn(l,l.parent,r).resolve,p(void 0))),U(()=>a++),Ar(1),N(l=>a===s.size?p(i):ae))})}function po(r){let e=r.children.map(i=>po(i)).flat();return[r,...e]}function ea(r,e,i,t){let n=r.routeConfig,o=r._resolve;return n?.title!==void 0&&!io(n)&&(o[pt]=n.title),ta(o,r,e,t).pipe(v(s=>(r._resolvedData=s,r.data=Rn(r,r.parent,i).resolve,null)))}function ta(r,e,i,t){let n=Xr(r);if(n.length===0)return p({});let o={};return j(n).pipe(N(s=>ra(r[s],e,i,t).pipe(ce(),U(a=>{o[s]=a}))),Ar(1),Fn(o),ne(s=>lo(s)?ae:be(s)))}function ra(r,e,i,t){let n=mt(e)??t,o=Fe(r,n),s=o.resolve?o.resolve(e,i):le(n,()=>o(e,i));return pe(s)}function Jr(r){return F(e=>{let i=r(e);return i?j(i).pipe(v(()=>e)):p(e)})}var fo=(()=>{let e=class e{buildTitle(t){let n,o=t.root;for(;o!==void 0;)n=this.getResolvedTitleForRoute(o)??n,o=o.children.find(s=>s.outlet===b);return n}getResolvedTitleForRoute(t){return t.data[pt]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:()=>f(na),providedIn:"root"});let r=e;return r})(),na=(()=>{let e=class e extends fo{constructor(t){super(),this.title=t}updateTitle(t){let n=this.buildTitle(t);n!==void 0&&this.title.setTitle(n)}};e.\u0275fac=function(n){return new(n||e)(T(Ei))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),bt=new V("",{providedIn:"root",factory:()=>({})}),ir=new V(""),En=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=f(Lt)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return p(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let n=pe(t.loadComponent()).pipe(v(go),U(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),It(()=>{this.componentLoaders.delete(t)})),o=new Dr(n,()=>new oe).pipe(xr());return this.componentLoaders.set(t,o),o}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return p({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=ia(n,this.compiler,t,this.onLoadEndListener).pipe(It(()=>{this.childrenLoaders.delete(n)})),a=new Dr(s,()=>new oe).pipe(xr());return this.childrenLoaders.set(n,a),a}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function ia(r,e,i,t){return pe(r.loadChildren()).pipe(v(go),N(n=>n instanceof si||Array.isArray(n)?p(n):j(e.compileModuleAsync(n))),v(n=>{t&&t(r);let o,s,a=!1;return Array.isArray(n)?(s=n,a=!0):(o=n.create(i).injector,s=o.get(ir,[],{optional:!0,self:!0}).flat()),{routes:s.map(Tn),injector:o}}))}function oa(r){return r&&typeof r=="object"&&"default"in r}function go(r){return oa(r)?r.default:r}var xn=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:()=>f(sa),providedIn:"root"});let r=e;return r})(),sa=(()=>{let e=class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),mo=new V(""),vo=new V("");function aa(r,e,i){let t=r.get(vo),n=r.get(Ht);return r.get(xe).runOutsideAngular(()=>{if(!n.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=n.startViewTransition(()=>(o(),ca(r))),{onViewTransitionCreated:l}=t;return l&&le(r,()=>l({transition:a,from:e,to:i})),s})}function ca(r){return new Promise(e=>{ni(e,{injector:r})})}var Dn=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new oe,this.transitionAbortSubject=new oe,this.configLoader=f(En),this.environmentInjector=f(Ge),this.urlSerializer=f(ft),this.rootContexts=f(gt),this.location=f(Xe),this.inputBindingEnabled=f(sr,{optional:!0})!==null,this.titleStrategy=f(fo),this.options=f(bt,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=f(xn),this.createViewTransition=f(mo,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>p(void 0),this.rootComponentType=null;let t=o=>this.events.next(new an(o)),n=o=>this.events.next(new cn(o));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let n=++this.navigationId;this.transitions?.next(D(d(d({},this.transitions.value),t),{id:n}))}setupNavigations(t,n,o){return this.transitions=new L({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:nt,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Z(s=>s.id!==0),v(s=>D(d({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),F(s=>{let a=!1,l=!1;return p(s).pipe(F(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",B.SupersededByNewNavigation),ae;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?D(d({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&m!=="reload"){let C="";return this.events.next(new de(c.id,this.urlSerializer.serialize(c.rawUrl),C,Jt.IgnoredSameUrlNavigation)),c.resolve(null),ae}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return p(c).pipe(F(C=>{let E=this.transitions?.getValue();return this.events.next(new je(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),E!==this.transitions?.getValue()?ae:Promise.resolve(C)}),Xs(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),U(C=>{s.targetSnapshot=C.targetSnapshot,s.urlAfterRedirects=C.urlAfterRedirects,this.currentNavigation=D(d({},this.currentNavigation),{finalUrl:C.urlAfterRedirects});let E=new Zt(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(E)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:C,extractedUrl:E,source:Be,restoredState:qe,extras:Er}=c,ve=new je(C,this.urlSerializer.serialize(E),Be,qe);this.events.next(ve);let Uo=ro(this.rootComponentType).snapshot;return this.currentTransition=s=D(d({},c),{targetSnapshot:Uo,urlAfterRedirects:E,extras:D(d({},Er),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,p(s)}else{let C="";return this.events.next(new de(c.id,this.urlSerializer.serialize(c.extractedUrl),C,Jt.IgnoredByUrlHandlingStrategy)),c.resolve(null),ae}}),U(c=>{let u=new rn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),v(c=>(this.currentTransition=s=D(d({},c),{guards:ms(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),Ts(this.environmentInjector,c=>this.events.next(c)),U(c=>{if(s.guardsResult=c.guardsResult,Le(c.guardsResult))throw so(this.urlSerializer,c.guardsResult);let u=new nn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Z(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",B.GuardRejected),!1)),Jr(c=>{if(c.guards.canActivateChecks.length)return p(c).pipe(U(u=>{let m=new on(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}),F(u=>{let m=!1;return p(u).pipe(Ys(this.paramsInheritanceStrategy,this.environmentInjector),U({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(u,"",B.NoDataFromResolver)}}))}),U(u=>{let m=new sn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}))}),Jr(c=>{let u=m=>{let C=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(m.routeConfig).pipe(U(E=>{m.component=E}),v(()=>{})));for(let E of m.children)C.push(...u(E));return C};return Rt(u(c.targetSnapshot.root)).pipe(Pr(null),H(1))}),Jr(()=>this.afterPreactivation()),F(()=>{let{currentSnapshot:c,targetSnapshot:u}=s,m=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return m?j(m).pipe(v(()=>s)):p(s)}),v(c=>{let u=cs(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=D(d({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),U(()=>{this.events.next(new ct)}),gs(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),H(1),U({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Q(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),qn(this.transitionAbortSubject.pipe(U(c=>{throw c}))),It(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",B.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ne(c=>{if(l=!0,co(c))this.events.next(new ue(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),us(c)?this.events.next(new lt(c.url)):s.resolve(!1);else{this.events.next(new at(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return ae}))}))}cancelNavigationTransition(t,n,o){let s=new ue(t.id,this.urlSerializer.serialize(t.extractedUrl),n,o);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function la(r){return r!==nt}var ha=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:()=>f(ua),providedIn:"root"});let r=e;return r})(),Sn=class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}},ua=(()=>{let e=class e extends Sn{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=Lr(e)))(o||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),bo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:()=>f(da),providedIn:"root"});let r=e;return r})(),da=(()=>{let e=class e extends bo{constructor(){super(...arguments),this.location=f(Xe),this.urlSerializer=f(ft),this.options=f(bt,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=f(xn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new he,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ro(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(n=>{n.type==="popstate"&&t(n.url,n.state)})}handleRouterEvent(t,n){if(t instanceof je)this.stateMemento=this.createStateMemento();else if(t instanceof de)this.rawUrlTree=n.initialUrl;else if(t instanceof Zt){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(o,n)}}else t instanceof ct?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):t instanceof ue&&(t.code===B.GuardRejected||t.code===B.NoDataFromResolver)?this.restoreHistory(n):t instanceof at?this.restoreHistory(n,!0):t instanceof Q&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,n){let o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||n.extras.replaceUrl){let s=this.browserPageId,a=d(d({},n.extras.state),this.generateNgRouterState(n.id,s));this.location.replaceState(o,"",a)}else{let s=d(d({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(t,n=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=Lr(e)))(o||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),tt=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(tt||{});function Co(r,e){r.events.pipe(Z(i=>i instanceof Q||i instanceof ue||i instanceof at||i instanceof de),v(i=>i instanceof Q||i instanceof de?tt.COMPLETE:(i instanceof ue?i.code===B.Redirect||i.code===B.SupersededByNewNavigation:!1)?tt.REDIRECTING:tt.FAILED),Z(i=>i!==tt.REDIRECTING),H(1)).subscribe(()=>{e()})}function pa(r){throw r}var fa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ga={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},J=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=f(mi),this.stateManager=f(bo),this.options=f(bt,{optional:!0})||{},this.pendingTasks=f(ai),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=f(Dn),this.urlSerializer=f(ft),this.location=f(Xe),this.urlHandlingStrategy=f(xn),this._events=new oe,this.errorHandler=this.options.errorHandler||pa,this.navigated=!1,this.routeReuseStrategy=f(ha),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=f(ir,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!f(sr,{optional:!0}),this.eventsSubscription=new On,this.isNgZoneEnabled=f(xe)instanceof xe&&xe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(n=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof ue&&n.code!==B.Redirect&&n.code!==B.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Q)this.navigated=!0;else if(n instanceof lt){let a=this.urlHandlingStrategy.merge(n.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||la(o.source)};this.scheduleNavigation(a,nt,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}va(n)&&this._events.next(n)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),nt,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",n)},0)})}navigateToSyncWithBrowser(t,n,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=d({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(t);this.scheduleNavigation(l,n,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Tn),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,n={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=n,u=c?this.currentUrlTree.fragment:a,m=null;switch(l){case"merge":m=d(d({},this.currentUrlTree.queryParams),s);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=s||null}m!==null&&(m=this.removeEmptyProps(m));let C;try{let E=o?o.snapshot:this.routerState.snapshot.root;C=Xi(E)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),C=this.currentUrlTree.root}return Yi(C,t,m,u??null)}navigateByUrl(t,n={skipLocationChange:!1}){let o=Le(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,nt,null,n)}navigate(t,n={skipLocationChange:!1}){return ma(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,n){let o;if(n===!0?o=d({},fa):n===!1?o=d({},ga):o=n,Le(t))return Ai(this.currentUrlTree,t,o);let s=this.parseUrl(t);return Ai(this.currentUrlTree,s,o)}removeEmptyProps(t){return Object.entries(t).reduce((n,[o,s])=>(s!=null&&(n[o]=s),n),{})}scheduleNavigation(t,n,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((C,E)=>{l=C,c=E});let m=this.pendingTasks.add();return Co(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(C=>Promise.reject(C))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function ma(r){for(let e=0;e<r.length;e++)if(r[e]==null)throw new $(4008,!1)}function va(r){return!(r instanceof ct)&&!(r instanceof lt)}var Ni=(()=>{let e=class e{constructor(t,n,o,s,a,l){this.router=t,this.route=n,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new oe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Q&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t!=null?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,n,o,s,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||n||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let n=this.href===null?null:ei(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(t,n){let o=this.renderer,s=this.el.nativeElement;n!==null?o.setAttribute(s,t,n):o.removeAttribute(s,t)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(n){return new(n||e)(z(J),z(Se),Xn("tabindex"),z(Hr),z(Nr),z(Ze))},e.\u0275dir=Et({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,o){n&1&&Qe("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),n&2&&At("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Tt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Nt],skipLocationChange:[Tt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Nt],replaceUrl:[Tt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Nt],routerLink:"routerLink"},standalone:!0,features:[oi,xt]});let r=e;return r})(),Sc=(()=>{let e=class e{get isActive(){return this._isActive}constructor(t,n,o,s,a){this.router=t,this.element=n,this.renderer=o,this.cdr=s,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ee,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof Q&&this.update()})}ngAfterContentInit(){p(this.links.changes,p(null)).pipe(Ve()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=j(t).pipe(Ve()).subscribe(n=>{this._isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(t){let n=Array.isArray(t)?t:t.split(" ");this.classes=n.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(n=>{t?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){let n=ba(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let s=o.urlTree;return s?t.isActive(s,n):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}};e.\u0275fac=function(n){return new(n||e)(z(J),z(Nr),z(Hr),z(jt),z(Ni,8))},e.\u0275dir=Et({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(n,o,s){if(n&1&&ui(s,Ni,5),n&2){let a;di(a=pi())&&(o.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[xt]});let r=e;return r})();function ba(r){return!!r.paths}var or=class{},Rc=(()=>{let e=class e{preload(t,n){return n().pipe(ne(()=>p(null)))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var Ca=(()=>{let e=class e{constructor(t,n,o,s,a){this.router=t,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Z(t=>t instanceof Q),ke(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){let o=[];for(let s of n){s.providers&&!s._injector&&(s._injector=Fr(s.providers,t,`Route: ${s.path}`));let a=s._injector??t,l=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(l,s.children??s._loadedRoutes))}return j(o).pipe(Ve())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let o;n.loadChildren&&n.canLoad===void 0?o=this.loader.loadChildren(t,n):o=p(null);let s=o.pipe(N(a=>a===null?p(void 0):(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(n.loadComponent&&!n._loadedComponent){let a=this.loader.loadComponent(n);return j([s,a]).pipe(Ve())}else return s})}};e.\u0275fac=function(n){return new(n||e)(T(J),T(Lt),T(Ge),T(or),T(En))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),yo=new V(""),ya=(()=>{let e=class e{constructor(t,n,o,s,a={}){this.urlSerializer=t,this.transitions=n,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof je?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Q?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof de&&t.code===Jt.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xt&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xt(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(n){ti()},e.\u0275prov=S({token:e,factory:e.\u0275fac});let r=e;return r})();function wa(r){return r.routerState.root}function Ct(r,e){return{\u0275kind:r,\u0275providers:e}}function _a(){let r=f(jr);return e=>{let i=r.get(Ci);if(e!==i.components[0])return;let t=r.get(J),n=r.get(wo);r.get(Un)===1&&t.initialNavigation(),r.get(_o,null,Mr.Optional)?.setUpPreloading(),r.get(yo,null,Mr.Optional)?.init(),t.resetRootComponentType(i.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var wo=new V("",{factory:()=>new oe}),Un=new V("",{providedIn:"root",factory:()=>1});function Sa(){return Ct(2,[{provide:Un,useValue:0},{provide:qr,multi:!0,deps:[jr],useFactory:e=>{let i=e.get(wi,Promise.resolve());return()=>i.then(()=>new Promise(t=>{let n=e.get(J),o=e.get(wo);Co(n,()=>{t(!0)}),e.get(Dn).afterPreactivation=()=>(t(!0),o.closed?p(void 0):o),n.initialNavigation()}))}}])}function Ra(){return Ct(3,[{provide:qr,multi:!0,useFactory:()=>{let e=f(J);return()=>{e.setUpLocationChangeListener()}}},{provide:Un,useValue:2}])}var _o=new V("");function Ia(r){return Ct(0,[{provide:_o,useExisting:Ca},{provide:or,useExisting:r}])}function Ta(){return Ct(8,[Li,{provide:sr,useExisting:Li}])}function ka(r){let e=[{provide:mo,useValue:aa},{provide:vo,useValue:d({skipNextTransition:!!r?.skipInitialTransition},r)}];return Ct(9,e)}var Hi=new V("ROUTER_FORROOT_GUARD"),Ea=[Xe,{provide:ft,useClass:ot},J,gt,{provide:Se,useFactory:wa,deps:[J]},En,[]],Ic=(()=>{let e=class e{constructor(t){}static forRoot(t,n){return{ngModule:e,providers:[Ea,[],{provide:ir,multi:!0,useValue:t},{provide:Hi,useFactory:Pa,deps:[[J,new Kn,new Qn]]},{provide:bt,useValue:n||{}},n?.useHash?Da():Ua(),xa(),n?.preloadingStrategy?Ia(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?Aa(n):[],n?.bindToComponentInputs?Ta().\u0275providers:[],n?.enableViewTransitions?ka().\u0275providers:[],Ma()]}}static forChild(t){return{ngModule:e,providers:[{provide:ir,multi:!0,useValue:t}]}}};e.\u0275fac=function(n){return new(n||e)(T(Hi,8))},e.\u0275mod=Jn({type:e}),e.\u0275inj=Vn({});let r=e;return r})();function xa(){return{provide:yo,useFactory:()=>{let r=f(ki),e=f(xe),i=f(bt),t=f(Dn),n=f(ft);return i.scrollOffset&&r.setOffset(i.scrollOffset),new ya(n,t,r,e,i)}}}function Da(){return{provide:Ze,useClass:Si}}function Ua(){return{provide:Ze,useClass:_i}}function Pa(r){return"guarded"}function Aa(r){return[r.initialNavigation==="disabled"?Ra().\u0275providers:[],r.initialNavigation==="enabledBlocking"?Sa().\u0275providers:[]]}var Fi=new V("");function Ma(){return[{provide:Fi,useFactory:_a},{provide:bi,multi:!0,useExisting:Fi}]}var K=class extends Error{constructor(e,i){let t=new.target.prototype;super(`${e}: Status code '${i}'`),this.statusCode=i,this.__proto__=t}},fe=class extends Error{constructor(e="A timeout occurred."){let i=new.target.prototype;super(e),this.__proto__=i}},A=class extends Error{constructor(e="An abort occurred."){let i=new.target.prototype;super(e),this.__proto__=i}},cr=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=t}},lr=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=t}},hr=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=t}},ur=class extends Error{constructor(e){let i=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}},dr=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.innerErrors=i,this.__proto__=t}};var ze=class{constructor(e,i,t){this.statusCode=e,this.statusText=i,this.content=t}},ee=class{get(e,i){return this.send(D(d({},i),{method:"GET",url:e}))}post(e,i){return this.send(D(d({},i),{method:"POST",url:e}))}delete(e,i){return this.send(D(d({},i),{method:"DELETE",url:e}))}getCookieString(e){return""}};var h=function(r){return r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None",r}(h||{});var te=class{constructor(){}log(e,i){}};te.instance=new te;var Oa="7.0.12",R=class{static isRequired(e,i){if(e==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(e,i){if(!e||e.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(e,i,t){if(!(e in i))throw new Error(`Unknown ${t} value: ${e}.`)}},I=class{static get isBrowser(){return typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return typeof self=="object"&&"importScripts"in self}static get isReactNative(){return typeof window=="object"&&typeof window.document>"u"}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}};function ge(r,e){let i="";return me(r)?(i=`Binary data of length ${r.byteLength}`,e&&(i+=`. Content: '${La(r)}'`)):typeof r=="string"&&(i=`String data of length ${r.length}`,e&&(i+=`. Content: '${r}'`)),i}function La(r){let e=new Uint8Array(r),i="";return e.forEach(t=>{let n=t<16?"0":"";i+=`0x${n}${t.toString(16)} `}),i.substr(0,i.length-1)}function me(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function fr(r,e,i,t,n,o){return y(this,null,function*(){let s={},[a,l]=re();s[a]=l,r.log(h.Trace,`(${e} transport) sending data. ${ge(n,o.logMessageContent)}.`);let c=me(n)?"arraybuffer":"text",u=yield i.post(t,{content:n,headers:d(d({},s),o.headers),responseType:c,timeout:o.timeout,withCredentials:o.withCredentials});r.log(h.Trace,`(${e} transport) request complete. Response status: ${u.statusCode}.`)})}function So(r){return r===void 0?new Re(h.Information):r===null?te.instance:r.log!==void 0?r:new Re(r)}var pr=class{constructor(e,i){this._subject=e,this._observer=i}dispose(){let e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}},Re=class{constructor(e){this._minLevel=e,this.out=console}log(e,i){if(e>=this._minLevel){let t=`[${new Date().toISOString()}] ${h[e]}: ${i}`;switch(e){case h.Critical:case h.Error:this.out.error(t);break;case h.Warning:this.out.warn(t);break;case h.Information:this.out.info(t);break;default:this.out.log(t);break}}}};function re(){let r="X-SignalR-User-Agent";return I.isNode&&(r="User-Agent"),[r,ja(Oa,Na(),Fa(),Ha())]}function ja(r,e,i,t){let n="Microsoft SignalR/",o=r.split(".");return n+=`${o[0]}.${o[1]}`,n+=` (${r}; `,e&&e!==""?n+=`${e}; `:n+="Unknown OS; ",n+=`${i}`,t?n+=`; ${t}`:n+="; Unknown Runtime Version",n+=")",n}function Na(){if(I.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function Ha(){if(I.isNode)return process.versions.node}function Fa(){return I.isNode?"NodeJS":"Browser"}function Pn(r){return r.stack?r.stack:r.message?r.message:`${r}`}function Ro(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var gr=class extends ee{constructor(e){if(super(),this._logger=e,typeof fetch>"u"){let i=typeof __webpack_require__=="function"?__non_webpack_require__:Te;this._jar=new(i("tough-cookie")).CookieJar,this._fetchType=i("node-fetch"),this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Ro());if(typeof AbortController>"u"){let i=typeof __webpack_require__=="function"?__non_webpack_require__:Te;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}send(e){return y(this,null,function*(){if(e.abortSignal&&e.abortSignal.aborted)throw new A;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");let i=new this._abortControllerType,t;e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),t=new A});let n=null;if(e.timeout){let l=e.timeout;n=setTimeout(()=>{i.abort(),this._logger.log(h.Warning,"Timeout from HTTP request."),t=new fe},l)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},me(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let o;try{o=yield this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:d({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(l){throw t||(this._logger.log(h.Warning,`Error from HTTP request. ${l}.`),l)}finally{n&&clearTimeout(n),e.abortSignal&&(e.abortSignal.onabort=null)}if(!o.ok){let l=yield Io(o,"text");throw new K(l||o.statusText,o.status)}let a=yield Io(o,e.responseType);return new ze(o.status,o.statusText,a)})}getCookieString(e){let i="";return I.isNode&&this._jar&&this._jar.getCookies(e,(t,n)=>i=n.join("; ")),i}};function Io(r,e){let i;switch(e){case"arraybuffer":i=r.arrayBuffer();break;case"text":i=r.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:i=r.text();break}return i}var mr=class extends ee{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new A):e.method?e.url?new Promise((i,t)=>{let n=new XMLHttpRequest;n.open(e.method,e.url,!0),n.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(me(e.content)?n.setRequestHeader("Content-Type","application/octet-stream"):n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let o=e.headers;o&&Object.keys(o).forEach(s=>{n.setRequestHeader(s,o[s])}),e.responseType&&(n.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{n.abort(),t(new A)}),e.timeout&&(n.timeout=e.timeout),n.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),n.status>=200&&n.status<300?i(new ze(n.status,n.statusText,n.response||n.responseText)):t(new K(n.response||n.responseText||n.statusText,n.status))},n.onerror=()=>{this._logger.log(h.Warning,`Error from HTTP request. ${n.status}: ${n.statusText}.`),t(new K(n.statusText,n.status))},n.ontimeout=()=>{this._logger.log(h.Warning,"Timeout from HTTP request."),t(new fe)},n.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var vr=class extends ee{constructor(e){if(super(),typeof fetch<"u"||I.isNode)this._httpClient=new gr(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new mr(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new A):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}};var q=class r{static write(e){return`${e}${r.RecordSeparator}`}static parse(e){if(e[e.length-1]!==r.RecordSeparator)throw new Error("Message is incomplete.");let i=e.split(r.RecordSeparator);return i.pop(),i}};q.RecordSeparatorCode=30;q.RecordSeparator=String.fromCharCode(q.RecordSeparatorCode);var br=class{writeHandshakeRequest(e){return q.write(JSON.stringify(e))}parseHandshakeResponse(e){let i,t;if(me(e)){let a=new Uint8Array(e),l=a.indexOf(q.RecordSeparatorCode);if(l===-1)throw new Error("Message is incomplete.");let c=l+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,c))),t=a.byteLength>c?a.slice(c).buffer:null}else{let a=e,l=a.indexOf(q.RecordSeparator);if(l===-1)throw new Error("Message is incomplete.");let c=l+1;i=a.substring(0,c),t=a.length>c?a.substring(c):null}let n=q.parse(i),o=JSON.parse(n[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[t,o]}};var _=function(r){return r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r}(_||{});var Cr=class{constructor(){this.observers=[]}next(e){for(let i of this.observers)i.next(e)}error(e){for(let i of this.observers)i.error&&i.error(e)}complete(){for(let e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new pr(this,e)}};var za=30*1e3,Wa=15*1e3,k=function(r){return r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting",r}(k||{}),yr=class r{constructor(e,i,t,n){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(h.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},R.isRequired(e,"connection"),R.isRequired(i,"logger"),R.isRequired(t,"protocol"),this.serverTimeoutInMilliseconds=za,this.keepAliveIntervalInMilliseconds=Wa,this._logger=i,this._protocol=t,this.connection=e,this._reconnectPolicy=n,this._handshakeProtocol=new br,this.connection.onreceive=o=>this._processIncomingData(o),this.connection.onclose=o=>this._connectionClosed(o),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=k.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:_.Ping})}static create(e,i,t,n){return new r(e,i,t,n)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==k.Disconnected&&this._connectionState!==k.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return y(this,null,function*(){if(this._connectionState!==k.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=k.Connecting,this._logger.log(h.Debug,"Starting HubConnection.");try{yield this._startInternal(),I.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=k.Connected,this._connectionStarted=!0,this._logger.log(h.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=k.Disconnected,this._logger.log(h.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})}_startInternal(){return y(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let e=new Promise((i,t)=>{this._handshakeResolver=i,this._handshakeRejecter=t});yield this.connection.start(this._protocol.transferFormat);try{let i={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(h.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(i)),this._logger.log(h.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield e,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(i){throw this._logger.log(h.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(i),i}})}stop(){return y(this,null,function*(){let e=this._startPromise;this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield e}catch{}})}_stopInternal(e){return this._connectionState===k.Disconnected?(this._logger.log(h.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve()):this._connectionState===k.Disconnecting?(this._logger.log(h.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState=k.Disconnecting,this._logger.log(h.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(h.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new A("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))}stream(e,...i){let[t,n]=this._replaceStreamingParams(i),o=this._createStreamInvocation(e,i,n),s,a=new Cr;return a.cancelCallback=()=>{let l=this._createCancelInvocation(o.invocationId);return delete this._callbacks[o.invocationId],s.then(()=>this._sendWithProtocol(l))},this._callbacks[o.invocationId]=(l,c)=>{if(c){a.error(c);return}else l&&(l.type===_.Completion?l.error?a.error(new Error(l.error)):a.complete():a.next(l.item))},s=this._sendWithProtocol(o).catch(l=>{a.error(l),delete this._callbacks[o.invocationId]}),this._launchStreams(t,s),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._sendMessage(this._protocol.writeMessage(e))}send(e,...i){let[t,n]=this._replaceStreamingParams(i),o=this._sendWithProtocol(this._createInvocation(e,i,!0,n));return this._launchStreams(t,o),o}invoke(e,...i){let[t,n]=this._replaceStreamingParams(i),o=this._createInvocation(e,i,!1,n);return new Promise((a,l)=>{this._callbacks[o.invocationId]=(u,m)=>{if(m){l(m);return}else u&&(u.type===_.Completion?u.error?l(new Error(u.error)):a(u.result):l(new Error(`Unexpected message type: ${u.type}`)))};let c=this._sendWithProtocol(o).catch(u=>{l(u),delete this._callbacks[o.invocationId]});this._launchStreams(t,c)})}on(e,i){!e||!i||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(i)===-1&&this._methods[e].push(i))}off(e,i){if(!e)return;e=e.toLowerCase();let t=this._methods[e];if(t)if(i){let n=t.indexOf(i);n!==-1&&(t.splice(n,1),t.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){let i=this._protocol.parseMessages(e,this._logger);for(let t of i)switch(t.type){case _.Invocation:this._invokeClientMethod(t);break;case _.StreamItem:case _.Completion:{let n=this._callbacks[t.invocationId];if(n){t.type===_.Completion&&delete this._callbacks[t.invocationId];try{n(t)}catch(o){this._logger.log(h.Error,`Stream callback threw error: ${Pn(o)}`)}}break}case _.Ping:break;case _.Close:{this._logger.log(h.Information,"Close message received from server.");let n=t.error?new Error("Server returned an error on close: "+t.error):void 0;t.allowReconnect===!0?this.connection.stop(n):this._stopPromise=this._stopInternal(n);break}default:this._logger.log(h.Warning,`Invalid message type: ${t.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let i,t;try{[t,i]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(n){let o="Error parsing handshake response: "+n;this._logger.log(h.Error,o);let s=new Error(o);throw this._handshakeRejecter(s),s}if(i.error){let n="Server returned handshake error: "+i.error;this._logger.log(h.Error,n);let o=new Error(n);throw this._handshakeRejecter(o),o}else this._logger.log(h.Debug,"Server handshake complete.");return this._handshakeResolver(),t}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(()=>y(this,null,function*(){if(this._connectionState===k.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(e){return y(this,null,function*(){let i=e.target.toLowerCase(),t=this._methods[i];if(!t){this._logger.log(h.Warning,`No client method with the name '${i}' found.`),e.invocationId&&(this._logger.log(h.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}let n=t.slice(),o=!!e.invocationId,s,a,l;for(let c of n)try{let u=s;s=yield c.apply(this,e.arguments),o&&s&&u&&(this._logger.log(h.Error,`Multiple results provided for '${i}'. Sending error to server.`),l=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(u){a=u,this._logger.log(h.Error,`A callback for the method '${i}' threw error '${u}'.`)}l?yield this._sendWithProtocol(l):o?(a?l=this._createCompletionMessage(e.invocationId,`${a}`,null):s!==void 0?l=this._createCompletionMessage(e.invocationId,null,s):(this._logger.log(h.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),l=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(l)):s&&this._logger.log(h.Error,`Result given for '${i}' method but server is not expecting a result.`)})}_connectionClosed(e){this._logger.log(h.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new A("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===k.Disconnecting?this._completeClose(e):this._connectionState===k.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===k.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=k.Disconnected,this._connectionStarted=!1,I.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[e]))}catch(i){this._logger.log(h.Error,`An onclose callback called with error '${e}' threw error '${i}'.`)}}}_reconnect(e){return y(this,null,function*(){let i=Date.now(),t=0,n=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),o=this._getNextRetryDelay(t++,0,n);if(o===null){this._logger.log(h.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=k.Reconnecting,e?this._logger.log(h.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(h.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(s=>s.apply(this,[e]))}catch(s){this._logger.log(h.Error,`An onreconnecting callback called with error '${e}' threw error '${s}'.`)}if(this._connectionState!==k.Reconnecting){this._logger.log(h.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;o!==null;){if(this._logger.log(h.Information,`Reconnect attempt number ${t} will start in ${o} ms.`),yield new Promise(s=>{this._reconnectDelayHandle=setTimeout(s,o)}),this._reconnectDelayHandle=void 0,this._connectionState!==k.Reconnecting){this._logger.log(h.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=k.Connected,this._logger.log(h.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(s=>s.apply(this,[this.connection.connectionId]))}catch(s){this._logger.log(h.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${s}'.`)}return}catch(s){if(this._logger.log(h.Information,`Reconnect attempt failed because of error '${s}'.`),this._connectionState!==k.Reconnecting){this._logger.log(h.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===k.Disconnecting&&this._completeClose();return}n=s instanceof Error?s:new Error(s.toString()),o=this._getNextRetryDelay(t++,Date.now()-i,n)}}this._logger.log(h.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${t} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(e,i,t){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:e,retryReason:t})}catch(n){return this._logger.log(h.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${i}) threw error '${n}'.`),null}}_cancelCallbacksWithError(e){let i=this._callbacks;this._callbacks={},Object.keys(i).forEach(t=>{let n=i[t];try{n(null,e)}catch(o){this._logger.log(h.Error,`Stream 'error' callback called with '${e}' threw error: ${Pn(o)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,i,t,n){if(t)return n.length!==0?{arguments:i,streamIds:n,target:e,type:_.Invocation}:{arguments:i,target:e,type:_.Invocation};{let o=this._invocationId;return this._invocationId++,n.length!==0?{arguments:i,invocationId:o.toString(),streamIds:n,target:e,type:_.Invocation}:{arguments:i,invocationId:o.toString(),target:e,type:_.Invocation}}}_launchStreams(e,i){if(e.length!==0){i||(i=Promise.resolve());for(let t in e)e[t].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(t)))},error:n=>{let o;n instanceof Error?o=n.message:n&&n.toString?o=n.toString():o="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(t,o)))},next:n=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(t,n)))}})}}_replaceStreamingParams(e){let i=[],t=[];for(let n=0;n<e.length;n++){let o=e[n];if(this._isObservable(o)){let s=this._invocationId;this._invocationId++,i[s]=o,t.push(s.toString()),e.splice(n,1)}}return[i,t]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,i,t){let n=this._invocationId;return this._invocationId++,t.length!==0?{arguments:i,invocationId:n.toString(),streamIds:t,target:e,type:_.StreamInvocation}:{arguments:i,invocationId:n.toString(),target:e,type:_.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:_.CancelInvocation}}_createStreamItemMessage(e,i){return{invocationId:e,item:i,type:_.StreamItem}}_createCompletionMessage(e,i,t){return i?{error:i,invocationId:e,type:_.Completion}:{invocationId:e,result:t,type:_.Completion}}};var Ba=[0,2e3,1e4,3e4,null],yt=class{constructor(e){this._retryDelays=e!==void 0?[...e,null]:Ba}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}};var Ie=(()=>{class r{}return r.Authorization="Authorization",r.Cookie="Cookie",r})();var wr=class extends ee{constructor(e,i){super(),this._innerClient=e,this._accessTokenFactory=i}send(e){return y(this,null,function*(){let i=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(e);let t=yield this._innerClient.send(e);return i&&t.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(e),yield this._innerClient.send(e)):t})}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[Ie.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[Ie.Authorization]&&delete e.headers[Ie.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}};var M=function(r){return r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling",r}(M||{}),x=function(r){return r[r.Text=1]="Text",r[r.Binary=2]="Binary",r}(x||{});var _r=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var wt=class{constructor(e,i,t){this._httpClient=e,this._logger=i,this._pollAbort=new _r,this._options=t,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}connect(e,i){return y(this,null,function*(){if(R.isRequired(e,"url"),R.isRequired(i,"transferFormat"),R.isIn(i,x,"transferFormat"),this._url=e,this._logger.log(h.Trace,"(LongPolling transport) Connecting."),i===x.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[t,n]=re(),o=d({[t]:n},this._options.headers),s={abortSignal:this._pollAbort.signal,headers:o,timeout:1e5,withCredentials:this._options.withCredentials};i===x.Binary&&(s.responseType="arraybuffer");let a=`${e}&_=${Date.now()}`;this._logger.log(h.Trace,`(LongPolling transport) polling: ${a}.`);let l=yield this._httpClient.get(a,s);l.statusCode!==200?(this._logger.log(h.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new K(l.statusText||"",l.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,s)})}_poll(e,i){return y(this,null,function*(){try{for(;this._running;)try{let t=`${e}&_=${Date.now()}`;this._logger.log(h.Trace,`(LongPolling transport) polling: ${t}.`);let n=yield this._httpClient.get(t,i);n.statusCode===204?(this._logger.log(h.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):n.statusCode!==200?(this._logger.log(h.Error,`(LongPolling transport) Unexpected response code: ${n.statusCode}.`),this._closeError=new K(n.statusText||"",n.statusCode),this._running=!1):n.content?(this._logger.log(h.Trace,`(LongPolling transport) data received. ${ge(n.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(n.content)):this._logger.log(h.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(t){this._running?t instanceof fe?this._logger.log(h.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=t,this._running=!1):this._logger.log(h.Trace,`(LongPolling transport) Poll errored after shutdown: ${t.message}`)}}finally{this._logger.log(h.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(e){return y(this,null,function*(){return this._running?fr(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return y(this,null,function*(){this._logger.log(h.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(h.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let e={},[i,t]=re();e[i]=t;let n={headers:d(d({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials};yield this._httpClient.delete(this._url,n),this._logger.log(h.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(h.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(h.Trace,e),this.onclose(this._closeError)}}};var Sr=class{constructor(e,i,t,n){this._httpClient=e,this._accessToken=i,this._logger=t,this._options=n,this.onreceive=null,this.onclose=null}connect(e,i){return y(this,null,function*(){return R.isRequired(e,"url"),R.isRequired(i,"transferFormat"),R.isIn(i,x,"transferFormat"),this._logger.log(h.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((t,n)=>{let o=!1;if(i!==x.Text){n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let s;if(I.isBrowser||I.isWebWorker)s=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{let a=this._httpClient.getCookieString(e),l={};l.Cookie=a;let[c,u]=re();l[c]=u,s=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:d(d({},l),this._options.headers)})}try{s.onmessage=a=>{if(this.onreceive)try{this._logger.log(h.Trace,`(SSE transport) data received. ${ge(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(l){this._close(l);return}},s.onerror=a=>{o?this._close():n(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},s.onopen=()=>{this._logger.log(h.Information,`SSE connected to ${this._url}`),this._eventSource=s,o=!0,t()}}catch(a){n(a);return}})})}send(e){return y(this,null,function*(){return this._eventSource?fr(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}};var Rr=class{constructor(e,i,t,n,o,s){this._logger=t,this._accessTokenFactory=i,this._logMessageContent=n,this._webSocketConstructor=o,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=s}connect(e,i){return y(this,null,function*(){R.isRequired(e,"url"),R.isRequired(i,"transferFormat"),R.isIn(i,x,"transferFormat"),this._logger.log(h.Trace,"(WebSockets transport) Connecting.");let t;return this._accessTokenFactory&&(t=yield this._accessTokenFactory()),new Promise((n,o)=>{e=e.replace(/^http/,"ws");let s,a=this._httpClient.getCookieString(e),l=!1;if(I.isNode||I.isReactNative){let c={},[u,m]=re();c[u]=m,t&&(c[Ie.Authorization]=`Bearer ${t}`),a&&(c[Ie.Cookie]=a),s=new this._webSocketConstructor(e,void 0,{headers:d(d({},c),this._headers)})}else t&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(t)}`);s||(s=new this._webSocketConstructor(e)),i===x.Binary&&(s.binaryType="arraybuffer"),s.onopen=c=>{this._logger.log(h.Information,`WebSocket connected to ${e}.`),this._webSocket=s,l=!0,n()},s.onerror=c=>{let u=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?u=c.error:u="There was an error with the transport",this._logger.log(h.Information,`(WebSockets transport) ${u}.`)},s.onmessage=c=>{if(this._logger.log(h.Trace,`(WebSockets transport) data received. ${ge(c.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(c.data)}catch(u){this._close(u);return}},s.onclose=c=>{if(l)this._close(c);else{let u=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?u=c.error:u="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(u))}}})})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(h.Trace,`(WebSockets transport) sending data. ${ge(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(h.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}};var To=100,Ir=class{constructor(e,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,R.isRequired(e,"url"),this._logger=So(i.logger),this.baseUrl=this._resolveUrl(e),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let t=null,n=null;if(I.isNode&&typeof Te<"u"){let o=typeof __webpack_require__=="function"?__non_webpack_require__:Te;t=o("ws"),n=o("eventsource")}!I.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:I.isNode&&!i.WebSocket&&t&&(i.WebSocket=t),!I.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:I.isNode&&!i.EventSource&&typeof n<"u"&&(i.EventSource=n),this._httpClient=new wr(i.httpClient||new vr(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}start(e){return y(this,null,function*(){if(e=e||x.Binary,R.isIn(e,x,"transferFormat"),this._logger.log(h.Debug,`Starting connection with transfer format '${x[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(h.Error,i),yield this._stopPromise,Promise.reject(new A(i))}else if(this._connectionState!=="Connected"){let i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(h.Error,i),Promise.reject(new A(i))}this._connectionStarted=!0})}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new An(this.transport)),this._sendQueue.send(e))}stop(e){return y(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(h.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(h.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),yield this._stopInternal(e),yield this._stopPromise})}_stopInternal(e){return y(this,null,function*(){this._stopError=e;try{yield this._startInternalPromise}catch{}if(this.transport){try{yield this.transport.stop()}catch(i){this._logger.log(h.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(h.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(e){return y(this,null,function*(){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===M.WebSockets)this.transport=this._constructTransport(M.WebSockets),yield this._startTransport(i,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let t=null,n=0;do{if(t=yield this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new A("The connection was stopped during negotiation.");if(t.error)throw new Error(t.error);if(t.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(t.url&&(i=t.url),t.accessToken){let o=t.accessToken;this._accessTokenFactory=()=>o,this._httpClient._accessToken=o,this._httpClient._accessTokenFactory=void 0}n++}while(t.url&&n<To);if(n===To&&t.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(i,this._options.transport,t,e)}this.transport instanceof wt&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(h.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(t){return this._logger.log(h.Error,"Failed to start the connection: "+t),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(t)}})}_getNegotiationResponse(e){return y(this,null,function*(){let i={},[t,n]=re();i[t]=n;let o=this._resolveNegotiateUrl(e);this._logger.log(h.Debug,`Sending negotiation request: ${o}.`);try{let s=yield this._httpClient.post(o,{content:"",headers:d(d({},i),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(s.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${s.statusCode}'`));let a=JSON.parse(s.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a}catch(s){let a="Failed to complete negotiation with the server: "+s;return s instanceof K&&s.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(h.Error,a),Promise.reject(new ur(a))}})}_createConnectUrl(e,i){return i?e+(e.indexOf("?")===-1?"?":"&")+`id=${i}`:e}_createTransport(e,i,t,n){return y(this,null,function*(){let o=this._createConnectUrl(e,t.connectionToken);if(this._isITransport(i)){this._logger.log(h.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,yield this._startTransport(o,n),this.connectionId=t.connectionId;return}let s=[],a=t.availableTransports||[],l=t;for(let c of a){let u=this._resolveTransportOrError(c,i,n);if(u instanceof Error)s.push(`${c.transport} failed:`),s.push(u);else if(this._isITransport(u)){if(this.transport=u,!l){try{l=yield this._getNegotiationResponse(e)}catch(m){return Promise.reject(m)}o=this._createConnectUrl(e,l.connectionToken)}try{yield this._startTransport(o,n),this.connectionId=l.connectionId;return}catch(m){if(this._logger.log(h.Error,`Failed to start the transport '${c.transport}': ${m}`),l=void 0,s.push(new hr(`${c.transport} failed: ${m}`,M[c.transport])),this._connectionState!=="Connecting"){let C="Failed to select transport before stop() was called.";return this._logger.log(h.Debug,C),Promise.reject(new A(C))}}}}return s.length>0?Promise.reject(new dr(`Unable to connect to the server with any of the available transports. ${s.join(" ")}`,s)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(e){switch(e){case M.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Rr(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case M.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Sr(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case M.LongPolling:return new wt(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,i){return this.transport.onreceive=this.onreceive,this.transport.onclose=t=>this._stopConnection(t),this.transport.connect(e,i)}_resolveTransportOrError(e,i,t){let n=M[e.transport];if(n==null)return this._logger.log(h.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(qa(i,n))if(e.transferFormats.map(s=>x[s]).indexOf(t)>=0){if(n===M.WebSockets&&!this._options.WebSocket||n===M.ServerSentEvents&&!this._options.EventSource)return this._logger.log(h.Debug,`Skipping transport '${M[n]}' because it is not supported in your environment.'`),new cr(`'${M[n]}' is not supported in your environment.`,n);this._logger.log(h.Debug,`Selecting transport '${M[n]}'.`);try{return this._constructTransport(n)}catch(s){return s}}else return this._logger.log(h.Debug,`Skipping transport '${M[n]}' because it does not support the requested transfer format '${x[t]}'.`),new Error(`'${M[n]}' does not support ${x[t]}.`);else return this._logger.log(h.Debug,`Skipping transport '${M[n]}' because it was disabled by the client.`),new lr(`'${M[n]}' is disabled by the client.`,n)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(h.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(h.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(h.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(h.Error,`Connection disconnected with error '${e}'.`):this._logger.log(h.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(h.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(i){this._logger.log(h.Error,`HttpConnection.onclose(${e}) threw error '${i}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!I.isBrowser)throw new Error(`Cannot resolve '${e}'.`);let i=window.document.createElement("a");return i.href=e,this._logger.log(h.Information,`Normalizing '${e}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(e){let i=e.indexOf("?"),t=e.substring(0,i===-1?e.length:i);return t[t.length-1]!=="/"&&(t+="/"),t+="negotiate",t+=i===-1?"":e.substring(i),t.indexOf("negotiateVersion")===-1&&(t+=i===-1?"?":"&",t+="negotiateVersion="+this._negotiateVersion),t}};function qa(r,e){return!r||(e&r)!==0}var An=class r{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new We,this._transportResult=new We,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new We),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}_sendLoop(){return y(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new We;let e=this._transportResult;this._transportResult=void 0;let i=typeof this._buffer[0]=="string"?this._buffer.join(""):r._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(i),e.resolve()}catch(t){e.reject(t)}}})}static _concatBuffers(e){let i=e.map(o=>o.byteLength).reduce((o,s)=>o+s),t=new Uint8Array(i),n=0;for(let o of e)t.set(new Uint8Array(o),n),n+=o.byteLength;return t.buffer}},We=class{constructor(){this.promise=new Promise((e,i)=>[this._resolver,this._rejecter]=[e,i])}resolve(){this._resolver()}reject(e){this._rejecter(e)}};var Va="json",Tr=class{constructor(){this.name=Va,this.version=1,this.transferFormat=x.Text}parseMessages(e,i){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];i===null&&(i=te.instance);let t=q.parse(e),n=[];for(let o of t){let s=JSON.parse(o);if(typeof s.type!="number")throw new Error("Invalid payload.");switch(s.type){case _.Invocation:this._isInvocationMessage(s);break;case _.StreamItem:this._isStreamItemMessage(s);break;case _.Completion:this._isCompletionMessage(s);break;case _.Ping:break;case _.Close:break;default:i.log(h.Information,"Unknown message type '"+s.type+"' ignored.");continue}n.push(s)}return n}writeMessage(e){return q.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(e,i){if(typeof e!="string"||e==="")throw new Error(i)}};var Ga={trace:h.Trace,debug:h.Debug,info:h.Information,information:h.Information,warn:h.Warning,warning:h.Warning,error:h.Error,critical:h.Critical,none:h.None};function Ka(r){let e=Ga[r.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${r}`)}var _t=class{configureLogging(e){if(R.isRequired(e,"logging"),Qa(e))this.logger=e;else if(typeof e=="string"){let i=Ka(e);this.logger=new Re(i)}else this.logger=new Re(e);return this}withUrl(e,i){return R.isRequired(e,"url"),R.isNotEmpty(e,"url"),this.url=e,typeof i=="object"?this.httpConnectionOptions=d(d({},this.httpConnectionOptions),i):this.httpConnectionOptions=D(d({},this.httpConnectionOptions),{transport:i}),this}withHubProtocol(e){return R.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new yt(e):this.reconnectPolicy=e:this.reconnectPolicy=new yt,this}build(){let e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let i=new Ir(this.url,e);return yr.create(i,this.logger||te.instance,this.protocol||new Tr,this.reconnectPolicy)}};function Qa(r){return r.log!==void 0}var g=function(r){return r.UpdateAvailable="UpdateAvailable",r.ScanSeries="ScanSeries",r.SeriesAdded="SeriesAdded",r.SeriesRemoved="SeriesRemoved",r.ScanLibraryProgress="ScanLibraryProgress",r.OnlineUsers="OnlineUsers",r.SeriesAddedToCollection="SeriesAddedToCollection",r.Error="Error",r.BackupDatabaseProgress="BackupDatabaseProgress",r.CleanupProgress="CleanupProgress",r.DownloadProgress="DownloadProgress",r.NotificationProgress="NotificationProgress",r.FileScanProgress="FileScanProgress",r.SiteThemeProgress="SiteThemeProgress",r.CoverUpdate="CoverUpdate",r.CoverUpdateProgress="CoverUpdateProgress",r.LibraryModified="LibraryModified",r.UserProgressUpdate="UserProgressUpdate",r.UserUpdate="UserUpdate",r.ConvertBookmarksProgress="ConvertBookmarksProgress",r.WordCountAnalyzerProgress="WordCountAnalyzerProgress",r.Info="Info",r.SendingToDevice="SendingToDevice",r.ScrobblingKeyExpired="ScrobblingKeyExpired",r.DashboardUpdate="DashboardUpdate",r.SideNavUpdate="SideNavUpdate",r}(g||{}),kr=(()=>{let e=class e{constructor(){this.hubUrl=Ue.hubUrl,this.messagesSource=new se(1),this.onlineUsersSource=new L([]),this.messages$=this.messagesSource.asObservable(),this.onlineUsers$=this.onlineUsersSource.asObservable()}isEventType(t,n){return t.event==g.NotificationProgress?t.payload.eventType.toLowerCase()==n.toLowerCase():t.event===n}createHubConnection(t){this.hubConnection=new _t().withUrl(this.hubUrl+"messages",{accessTokenFactory:()=>t.token}).withAutomaticReconnect().build(),this.hubConnection.start().catch(n=>console.error(n)),this.hubConnection.on(g.OnlineUsers,n=>{this.onlineUsersSource.next(n)}),this.hubConnection.on(g.ScanSeries,n=>{this.messagesSource.next({event:g.ScanSeries,payload:n.body})}),this.hubConnection.on(g.ScanLibraryProgress,n=>{this.messagesSource.next({event:g.ScanLibraryProgress,payload:n.body})}),this.hubConnection.on(g.ConvertBookmarksProgress,n=>{this.messagesSource.next({event:g.ConvertBookmarksProgress,payload:n.body})}),this.hubConnection.on(g.WordCountAnalyzerProgress,n=>{this.messagesSource.next({event:g.WordCountAnalyzerProgress,payload:n.body})}),this.hubConnection.on(g.LibraryModified,n=>{this.messagesSource.next({event:g.LibraryModified,payload:n.body})}),this.hubConnection.on(g.DashboardUpdate,n=>{this.messagesSource.next({event:g.DashboardUpdate,payload:n.body})}),this.hubConnection.on(g.SideNavUpdate,n=>{this.messagesSource.next({event:g.SideNavUpdate,payload:n.body})}),this.hubConnection.on(g.NotificationProgress,n=>{this.messagesSource.next({event:g.NotificationProgress,payload:n})}),this.hubConnection.on(g.SiteThemeProgress,n=>{this.messagesSource.next({event:g.SiteThemeProgress,payload:n.body})}),this.hubConnection.on(g.SeriesAddedToCollection,n=>{this.messagesSource.next({event:g.SeriesAddedToCollection,payload:n.body})}),this.hubConnection.on(g.UserProgressUpdate,n=>{this.messagesSource.next({event:g.UserProgressUpdate,payload:n.body})}),this.hubConnection.on(g.UserUpdate,n=>{this.messagesSource.next({event:g.UserUpdate,payload:n.body})}),this.hubConnection.on(g.Error,n=>{this.messagesSource.next({event:g.Error,payload:n.body})}),this.hubConnection.on(g.Info,n=>{this.messagesSource.next({event:g.Info,payload:n.body})}),this.hubConnection.on(g.SeriesAdded,n=>{this.messagesSource.next({event:g.SeriesAdded,payload:n.body})}),this.hubConnection.on(g.SeriesRemoved,n=>{this.messagesSource.next({event:g.SeriesRemoved,payload:n.body})}),this.hubConnection.on(g.CoverUpdate,n=>{this.messagesSource.next({event:g.CoverUpdate,payload:n.body})}),this.hubConnection.on(g.UpdateAvailable,n=>{this.messagesSource.next({event:g.UpdateAvailable,payload:n.body})}),this.hubConnection.on(g.SendingToDevice,n=>{this.messagesSource.next({event:g.SendingToDevice,payload:n.body})}),this.hubConnection.on(g.ScrobblingKeyExpired,n=>{this.messagesSource.next({event:g.ScrobblingKeyExpired,payload:n.body})})}stopHubConnection(){this.hubConnection&&this.hubConnection.stop().catch(t=>console.error(t))}sendMessage(t,n){return this.hubConnection.invoke(t,n)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var Eo=(()=>{let e=class e{constructor(){this.dom=f(zt)}transform(t){return this.dom.sanitize(Ut.HTML,t)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Zn({name:"safeHtml",type:e,pure:!0,standalone:!0});let r=e;return r})();function Za(r,e){if(r&1){let i=zr();Ke(0,"button",7),Qe("click",function(){$r(i);let n=Je(2);return Or(n.close())}),De()}if(r&2){let i=Je().$implicit;At("aria-label",i("common.close"))}}function Xa(r,e){if(r&1){let i=zr();Ke(0,"div")(1,"button",8),Qe("click",function(){let n=$r(i).$implicit,o=Je(2);return Or(o.clickButton(n))}),Wr(2),De()()}if(r&2){let i=e.$implicit;Ce(),ci("btn btn-",i.type,""),Ce(),Br(i.text)}}function Ya(r,e){if(r&1&&(li(0),Ke(1,"div",1)(2,"h4",2),Wr(3),De(),Pt(4,Za,1,1,"button",3),De(),$t(5,"div",4),fi(6,"safeHtml"),Ke(7,"div",5),Pt(8,Xa,3,4,"div",6),De(),hi()),r&2){let i=Je();Ce(3),Br(i.config.header),Ce(),Mt("ngIf",!i.config.disableEscape),Ce(),Mt("innerHtml",gi(6,4,i.config.content),Yn),Ce(3),Mt("ngForOf",i.config.buttons)}}var Mn=(()=>{let e=class e{constructor(t){this.modal=t}ngOnInit(){this.config&&this.config.buttons.sort(this._button_sort)}_button_sort(t,n){let o=t.type==="secondary",s=n.type==="secondary";return o&&!s?-1:!o&&s?1:0}clickButton(t){this.modal.close(t.type==="primary")}close(){this.modal.close(!1)}};e.\u0275fac=function(n){return new(n||e)(z(Di))},e.\u0275cmp=kt({type:e,selectors:[["app-confirm-dialog"]],standalone:!0,features:[Ot],decls:1,vars:0,consts:[[4,"transloco"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","class","btn-close",3,"click",4,"ngIf"],[1,"modal-body",2,"overflow-x","auto",3,"innerHtml"],[1,"modal-footer"],[4,"ngFor","ngForOf"],["type","button",1,"btn-close",3,"click"],["type","button",3,"click"]],template:function(n,o){n&1&&Pt(0,Ya,9,6,"ng-container",0)},dependencies:[Ti,Ri,Ii,Eo,xi],styles:["/*# sourceMappingURL=confirm-dialog.component-Y7IEV2MY.css.map */"]});let r=e;return r})();var St=class{constructor(){this._type="confirm",this.header="Confirm",this.content="",this.buttons=[],this.disableEscape=!1}};var xo=(()=>{let e=class e{constructor(t){this.modalService=t,this.defaultConfirm=new St,this.defaultAlert=new St,this.defaultConfirm.buttons.push({text:"Cancel",type:"secondary"}),this.defaultConfirm.buttons.push({text:"Confirm",type:"primary"}),this.defaultAlert._type="alert",this.defaultAlert.header="Alert",this.defaultAlert.buttons.push({text:"Ok",type:"primary"})}confirm(t,n){return y(this,null,function*(){return new Promise((o,s)=>{if(t===void 0&&n===void 0)return console.error("Confirm must have either text or a config object passed"),s(!1);t!==void 0&&n===void 0&&(n=this.defaultConfirm,n.content=t),t!==void 0&&t!==""&&n.content===""&&(n.content=t);let a=this.modalService.open(Mn);a.componentInstance.config=n,a.closed.pipe(H(1)).subscribe(l=>o(l)),a.dismissed.pipe(H(1)).subscribe(()=>o(!1))})})}alert(t,n){return y(this,null,function*(){return new Promise((o,s)=>{if(t===void 0&&n===void 0)return console.error("Alert must have either text or a config object passed"),s(!1);t!==void 0&&n===void 0&&(n=this.defaultConfirm,n.content=t);let a=this.modalService.open(Mn,{size:"lg",fullscreen:"md"});a.componentInstance.config=n,a.closed.pipe(H(1)).subscribe(l=>o(l)),a.dismissed.pipe(H(1)).subscribe(()=>o(!1))})})}};e.\u0275fac=function(n){return new(n||e)(T(Ui))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var $n=function(r){return r[r.System=1]="System",r[r.User=2]="User",r}($n||{});var Do=(()=>{let e=class e{constructor(t,n,o,s,a,l,c){this.document=n,this.httpClient=o,this.domSanitizer=a,this.confirmService=l,this.toastr=c,this.destroyRef=f(Dt),this.defaultTheme="dark",this.defaultBookTheme="Dark",this.currentThemeSource=new se(1),this.currentTheme$=this.currentThemeSource.asObservable(),this.themesSource=new se(1),this.themes$=this.themesSource.asObservable(),this.themeCache=[],this.baseUrl=Ue.apiUrl,this.renderer=t.createRenderer(null,null),s.messages$.pipe(ye(this.destroyRef)).subscribe(u=>{if(u.event!==g.NotificationProgress)return;let m=u.payload;m.name===g.SiteThemeProgress&&m.eventType==="ended"&&m.name===g.SiteThemeProgress&&this.getThemes().subscribe(()=>{})})}getColorScheme(){return getComputedStyle(this.document.body).getPropertyValue("--color-scheme").trim()}getThemeColor(){return getComputedStyle(this.document.body).getPropertyValue("--theme-color").trim()}getTileColor(){return getComputedStyle(this.document.body).getPropertyValue("--title-color").trim()}getCssVariable(t){return getComputedStyle(this.document.body).getPropertyValue(t).trim()}isDarkTheme(){return this.getColorScheme().toLowerCase()==="dark"}getThemes(){return this.httpClient.get(this.baseUrl+"theme").pipe(v(t=>(this.themeCache=t,this.themesSource.next(t),this.currentTheme$.pipe(H(1)).subscribe(n=>{t.filter(o=>o.id===n.id).length===0&&(this.setTheme(this.defaultTheme),this.toastr.info(Vr("toasts.theme-missing")))}),t)))}clearThemes(){this.unsetThemes()}setDefault(t){return this.httpClient.post(this.baseUrl+"theme/update-default",{themeId:t}).pipe(v(()=>{this.getThemes().subscribe(()=>{})}))}scan(){return this.httpClient.post(this.baseUrl+"theme/scan",{})}setBookTheme(t){this.unsetBookThemes(),this.renderer.addClass(this.document.querySelector("body"),t)}clearBookTheme(){this.unsetBookThemes()}setTheme(t){let n=this.themeCache.find(o=>o.name.toLowerCase()===t.toLowerCase());n?(this.unsetThemes(),this.renderer.addClass(this.document.querySelector("body"),n.selector),n.provider===$n.User&&!this.hasThemeInHead(n.name)?this.fetchThemeContent(n.id).subscribe(o=>y(this,null,function*(){if(o===null){yield this.confirmService.alert(Vr("toasts.alert-bad-theme")),this.setTheme("dark");return}let s=this.document.createElement("style");s.id="theme-"+n.name,s.appendChild(this.document.createTextNode(o)),this.renderer.appendChild(this.document.head,s);let a=this.getThemeColor();a&&(this.document.querySelector('meta[name="theme-color"]')?.setAttribute("content",a),this.document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]')?.setAttribute("content",a)),this.getTileColor()&&this.document.querySelector('meta[name="msapplication-TileColor"]')?.setAttribute("content",a);let c=this.getColorScheme();c&&this.document.querySelector("body")?.setAttribute("theme",c),this.currentThemeSource.next(n)})):this.currentThemeSource.next(n)):this.getThemes().subscribe(o=>{this.setTheme(t)})}hasThemeInHead(t){let n="theme-"+t.toLowerCase();return Array.from(this.document.head.children).filter(o=>o.tagName==="STYLE"&&o.id.toLowerCase()===n).length>0}fetchThemeContent(t){return this.httpClient.get(this.baseUrl+"theme/download-content?themeId="+t,O).pipe(v(n=>this.domSanitizer.sanitize(Ut.STYLE,n)))}unsetThemes(){this.themeCache.forEach(t=>this.document.body.classList.remove(t.selector))}unsetBookThemes(){Array.from(this.document.body.classList).filter(t=>t.startsWith("brtheme-")).forEach(t=>this.document.body.classList.remove(t))}};e.\u0275fac=function(n){return new(n||e)(T(ri),T(Ht),T(Ft),T(kr),T(zt),T(xo),T(Pi))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var ie=function(r){return r.Admin="Admin",r.ChangePassword="Change Password",r.Bookmark="Bookmark",r.Download="Download",r.ChangeRestriction="Change Restriction",r.ReadOnly="Read Only",r.Login="Login",r.Promote="Promote",r}(ie||{}),Yh=(()=>{let e=class e{constructor(t,n,o,s){this.httpClient=t,this.router=n,this.messageHub=o,this.themeService=s,this.destroyRef=f(Dt),this.baseUrl=Ue.apiUrl,this.userKey="kavita-user",this.currentUserSource=new se(1),this.currentUser$=this.currentUserSource.asObservable(),this.hasValidLicenseSource=new se(1),this.hasValidLicense$=this.hasValidLicenseSource.asObservable(),this.isOnline=!0,o.messages$.pipe(Z(a=>a.event===g.UserUpdate),v(a=>a.payload),Z(a=>a.userName===this.currentUser?.username),F(()=>this.refreshAccount())).subscribe(()=>{}),window.addEventListener("offline",a=>{this.isOnline=!1}),window.addEventListener("online",a=>{this.isOnline=!0,this.refreshToken().subscribe()})}hasAdminRole(t){return t&&t.roles.includes(ie.Admin)}hasChangePasswordRole(t){return t&&t.roles.includes(ie.ChangePassword)}hasChangeAgeRestrictionRole(t){return t&&t.roles.includes(ie.ChangeRestriction)}hasDownloadRole(t){return t&&t.roles.includes(ie.Download)}hasBookmarkRole(t){return t&&t.roles.includes(ie.Bookmark)}hasReadOnlyRole(t){return t&&t.roles.includes(ie.ReadOnly)}hasPromoteRole(t){return t&&t.roles.includes(ie.Promote)||t.roles.includes(ie.Admin)}getRoles(){return this.httpClient.get(this.baseUrl+"account/roles")}deleteLicense(){return this.httpClient.delete(this.baseUrl+"license",O)}resetLicense(t,n){return this.httpClient.post(this.baseUrl+"license/reset",{license:t,email:n},O)}hasValidLicense(t=!1){return console.log("hasValidLicense being called: ",t),this.httpClient.get(this.baseUrl+"license/valid-license?forceCheck="+t,O).pipe(v(n=>n==="true"),U(n=>{this.hasValidLicenseSource.next(n)}),ne(n=>(this.hasValidLicenseSource.next(!1),be(n))))}hasAnyLicense(){return this.httpClient.get(this.baseUrl+"license/has-license",O).pipe(v(t=>t==="true"))}updateUserLicense(t,n,o){return this.httpClient.post(this.baseUrl+"license",{license:t,email:n,discordId:o},O).pipe(v(s=>s==="true"))}login(t){return this.httpClient.post(this.baseUrl+"account/login",t).pipe(U(n=>{let o=n;o&&this.setCurrentUser(o)}),ye(this.destroyRef))}setCurrentUser(t){if(t){t.roles=[];let n=this.getDecodedToken(t.token).role;Array.isArray(n)?t.roles=n:t.roles.push(n),localStorage.setItem(this.userKey,JSON.stringify(t)),localStorage.setItem(e.lastLoginKey,t.username),t.preferences&&t.preferences.theme?this.themeService.setTheme(t.preferences.theme.name):this.themeService.setTheme(this.themeService.defaultTheme)}else this.themeService.setTheme(this.themeService.defaultTheme);this.currentUser=t,this.currentUserSource.next(t),this.stopRefreshTokenTimer(),this.currentUser&&(this.messageHub.stopHubConnection(),this.messageHub.createHubConnection(this.currentUser),this.hasValidLicense().subscribe(),this.startRefreshTokenTimer())}logout(){localStorage.removeItem(this.userKey),this.currentUserSource.next(void 0),this.currentUser=void 0,this.stopRefreshTokenTimer(),this.messageHub.stopHubConnection(),this.router.navigateByUrl("/login")}register(t){return this.httpClient.post(this.baseUrl+"account/register",t).pipe(v(n=>n),ye(this.destroyRef))}isEmailConfirmed(){return this.httpClient.get(this.baseUrl+"account/email-confirmed")}isEmailValid(){return this.httpClient.get(this.baseUrl+"account/is-email-valid",O).pipe(v(t=>t=="true"))}confirmMigrationEmail(t){return this.httpClient.post(this.baseUrl+"account/confirm-migration-email",t)}resendConfirmationEmail(t){return this.httpClient.post(this.baseUrl+"account/resend-confirmation-email?userId="+t,{})}inviteUser(t){return this.httpClient.post(this.baseUrl+"account/invite",t)}confirmEmail(t){return this.httpClient.post(this.baseUrl+"account/confirm-email",t)}confirmEmailUpdate(t){return this.httpClient.post(this.baseUrl+"account/confirm-email-update",t)}getInviteUrl(t,n=!0){return this.httpClient.get(this.baseUrl+"account/invite-url?userId="+t+"&withBaseUrl="+n,O)}getDecodedToken(t){return JSON.parse(atob(t.split(".")[1]))}requestResetPasswordEmail(t){return this.httpClient.post(this.baseUrl+"account/forgot-password?email="+encodeURIComponent(t),{},O)}confirmResetPasswordEmail(t){return this.httpClient.post(this.baseUrl+"account/confirm-password-reset",t,O)}resetPassword(t,n,o){return this.httpClient.post(this.baseUrl+"account/reset-password",{username:t,password:n,oldPassword:o},O)}update(t){return this.httpClient.post(this.baseUrl+"account/update",t)}updateEmail(t,n){return this.httpClient.post(this.baseUrl+"account/update/email",{email:t,password:n})}updateAgeRestriction(t,n){return this.httpClient.post(this.baseUrl+"account/update/age-restriction",{ageRating:t,includeUnknowns:n})}getPreferences(){return this.httpClient.get(this.baseUrl+"users/get-preferences").pipe(v(t=>(this.currentUser!==void 0&&this.currentUser!==null&&(this.currentUser.preferences=t,this.setCurrentUser(this.currentUser)),t)),ye(this.destroyRef))}updatePreferences(t){return this.httpClient.post(this.baseUrl+"users/update-preferences",t).pipe(v(n=>(this.currentUser!==void 0&&this.currentUser!==null&&(this.currentUser.preferences=n,this.setCurrentUser(this.currentUser),localStorage.setItem(e.localeKey,this.currentUser.preferences.locale)),n)),ye(this.destroyRef))}getUserFromLocalStorage(){let t=localStorage.getItem(this.userKey);if(t)return JSON.parse(t)}resetApiKey(){return this.httpClient.post(this.baseUrl+"account/reset-api-key",{},O).pipe(v(t=>{let n=this.getUserFromLocalStorage();return n&&(n.apiKey=t,localStorage.setItem(this.userKey,JSON.stringify(n)),this.currentUserSource.next(n),this.currentUser=n),t}))}getOpdsUrl(){return this.httpClient.get(this.baseUrl+"account/opds-url",O)}refreshAccount(){return this.currentUser===null||this.currentUser===void 0?p():this.httpClient.get(this.baseUrl+"account/refresh-account").pipe(v(t=>(t&&(this.currentUser=d({},t)),this.setCurrentUser(this.currentUser),t)))}refreshToken(){return this.currentUser===null||this.currentUser===void 0||!this.isOnline?p():this.httpClient.post(this.baseUrl+"account/refresh-token",{token:this.currentUser.token,refreshToken:this.currentUser.refreshToken}).pipe(v(t=>(this.currentUser&&(this.currentUser.token=t.token,this.currentUser.refreshToken=t.refreshToken),this.setCurrentUser(this.currentUser),t)))}startRefreshTokenTimer(){if(this.currentUser===null||this.currentUser===void 0){this.stopRefreshTokenTimer();return}this.stopRefreshTokenTimer(),this.refreshTokenTimeout=setInterval(()=>this.refreshToken().subscribe(()=>{}),60*1e4)}stopRefreshTokenTimer(){this.refreshTokenTimeout!==void 0&&clearInterval(this.refreshTokenTimeout)}};e.lastLoginKey="kavita-lastlogin",e.localeKey="kavita-locale",e.\u0275fac=function(n){return new(n||e)(T(Ft),T(J),T(kr),T(Do))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();export{je as a,Q as b,Se as c,as as d,J as e,Ni as f,Sc as g,Rc as h,Ic as i,g as j,kr as k,$n as l,Eo as m,St as n,xo as o,Do as p,Yh as q};
//# sourceMappingURL=chunk-SPNNO5LP.js.map
