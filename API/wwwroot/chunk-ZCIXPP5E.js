import{a as re,b as y}from"./chunk-VAE34R3W.js";import{a as ee}from"./chunk-46CIW37K.js";import{a as te}from"./chunk-DBXQZVFZ.js";import{a as ie}from"./chunk-WIQ43ZSS.js";import{a as ne}from"./chunk-CNATNHH2.js";import{j as U,k as P}from"./chunk-SPNNO5LP.js";import{$ as M,$b as k,Bb as x,Dc as N,Fa as u,Fc as G,Ga as _,Ib as m,Jd as Q,L as E,Na as F,Pa as L,Rc as O,Td as W,Vb as o,Wb as a,Xb as S,Yb as C,Zb as b,_d as j,be as q,cc as f,ce as B,dc as d,de as z,fb as V,fe as Z,hd as H,he as J,id as $,kc as D,lb as i,lc as R,mc as A,me as K,n as w,ne as X,oc as l,pc as v,qa as g,qc as p,va as I,xc as T,ze as Y}from"./chunk-2LHIXASS.js";function oe(r,s){if(r&1&&(o(0,"tr")(1,"td",17),S(2,"app-loading",18),a()()),r&2){let n=d(2);i(2),m("loading",n.isLoading)}}function ae(r,s){r&1&&(o(0,"tr")(1,"td",17),l(2,"No issues"),a()())}function se(r,s){if(r&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a(),o(5,"td"),l(6),a(),o(7,"td"),l(8),a()()),r&2){let n=s.$implicit;i(2),p(" ",n.extension," "),i(2),p(" ",n.filePath," "),i(2),p(" ",n.comment," "),i(2),p(" ",n.details," ")}}function le(r,s){if(r&1&&(C(0),x(1,ae,3,0,"tr",16)(2,se,9,4,"tr",19),b()),r&2){let n=s.ngIf,e=d(2);i(),m("ngIf",n.length===0&&!e.isLoading),i(),m("ngForOf",n)}}function ce(r,s){if(r&1){let n=k();C(0),o(1,"p"),l(2),o(3,"a",3),l(4),a()(),o(5,"form",4)(6,"div",5)(7,"div",6)(8,"label",7),l(9),a(),o(10,"div",8),S(11,"input",9),o(12,"button",10),f("click",function(){u(n);let t=d();return _(t.clear())}),l(13),a()()()()(),o(14,"table",11)(15,"thead",null,0)(17,"tr")(18,"th",12),f("sort",function(t){u(n);let c=d();return _(c.onSort(t))}),l(19),a(),o(20,"th",13),f("sort",function(t){u(n);let c=d();return _(c.onSort(t))}),l(21),a(),o(22,"th",14),f("sort",function(t){u(n);let c=d();return _(c.onSort(t))}),l(23),a(),o(24,"th",15),f("sort",function(t){u(n);let c=d();return _(c.onSort(t))}),l(25),a()()(),o(26,"tbody",null,1),x(28,oe,3,1,"tr",16)(29,le,3,2,"ng-container",16),N(30,"filter"),a()(),b()}if(r&2){let n=s.$implicit,e=d();i(2),p("",n("description-part-1")," "),i(),m("href",e.WikiLink.MediaIssues,V),i(),v(n("description-part-2")),i(),m("formGroup",e.formGroup),i(4),v(n("filter-label")),i(2),m("placeholder",n("filter-label")),i(2),v(n("clear-alerts")),i(6),p(" ",n("extension-header")," "),i(2),p(" ",n("file-header")," "),i(2),p(" ",n("comment-header")," "),i(2),p(" ",n("details-header")," "),i(3),m("ngIf",e.isLoading),i(),m("ngIf",G(30,13,e.data,e.filterList))}}var Fe=(()=>{let s=class s{constructor(){this.alertCount=new L,this.serverService=g(ie),this.messageHub=g(P),this.cdRef=g(O),this.destroyRef=g(F),this.WikiLink=ee,this.messageHubUpdate$=this.messageHub.messages$.pipe(Q(this.destroyRef),E(e=>e.event===U.ScanSeries),M()),this.currentSort=new w({column:"extension",direction:"asc"}),this.currentSort$=this.currentSort.asObservable(),this.data=[],this.isLoading=!0,this.formGroup=new z({filter:new Z("",[])}),this.filterList=e=>{let t=(this.formGroup.get("filter")?.value||"").toLowerCase();return e.comment.toLowerCase().indexOf(t)>=0||e.filePath.toLowerCase().indexOf(t)>=0||e.details.indexOf(t)>=0}}ngOnInit(){this.loadData(),this.messageHubUpdate$.subscribe(e=>this.loadData()),this.currentSort$.subscribe(e=>{this.data=e.column?this.data.sort((t,c)=>{if(e.column==="")return 0;let h=re(t[e.column],c[e.column]);return e.direction==="asc"?h:-h}):this.data,this.cdRef.markForCheck()})}onSort(e){this.currentSort.next(e),this.headers.forEach(t=>{t.sortable!==e.column&&(t.direction="")})}loadData(){this.isLoading=!0,this.cdRef.markForCheck(),this.serverService.getMediaErrors().subscribe(e=>{this.data=e,this.isLoading=!1,this.alertCount.emit(e.length),this.cdRef.detectChanges()})}clear(){this.serverService.clearMediaAlerts().subscribe(e=>this.loadData())}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=I({type:s,selectors:[["app-manage-alerts"]],viewQuery:function(t,c){if(t&1&&D(y,5),t&2){let h;R(h=A())&&(c.headers=h)}},outputs:{alertCount:"alertCount"},standalone:!0,features:[T],decls:1,vars:1,consts:[["header",""],["container",""],[4,"transloco","translocoRead"],["rel","noopener noreferrer","target","_blank",3,"href"],[3,"formGroup"],[1,"row","g-0","mb-3"],[1,"col-md-12"],["for","filter",1,"visually-hidden"],[1,"input-group"],["id","filter","type","text","formControlName","filter",1,"form-control",3,"placeholder"],["type","button",1,"btn","btn-primary",3,"click"],[1,"table","table-striped","table-hover","table-sm","table-hover"],["scope","col","sortable","extension",3,"sort"],["scope","col","sortable","filePath",3,"sort"],["scope","col","sortable","comment",3,"sort"],["scope","col","sortable","details",3,"sort"],[4,"ngIf"],["colspan","4",2,"text-align","center"],[3,"loading"],[4,"ngFor","ngForOf"]],template:function(t,c){t&1&&x(0,ce,31,16,"ng-container",2),t&2&&m("translocoRead","manage-alerts")},dependencies:[Y,J,j,q,B,K,X,$,ne,H,te,y,W],styles:["/*# sourceMappingURL=manage-alerts.component-ZWHF4FVU.css.map */"],changeDetection:0});let r=s;return r})();export{Fe as a};
//# sourceMappingURL=chunk-ZCIXPP5E.js.map
