import{o as Z,q as Y}from"./chunk-SPNNO5LP.js";import{s as G}from"./chunk-E6ZKMAWP.js";import{$b as g,Bb as f,Fa as m,Ga as h,Gc as T,Ib as p,Jd as U,Na as S,Nb as A,Rb as K,Rc as B,Rd as C,Td as $,Vb as c,Wb as a,Xb as y,Yb as O,Zb as F,_c as P,bf as L,cc as u,dc as r,g as v,hc as b,id as Q,ka as I,kc as V,lb as s,lc as j,mc as H,nc as k,oc as l,pa as E,pc as x,qa as d,qc as M,va as R,xc as N}from"./chunk-2LHIXASS.js";var D=class{constructor(e,o){this._document=o;let t=this._textarea=this._document.createElement("textarea"),i=t.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",t.setAttribute("aria-hidden","true"),t.value=e,t.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(t)}copy(){let e=this._textarea,o=!1;try{if(e){let t=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),o=this._document.execCommand("copy"),t&&t.focus()}}catch{}return o}destroy(){let e=this._textarea;e&&(e.remove(),this._textarea=void 0)}},q=(()=>{let e=class e{constructor(t){this._document=t}copy(t){let i=this.beginCopy(t),_=i.copy();return i.destroy(),_}beginCopy(t){return new D(t,this._document)}};e.\u0275fac=function(i){return new(i||e)(E(P))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var J=["apiKey"];function W(n,e){if(n&1&&(c(0,"span"),l(1,"\xA0"),y(2,"i",14),a()),n&2){r();let o=k(6);s(2),p("ngbTooltip",o)}}function X(n,e){if(n&1&&l(0),n&2){let o=r(2);x(o.tooltipText)}}function tt(n,e){if(n&1){let o=g();c(0,"button",10),u("click",function(){m(o);let i=r(2);return h(i.toggleVisibility())}),c(1,"span",11),l(2),a(),y(3,"i",15),a()}if(n&2){let o=r().$implicit,t=r();p("title",t.isDataHidden?o("show"):o("hide")),s(2),x(t.isDataHidden?o("show"):o("hide")),s(),A("fa ",t.isDataHidden?"fa-eye":"fa-eye-slash","")}}function et(n,e){if(n&1){let o=g();c(0,"button",16),u("click",function(){m(o);let i=r(2);return h(i.refresh())}),c(1,"span",11),l(2,"Regenerate"),a(),y(3,"i",17),a()}if(n&2){r();let o=k(17);p("ngbTooltip",o)}}function it(n,e){if(n&1&&l(0),n&2){let o=r().$implicit;M(" ",o("regen-warning")," ")}}function nt(n,e){if(n&1){let o=g();O(0),c(1,"div",4)(2,"label",5),l(3),a(),f(4,W,3,1,"span",6)(5,X,1,1,"ng-template",null,0,T),c(7,"div",7)(8,"input",8,1),u("click",function(){m(o);let i=r();return h(i.selectAll())}),a(),f(10,tt,4,5,"button",9),c(11,"button",10),u("click",function(){m(o);let i=r();return h(i.copy())}),c(12,"span",11),l(13,"Copy"),a(),y(14,"i",12),a(),f(15,et,4,1,"button",13)(16,it,1,1,"ng-template",null,2,T),a()(),F()}if(n&2){let o=e.$implicit,t=r();s(2),b("for","api-key--",t.title,""),s(),x(t.title),s(),p("ngIf",t.tooltipText.length>0),s(4),b("id","api-key--",t.title,""),p("type",t.InputType)("value",t.key),s(2),p("ngIf",t.hideData),s(),p("title",o("copy")),s(4),K(15,t.showRefresh?15:-1)}}var Dt=(()=>{let e=class e{constructor(){this.destroyRef=d(S),this.confirmService=d(Z),this.accountService=d(Y),this.toastr=d(G),this.clipboard=d(q),this.cdRef=d(B),this.title="API Key",this.showRefresh=!0,this.transform=t=>t,this.tooltipText="",this.hideData=!0,this.key="",this.isDataHidden=this.hideData}get InputType(){return this.hideData&&this.isDataHidden?"password":"text"}ngOnInit(){this.accountService.currentUser$.pipe(U(this.destroyRef)).subscribe(t=>{let i="";t?i=t.apiKey:i=C("api-key.no-key"),this.showRefresh&&(this.showRefresh=!this.accountService.hasReadOnlyRole(t)),this.transform!=null&&(this.key=this.transform(i),this.cdRef.markForCheck())})}copy(){return v(this,null,function*(){this.inputElem.nativeElement.select(),this.clipboard.copy(this.inputElem.nativeElement.value),this.inputElem.nativeElement.setSelectionRange(0,0),this.cdRef.markForCheck()})}refresh(){return v(this,null,function*(){(yield this.confirmService.confirm(C("api-key.confirm-reset")))&&this.accountService.resetApiKey().subscribe(t=>{this.key=t,this.cdRef.markForCheck(),this.toastr.success(C("api-key.key-reset"))})})}selectAll(){this.inputElem&&(this.inputElem.nativeElement.setSelectionRange(0,this.key.length),this.cdRef.markForCheck())}toggleVisibility(){this.isDataHidden=!this.isDataHidden,this.cdRef.markForCheck()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=R({type:e,selectors:[["app-api-key"]],viewQuery:function(i,_){if(i&1&&V(J,5),i&2){let w;j(w=H())&&(_.inputElem=w.first)}},inputs:{title:"title",showRefresh:"showRefresh",transform:"transform",tooltipText:"tooltipText",hideData:"hideData"},standalone:!0,features:[N],decls:1,vars:1,consts:[["tooltip",""],["apiKey",""],["tipContent",""],[4,"transloco","translocoRead"],[1,"mb-3"],[1,"form-label",3,"for"],[4,"ngIf"],[1,"input-group"],["readonly","","aria-describedby","button-addon4",1,"form-control",3,"click","type","id","value"],["class","btn btn-outline-secondary","type","button",3,"title","click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click","title"],[1,"visually-hidden"],["aria-hidden","true",1,"fa","fa-copy"],["type","button",1,"btn","btn-danger"],["aria-hidden","true","placement","right","role","button","tabindex","0",1,"fa","fa-info-circle",3,"ngbTooltip"],["aria-hidden","true"],["type","button",1,"btn","btn-danger",3,"click","ngbTooltip"],["aria-hidden","true",1,"fa","fa-sync-alt"]],template:function(i,_){i&1&&f(0,nt,18,11,"ng-container",3),i&2&&p("translocoRead","api-key")},dependencies:[Q,L,$],styles:["/*# sourceMappingURL=api-key.component-SHOTENOC.css.map */"],changeDetection:0});let n=e;return n})();export{Dt as a};
//# sourceMappingURL=chunk-OWYEASWT.js.map
