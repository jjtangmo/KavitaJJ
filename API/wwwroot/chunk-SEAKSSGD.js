import{p as g,q as h}from"./chunk-SPNNO5LP.js";import{Hd as d,Jd as o,Na as c,ka as n,pa as s,qa as m}from"./chunk-2LHIXASS.js";var $=(()=>{let i=class i{constructor(e,r){this.accountService=e,this.themeService=r,this.destroyRef=m(c),this.baseUrl=d.apiUrl,this.apiKey="",this.encodedKey="",this.placeholderImage="assets/images/image-placeholder.dark-min.png",this.errorImage="assets/images/error-placeholder2.dark-min.png",this.resetCoverImage="assets/images/image-reset-cover-min.png",this.errorWebLinkImage="assets/images/broken-white-32x32.png",this.nextChapterImage="assets/images/image-placeholder.dark-min.png",this.themeService.currentTheme$.pipe(o(this.destroyRef)).subscribe(t=>{this.themeService.isDarkTheme()?(this.placeholderImage="assets/images/image-placeholder.dark-min.png",this.errorImage="assets/images/error-placeholder2.dark-min.png",this.errorWebLinkImage="assets/images/broken-white-32x32.png"):(this.placeholderImage="assets/images/image-placeholder-min.png",this.errorImage="assets/images/error-placeholder2-min.png",this.errorWebLinkImage="assets/images/broken-black-32x32.png")}),this.accountService.currentUser$.pipe(o(this.destroyRef)).subscribe(t=>{t&&(this.apiKey=t.apiKey,this.encodedKey=encodeURIComponent(this.apiKey))})}getRecentlyAddedItem(e){return e.chapterId===0?this.getVolumeCoverImage(e.volumeId):this.getChapterCoverImage(e.chapterId)}getEntityTypeFromUrl(e){if(e.indexOf("?")<0)return;let r=e.split("?")[1],t=r.indexOf("=");return r.substring(0,t).replace("Id","")}getLibraryCoverImage(e){return`${this.baseUrl}image/library-cover?libraryId=${e}&apiKey=${this.encodedKey}`}getVolumeCoverImage(e){return`${this.baseUrl}image/volume-cover?volumeId=${e}&apiKey=${this.encodedKey}`}getSeriesCoverImage(e){return`${this.baseUrl}image/series-cover?seriesId=${e}&apiKey=${this.encodedKey}`}getCollectionCoverImage(e){return`${this.baseUrl}image/collection-cover?collectionTagId=${e}&apiKey=${this.encodedKey}`}getReadingListCoverImage(e){return`${this.baseUrl}image/readinglist-cover?readingListId=${e}&apiKey=${this.encodedKey}`}getChapterCoverImage(e){return`${this.baseUrl}image/chapter-cover?chapterId=${e}&apiKey=${this.encodedKey}`}getBookmarkedImage(e,r){return`${this.baseUrl}image/bookmark?chapterId=${e}&apiKey=${this.encodedKey}&pageNum=${r}`}getWebLinkImage(e){return`${this.baseUrl}image/web-link?url=${encodeURIComponent(e)}&apiKey=${this.encodedKey}`}getCoverUploadImage(e){return`${this.baseUrl}image/cover-upload?filename=${encodeURIComponent(e)}&apiKey=${this.encodedKey}`}updateErroredWebLinkImage(e){e.target.src=this.errorWebLinkImage}randomize(e){let r=Math.round(Math.random()*100+1);return e.indexOf("&random")>=0?e+1:e+"&random="+r}};i.\u0275fac=function(r){return new(r||i)(s(h),s(g))},i.\u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})();export{$ as a};
//# sourceMappingURL=chunk-SEAKSSGD.js.map
