import{j as u,k as d}from"./chunk-SPNNO5LP.js";import{Dd as m,Hd as f,Jd as c,L as b,Na as o,fa as y,ka as p,pa as n,u as s,z as a}from"./chunk-2LHIXASS.js";var E=(()=>{let t=class t{constructor(e,r,i){this.httpClient=e,this.messageHub=r,this.destroyRef=i,this.baseUrl=f.apiUrl,this.libraryNames=void 0,this.libraryTypes=void 0,this.messageHub.messages$.pipe(c(this.destroyRef),b(h=>h.event===u.LibraryModified),y(h=>{console.log("LibraryModified event came in, clearing library name cache"),this.libraryNames=void 0,this.libraryTypes=void 0})).subscribe()}getLibraryNames(){return this.libraryNames!=null?s(this.libraryNames):this.httpClient.get(this.baseUrl+"library/libraries").pipe(a(e=>(this.libraryNames={},e.forEach(r=>{this.libraryNames!==void 0&&(this.libraryNames[r.id]=r.name)}),this.libraryNames)))}getLibraryName(e){return this.libraryNames!=null&&this.libraryNames.hasOwnProperty(e)?s(this.libraryNames[e]):this.httpClient.get(this.baseUrl+"library/libraries").pipe(a(r=>(this.libraryNames={},r.forEach(i=>{this.libraryNames!==void 0&&(this.libraryNames[i.id]=i.name)}),this.libraryNames[e])))}libraryNameExists(e){return this.httpClient.get(this.baseUrl+"library/name-exists?name="+e)}listDirectories(e){let r="";return e!==void 0&&e.length>0&&(r="?path="+encodeURIComponent(e)),this.httpClient.get(this.baseUrl+"library/list"+r)}getJumpBar(e){return this.httpClient.get(this.baseUrl+"library/jump-bar?libraryId="+e)}getLibrary(e){return this.httpClient.get(this.baseUrl+"library?libraryId="+e)}getLibraries(){return this.httpClient.get(this.baseUrl+"library/libraries")}updateLibrariesForMember(e,r){return this.httpClient.post(this.baseUrl+"library/grant-access",{username:e,selectedLibraries:r})}scan(e,r=!1){return this.httpClient.post(this.baseUrl+"library/scan?libraryId="+e+"&force="+r,{})}analyze(e){return this.httpClient.post(this.baseUrl+"library/analyze?libraryId="+e,{})}refreshMetadata(e,r=!1){return this.httpClient.post(this.baseUrl+"library/refresh-metadata?libraryId="+e+"&force="+r,{})}create(e){return this.httpClient.post(this.baseUrl+"library/create",e)}delete(e){return this.httpClient.delete(this.baseUrl+"library/delete?libraryId="+e,{})}update(e){return this.httpClient.post(this.baseUrl+"library/update",e)}getLibraryType(e){return this.libraryTypes!=null&&this.libraryTypes.hasOwnProperty(e)?s(this.libraryTypes[e]):this.httpClient.get(this.baseUrl+"library/type?libraryId="+e).pipe(a(r=>(this.libraryTypes===void 0&&(this.libraryTypes={}),this.libraryTypes[e]=r,this.libraryTypes[e])))}};t.\u0275fac=function(r){return new(r||t)(n(m),n(d),n(o))},t.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"});let l=t;return l})();export{E as a};
//# sourceMappingURL=chunk-K6JLHPZK.js.map
