import{a as f}from"./chunk-HOUHXGPA.js";import{h as z}from"./chunk-LAUBKCQL.js";import{Bb as g,Dc as I,Ea as R,Ec as S,Gc as y,Ib as r,Pa as v,Rc as T,Td as O,Ud as D,Vb as l,Wb as c,Xb as _,Yb as d,Zb as u,Zd as M,_b as b,be as V,bf as q,ce as G,dc as m,de as $,fe as x,hd as N,he as j,id as U,lb as n,mb as h,me as L,nc as k,nd as E,ne as B,oc as s,oe as H,pc as p,pd as A,pe as P,qc as w,qe as Q,va as C,xc as F,ze as Z}from"./chunk-2LHIXASS.js";function J(e,o){if(e&1&&(d(0),s(1),u()),e&2){let i=m(3).$implicit;n(),p(i("not-applicable-for-admins"))}}function K(e,o){if(e&1&&(d(0),l(1,"h4"),s(2),c(),l(3,"p"),s(4),g(5,J,2,1,"ng-container",2),c(),u()),e&2){let i=m(2).$implicit,t=m();n(2),p(i("title")),n(2),w("",i("description")," "),n(),r("ngIf",t.isAdmin)}}function W(e,o){if(e&1&&(l(0,"option",16),s(1),I(2,"titlecase"),c()),e&2){let i=o.$implicit;r("value",i.value),n(),p(S(2,2,i.title))}}function X(e,o){if(e&1&&s(0),e&2){let i=m(2).$implicit;p(i("include-unknowns-tooltip"))}}function Y(e,o){if(e&1&&(d(0),g(1,K,6,3,"ng-container",2),l(2,"form",3)(3,"div",4)(4,"label",5),s(5),c(),l(6,"div",6)(7,"select",7)(8,"option",8),s(9),c(),g(10,W,3,4,"option",9),c()()(),l(11,"div",4)(12,"div",10),_(13,"input",11),l(14,"label",12),s(15),c(),_(16,"i",13),c(),g(17,X,1,1,"ng-template",null,0,y),l(19,"span",14),b(20,15),c()()(),u()),e&2){let i=k(18),t=m().$implicit,a=m();n(),r("ngIf",a.showContext),n(),r("formGroup",a.restrictionForm),n(3),p(t("age-rating-label")),n(4),p(t("no-restriction")),n(),r("ngForOf",a.ageRatings),n(3),r("value",!0),n(2),p(t("include-unknowns-label")),n(),r("ngbTooltip",i),n(4),r("ngTemplateOutlet",i)}}function ee(e,o){if(e&1&&(d(0),g(1,Y,21,9,"ng-container",2),u()),e&2){let i=m();n(),r("ngIf",i.restrictionForm)}}var he=(()=>{let o=class o{constructor(t,a){this.metadataService=t,this.cdRef=a,this.isAdmin=!1,this.showContext=!0,this.selected=new v,this.ageRatings=[]}ngOnInit(){this.restrictionForm=new $({ageRating:new x(this.member?.ageRestriction.ageRating||f.NotApplicable||f.NotApplicable,[]),ageRestrictionIncludeUnknowns:new x(this.member?.ageRestriction.includeUnknowns||!1,[])}),this.isAdmin&&(this.restrictionForm.get("ageRating")?.disable(),this.restrictionForm.get("ageRestrictionIncludeUnknowns")?.disable()),this.reset&&this.reset.subscribe(t=>{this.restrictionForm?.get("ageRating")?.setValue(t.ageRating),this.restrictionForm?.get("ageRestrictionIncludeUnknowns")?.setValue(t.includeUnknowns),this.cdRef.markForCheck()}),this.restrictionForm.get("ageRating")?.valueChanges.subscribe(t=>{this.selected.emit({ageRating:parseInt(t,10),includeUnknowns:this.restrictionForm?.get("ageRestrictionIncludeUnknowns")?.value}),parseInt(t,10)===f.NotApplicable?this.restrictionForm.get("ageRestrictionIncludeUnknowns")?.disable():this.restrictionForm.get("ageRestrictionIncludeUnknowns")?.enable()}),this.restrictionForm.get("ageRestrictionIncludeUnknowns")?.valueChanges.subscribe(t=>{this.selected.emit({ageRating:parseInt(this.restrictionForm?.get("ageRating")?.value,10),includeUnknowns:t})}),this.metadataService.getAllAgeRatings().subscribe(t=>{this.ageRatings=t,this.cdRef.markForCheck()})}ngOnChanges(){this.member&&(this.restrictionForm?.get("ageRating")?.setValue(this.member?.ageRestriction.ageRating||f.NotApplicable),this.restrictionForm?.get("ageRestrictionIncludeUnknowns")?.setValue(this.member?.ageRestriction.includeUnknowns),this.cdRef.markForCheck())}};o.\u0275fac=function(a){return new(a||o)(h(z),h(T))},o.\u0275cmp=C({type:o,selectors:[["app-restriction-selector"]],inputs:{member:"member",isAdmin:"isAdmin",showContext:"showContext",reset:"reset"},outputs:{selected:"selected"},standalone:!0,features:[R,F],decls:1,vars:1,consts:[["includeUnknownsTooltip",""],[4,"transloco","translocoRead"],[4,"ngIf"],[3,"formGroup"],[1,"mb-3"],["for","age-rating",1,"form-label","visually-hidden"],[1,"input-group"],["id","age-rating","formControlName","ageRating",1,"form-select"],["value","-1"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check","form-switch"],["type","checkbox","id","auto-close","role","switch","formControlName","ageRestrictionIncludeUnknowns","aria-describedby","include-unknowns-help","aria-labelledby","auto-close-label",1,"form-check-input",3,"value"],["for","auto-close",1,"form-check-label"],["aria-hidden","true","placement","top","role","button","tabindex","0",1,"fa","fa-info-circle","ms-1",3,"ngbTooltip"],["id","include-unknowns-help",1,"visually-hidden"],[3,"ngTemplateOutlet"],[3,"value"]],template:function(a,te){a&1&&g(0,ee,2,1,"ng-container",1),a&2&&r("translocoRead","restriction-selector")},dependencies:[U,Z,j,P,Q,M,H,V,G,L,B,N,q,A,D,O,E],styles:["/*# sourceMappingURL=restriction-selector.component-UTQTLHEZ.css.map */"],changeDetection:0});let e=o;return e})();export{he as a};
//# sourceMappingURL=chunk-QL7PCTRN.js.map
