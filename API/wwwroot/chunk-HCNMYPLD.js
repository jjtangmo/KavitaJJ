import{a as M,b as L,c as S}from"./chunk-YG7OKVFF.js";import{a as D,b as G,c as O,d as Fe,h as Wi,j as Ui}from"./chunk-Y2Z55DXS.js";import{b as de}from"./chunk-3BBJCVEK.js";import"./chunk-AZ5T37FH.js";import"./chunk-DCNCHGLE.js";import{a as Bi}from"./chunk-V7YNUPX5.js";import{a as Di}from"./chunk-2JQ3KAM5.js";import{c as ne}from"./chunk-5TIUG6K2.js";import{a as Ai}from"./chunk-KWNQHRPC.js";import{a as Li}from"./chunk-WBO5KV4A.js";import{a as Vi,b as Fi}from"./chunk-4XR5JJUF.js";import{a as $i}from"./chunk-CNATNHH2.js";import{c as Ti,d as Se,e as Ni,f as Hi}from"./chunk-5CMEBAZF.js";import{a as Mt}from"./chunk-ZRHV3LXB.js";import{c as di,e as gi,q as Ei}from"./chunk-SPNNO5LP.js";import{e as ci,h as Pt,i as it,k as Ve,l as yt,m as nt,s as Ii}from"./chunk-E6ZKMAWP.js";import{$ as be,$b as K,A as ye,Ac as Ue,Bb as P,Bc as ct,Dc as u,Ea as at,Ec as m,F as rt,Fa as I,Fb as we,G as ue,Ga as E,Gc as kt,Ib as d,J as zt,Jb as oe,Jd as b,Kb as We,L as k,M as Gt,Mb as Je,Na as te,Nb as De,Oa as Pe,Ob as xe,Pa as U,Pb as le,Pe as yi,Q as Ne,Qe as Mi,Rb as et,Rc as q,Rd as ce,Re as Ri,S as Z,Tb as ii,Td as je,U as Ae,Ub as ni,V as Qt,Vb as l,Wb as c,Xb as w,Yb as F,Yd as pi,Zb as A,Zd as ui,_c as me,_d as mi,a as xt,be as fi,ca as Ze,cc as H,ce as vi,da as qt,dc as g,eb as ei,fa as V,fb as ae,fe as Ie,ga as Ct,gc as tt,gd as fe,hb as $e,hc as si,hd as Re,he as bi,id as he,ja as Kt,jc as ri,jd as ai,ka as Yt,kc as W,kd as oi,ke as wi,la as Xt,lb as o,lc as B,m as Xe,mb as _,mc as $,md as dt,me as xi,n as Te,na as Zt,nc as Ot,nd as li,ne as Ci,o as ke,oc as v,od as ie,oe as Si,pa as St,pc as N,pe as _i,qa as T,qc as J,qe as Oi,rb as ti,rc as lt,sb as He,tb as ot,td as hi,u as re,ud as gt,va as Q,wa as Jt,wb as _t,wc as ht,xa as Be,xc as Y,xe as ki,ya as Me,z as x,zc as Ce,ze as Pi}from"./chunk-2LHIXASS.js";var ge=typeof window<"u"?window:{screen:{},navigator:{}},ze=(ge.matchMedia||function(){return{matches:!1}}).bind(ge),ji=!1,rn={get passive(){return ji=!0}},zi=function(){};ge.addEventListener&&ge.addEventListener("p",zi,rn);ge.removeEventListener&&ge.removeEventListener("p",zi,!1);var pt=ji,Ws="PointerEvent"in ge,Rt="ontouchstart"in ge,an="TouchEvent"in ge,on=Rt||an&&ze("(any-pointer: coarse)").matches,Us=(ge.navigator.maxTouchPoints||0)>0||on,Gi=ge.navigator.userAgent||"",ln=ze("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Gi)&&Math.min(ge.screen.width||0,ge.screen.height||0)>=768,js=(ze("(pointer: coarse)").matches||!ze("(pointer: fine)").matches&&Rt)&&!/Windows.*Firefox/.test(Gi),zs=ze("(any-pointer: fine)").matches||ze("(any-hover: hover)").matches||ln||!Rt;var cn=(s,r,t)=>({tooltip:s,placement:r,content:t});function dn(s,r){}function gn(s,r){s&1&&P(0,dn,0,0,"ng-template")}function pn(s,r){if(s&1&&(F(0),P(1,gn,1,0,null,1),A()),s&2){let t=g();o(),d("ngTemplateOutlet",t.template)("ngTemplateOutletContext",ct(2,cn,t.tooltip,t.placement,t.content))}}function un(s,r){if(s&1&&(F(0),l(1,"div",2),v(2),c(),A()),s&2){let t=g();o(),we("title",t.tooltip)("data-tooltip-placement",t.placement),o(),J(" ",t.content," ")}}var mn=["tooltipTemplate"],fn=["leftOuterSelectionBar"],vn=["rightOuterSelectionBar"],bn=["fullBar"],wn=["selectionBar"],xn=["minHandle"],Cn=["maxHandle"],Sn=["floorLabel"],_n=["ceilLabel"],On=["minHandleLabel"],kn=["maxHandleLabel"],Pn=["combinedLabel"],yn=["ticksElement"],Mn=s=>({"ngx-slider-selected":s});function Rn(s,r){if(s&1&&w(0,"ngx-slider-tooltip-wrapper",32),s&2){let t=g().$implicit,e=g();d("template",e.tooltipTemplate)("tooltip",t.valueTooltip)("placement",t.valueTooltipPlacement)("content",t.value)}}function In(s,r){if(s&1&&w(0,"span",33),s&2){let t=g().$implicit;d("innerText",t.legend)}}function En(s,r){if(s&1&&w(0,"span",34),s&2){let t=g().$implicit;d("innerHTML",t.legend,ei)}}function Ln(s,r){if(s&1&&(l(0,"span",27),w(1,"ngx-slider-tooltip-wrapper",28),P(2,Rn,1,4,"ngx-slider-tooltip-wrapper",29)(3,In,1,1,"span",30)(4,En,1,1,"span",31),c()),s&2){let t=r.$implicit,e=g();d("ngClass",Ce(8,Mn,t.selected))("ngStyle",t.style),o(),d("template",e.tooltipTemplate)("tooltip",t.tooltip)("placement",t.tooltipPlacement),o(),d("ngIf",t.value!=null),o(),d("ngIf",t.legend!=null&&e.allowUnsafeHtmlInSlider===!1),o(),d("ngIf",t.legend!=null&&(e.allowUnsafeHtmlInSlider==null||e.allowUnsafeHtmlInSlider))}}var pe=function(s){return s[s.Low=0]="Low",s[s.High=1]="High",s[s.Floor=2]="Floor",s[s.Ceil=3]="Ceil",s[s.TickValue=4]="TickValue",s}(pe||{}),Qe=class{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1},Qi=new Zt("AllowUnsafeHtmlInSlider"),f=function(s){return s[s.Min=0]="Min",s[s.Max=1]="Max",s}(f||{}),Et=class{value;highValue;pointerType},h=class{static isNullOrUndefined(r){return r==null}static areArraysEqual(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}static linearValueToPosition(r,t,e){let i=e-t;return(r-t)/i}static logValueToPosition(r,t,e){r=Math.log(r),t=Math.log(t),e=Math.log(e);let i=e-t;return(r-t)/i}static linearPositionToValue(r,t,e){return r*(e-t)+t}static logPositionToValue(r,t,e){t=Math.log(t),e=Math.log(e);let i=r*(e-t)+t;return Math.exp(i)}static findStepIndex(r,t){let e=t.map(n=>Math.abs(r-n.value)),i=0;for(let n=0;n<t.length;n++)e[n]!==e[i]&&e[n]<e[i]&&(i=n);return i}},_e=class{static isTouchEvent(r){return window.TouchEvent!==void 0?r instanceof TouchEvent:r.touches!==void 0}static isResizeObserverAvailable(){return window.ResizeObserver!==void 0}},z=class{static roundToPrecisionLimit(r,t){return+r.toPrecision(t)}static isModuloWithinPrecisionLimit(r,t,e){let i=Math.pow(10,-e);return Math.abs(r%t)<=i||Math.abs(Math.abs(r%t)-t)<=i}static clampToRange(r,t,e){return Math.min(Math.max(r,t),e)}},ut=class{eventName=null;events=null;eventsSubscription=null;teardownCallback=null},mt=class{renderer;constructor(r){this.renderer=r}attachPassiveEventListener(r,t,e,i){if(pt!==!0)return this.attachEventListener(r,t,e,i);let n=new ut;n.eventName=t,n.events=new Xe;let a=p=>{n.events.next(p)};return r.addEventListener(t,a,{passive:!0,capture:!1}),n.teardownCallback=()=>{r.removeEventListener(t,a,{passive:!0,capture:!1})},n.eventsSubscription=n.events.pipe(h.isNullOrUndefined(i)?V(()=>{}):Ct(i,void 0,{leading:!0,trailing:!0})).subscribe(p=>{e(p)}),n}detachEventListener(r){h.isNullOrUndefined(r.eventsSubscription)||(r.eventsSubscription.unsubscribe(),r.eventsSubscription=null),h.isNullOrUndefined(r.events)||(r.events.complete(),r.events=null),h.isNullOrUndefined(r.teardownCallback)||(r.teardownCallback(),r.teardownCallback=null)}attachEventListener(r,t,e,i){let n=new ut;n.eventName=t,n.events=new Xe;let a=p=>{n.events.next(p)};return n.teardownCallback=this.renderer.listen(r,t,a),n.eventsSubscription=n.events.pipe(h.isNullOrUndefined(i)?V(()=>{}):Ct(i,void 0,{leading:!0,trailing:!0})).subscribe(p=>{e(p)}),n}},Ee=(()=>{class s{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(t,e,i){this.elemRef=t,this.renderer=e,this.changeDetectionRef=i,this.eventListenerHelper=new mt(this.renderer)}setAlwaysHide(t){this._alwaysHide=t,t?this.visibility="hidden":this.visibility="visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return this.alwaysHide?!1:this.opacity!==0}setVertical(t){this._vertical=t,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(t){this._scale=t}setRotate(t){this._rotate=t,this.transform="rotate("+t+"deg)"}getRotate(){return this._rotate}setPosition(t){this._position!==t&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=t,this._vertical?this.bottom=Math.round(t)+"px":this.left=Math.round(t)+"px"}calculateDimension(){let t=this.getBoundingClientRect();this.vertical?this._dimension=(t.bottom-t.top)*this.scale:this._dimension=(t.right-t.left)*this.scale}setDimension(t){this._dimension!==t&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=t,this._vertical?this.height=Math.round(t)+"px":this.width=Math.round(t)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(t,e,i){let n=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,t,e,i);this.eventListeners.push(n)}onPassive(t,e,i){let n=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,t,e,i);this.eventListeners.push(n)}off(t){let e,i;h.isNullOrUndefined(t)?(e=[],i=this.eventListeners):(e=this.eventListeners.filter(n=>n.eventName!==t),i=this.eventListeners.filter(n=>n.eventName===t));for(let n of i)this.eventListenerHelper.detachEventListener(n);this.eventListeners=e}isRefDestroyed(){return h.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(e){return new(e||s)(_(Pe),_(He),_(q))};static \u0275dir=Be({type:s,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(e,i){e&2&&oe("opacity",i.opacity)("visibility",i.visibility)("left",i.left)("bottom",i.bottom)("height",i.height)("width",i.width)("transform",i.transform)}})}return s})(),It=(()=>{class s extends Ee{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}constructor(t,e,i){super(t,e,i)}static \u0275fac=function(e){return new(e||s)(_(Pe),_(He),_(q))};static \u0275dir=Be({type:s,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(e,i){e&2&&(we("role",i.role)("tabindex",i.tabindex)("aria-orientation",i.ariaOrientation)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledBy)("aria-valuenow",i.ariaValueNow)("aria-valuetext",i.ariaValueText)("aria-valuemin",i.ariaValueMin)("aria-valuemax",i.ariaValueMax),We("ngx-slider-active",i.active))},features:[_t]})}return s})(),Ge=(()=>{class s extends Ee{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(t,e,i,n){super(t,e,i),this.allowUnsafeHtmlInSlider=n}setValue(t){let e=!1;!this.alwaysHide&&(h.isNullOrUndefined(this.value)||this.value.length!==t.length||this.value.length>0&&this.dimension===0)&&(e=!0),this._value=t,this.allowUnsafeHtmlInSlider===!1?this.elemRef.nativeElement.innerText=t:this.elemRef.nativeElement.innerHTML=t,e&&this.calculateDimension()}static \u0275fac=function(e){return new(e||s)(_(Pe),_(He),_(q),_(Qi,8))};static \u0275dir=Be({type:s,selectors:[["","ngxSliderLabel",""]],features:[_t]})}return s})(),Tn=(()=>{class s{template;tooltip;placement;content;static \u0275fac=function(e){return new(e||s)};static \u0275cmp=Q({type:s,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(e,i){e&1&&P(0,pn,2,6,"ng-container",0)(1,un,3,3,"ng-container",0),e&2&&(d("ngIf",i.template),o(),d("ngIf",!i.template))},dependencies:[he,li],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return s})(),Lt=class{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null},ft=class{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0},qe=class{value;highValue;static compare(r,t){return h.isNullOrUndefined(r)&&h.isNullOrUndefined(t)||h.isNullOrUndefined(r)!==h.isNullOrUndefined(t)?!1:r.value===t.value&&r.highValue===t.highValue}},vt=class extends qe{forceChange;static compare(r,t){return h.isNullOrUndefined(r)&&h.isNullOrUndefined(t)||h.isNullOrUndefined(r)!==h.isNullOrUndefined(t)?!1:r.value===t.value&&r.highValue===t.highValue&&r.forceChange===t.forceChange}};var Nn={provide:pi,useExisting:Kt(()=>Tt),multi:!0},Tt=(()=>{class s{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;value=null;valueChange=new U;highValue=null;highValueChange=new U;options=new Qe;userChangeStart=new U;userChange=new U;userChangeEnd=new U;manualRefreshSubscription;set manualRefresh(t){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=t.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(t){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=t.subscribe(e=>{this.focusPointer(e)})}get range(){return!h.isNullOrUndefined(this.value)&&!h.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new Xe;inputModelChangeSubscription=null;outputModelChangeSubject=new Xe;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new Qe;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new ft;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(t,e,i,n,a){this.renderer=t,this.elementRef=e,this.changeDetectionRef=i,this.zone=n,this.allowUnsafeHtmlInSlider=a,this.eventListenerHelper=new mt(this.renderer)}ngOnInit(){this.viewOptions=new Qe,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(t){!h.isNullOrUndefined(t.options)&&JSON.stringify(t.options.previousValue)!==JSON.stringify(t.options.currentValue)&&this.onChangeOptions(),(!h.isNullOrUndefined(t.value)||!h.isNullOrUndefined(t.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(t){t instanceof Array?(this.value=t[0],this.highValue=t[1]):this.value=t,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.viewOptions.disabled=t,this.updateDisabledState()}setAriaLabel(t){this.viewOptions.ariaLabel=t,this.updateAriaLabel()}onResize(t){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe(Ae(vt.compare),k(t=>!t.forceChange&&!t.internalChange)).subscribe(t=>this.applyInputModelChange(t))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe(Ae(vt.compare)).subscribe(t=>this.publishOutputModelChange(t))}subscribeResizeObserver(){_e.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){_e.isResizeObserverAvailable()&&this.resizeObserver!==null&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){h.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){h.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){h.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){h.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){h.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){h.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(t){return t===f.Min?this.minHandleElement:t===f.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===f.Min?this.viewLowValue:this.currentTrackingPointer===f.Max?this.viewHighValue:null}modelValueToViewValue(t){return h.isNullOrUndefined(t)?NaN:!h.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?h.findStepIndex(+t,this.viewOptions.stepsArray):+t}viewValueToModelValue(t){return!h.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?this.getStepValue(t):t}getStepValue(t){let e=this.viewOptions.stepsArray[t];return h.isNullOrUndefined(e)?NaN:e.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(t){let e=this.normaliseModelValues(t),i=!qe.compare(t,e);i&&(this.value=e.value,this.highValue=e.highValue),this.viewLowValue=this.modelValueToViewValue(e.value),this.range?this.viewHighValue=this.modelValueToViewValue(e.highValue):this.viewHighValue=null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:e.value,highValue:e.highValue,forceChange:i,userEventInitiated:!1})}publishOutputModelChange(t){let e=()=>{this.valueChange.emit(t.value),this.range&&this.highValueChange.emit(t.highValue),h.isNullOrUndefined(this.onChangeCallback)||(this.range?this.onChangeCallback([t.value,t.highValue]):this.onChangeCallback(t.value)),h.isNullOrUndefined(this.onTouchedCallback)||(this.range?this.onTouchedCallback([t.value,t.highValue]):this.onTouchedCallback(t.value))};t.userEventInitiated?(e(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{e()})}normaliseModelValues(t){let e=new qe;if(e.value=t.value,e.highValue=t.highValue,!h.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){let i=h.findStepIndex(e.value,this.viewOptions.stepsArray);if(e.value=this.viewOptions.stepsArray[i].value,this.range){let n=h.findStepIndex(e.highValue,this.viewOptions.stepsArray);e.highValue=this.viewOptions.stepsArray[n].value}}return e}if(this.viewOptions.enforceStep&&(e.value=this.roundStep(e.value),this.range&&(e.highValue=this.roundStep(e.highValue))),this.viewOptions.enforceRange&&(e.value=z.clampToRange(e.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(e.highValue=z.clampToRange(e.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&t.value>t.highValue))if(this.viewOptions.noSwitching)e.value=e.highValue;else{let i=t.value;e.value=t.highValue,e.highValue=i}return e}renormaliseModelValues(){let t={value:this.value,highValue:this.highValue},e=this.normaliseModelValues(t);qe.compare(e,t)||(this.value=e.value,this.highValue=e.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;let t=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();let e=this.getOptionsInfluencingEventBindings(this.viewOptions),i=!h.areArraysEqual(t,e);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.resetSlider(i)}applyOptions(){if(this.viewOptions=new Qe,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!h.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!h.isNullOrUndefined(this.viewOptions.tickStep)||!h.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!h.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),h.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),h.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(t,e)=>t+" - "+e),this.viewOptions.logScale&&this.viewOptions.floor===0)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,h.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=t=>this.viewOptions.bindIndexForStepsArray?String(this.getStepValue(t)):String(t))}applyFloorCeilOptions(){if(h.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),h.isNullOrUndefined(this.viewOptions.ceil)||h.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,h.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=t=>String(t))}resetSlider(t=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),t&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions()}focusPointer(t){t!==f.Min&&t!==f.Max&&(t=f.Min),t===f.Min?this.minHandleElement.focus():this.range&&t===f.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){h.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);let t=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(t||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(t||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(t||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(let t of this.getAllSliderElements())h.isNullOrUndefined(t)||t.setVertical(this.viewOptions.vertical)}updateScale(){for(let t of this.getAllSliderElements())t.setScale(this.viewOptions.scale)}updateRotate(){for(let t of this.getAllSliderElements())t.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.minHandleElement.tabindex="0":this.minHandleElement.tabindex="",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",h.isNullOrUndefined(this.viewOptions.ariaLabel)?h.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.maxHandleElement.tabindex="0":this.maxHandleElement.tabindex="",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",h.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?h.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,pe.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,pe.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){h.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);let t=this.minHandleElement.dimension;this.handleHalfDimension=t/2,h.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-t,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass){setTimeout(()=>{this.sliderElementWithLegendClass=!1});return}let t=h.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,e=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&t.reverse();let i=h.isNullOrUndefined(this.viewOptions.tickValueStep)?h.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep,n=!1,a=t.map(p=>{let C=this.valueToPosition(p);this.viewOptions.vertical&&(C=this.maxHandlePosition-C);let y=e+"("+Math.round(C)+"px)",R=new Lt;R.selected=this.isTickSelected(p),R.style={"-webkit-transform":y,"-moz-transform":y,"-o-transform":y,"-ms-transform":y,transform:y},R.selected&&!h.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(R.style["background-color"]=this.getSelectionBarColor()),!R.selected&&!h.isNullOrUndefined(this.viewOptions.getTickColor)&&(R.style["background-color"]=this.getTickColor(p)),h.isNullOrUndefined(this.viewOptions.ticksTooltip)||(R.tooltip=this.viewOptions.ticksTooltip(p),R.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!h.isNullOrUndefined(i)&&z.isModuloWithinPrecisionLimit(p,i,this.viewOptions.precisionLimit)&&(R.value=this.getDisplayValue(p,pe.TickValue),h.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(R.valueTooltip=this.viewOptions.ticksValuesTooltip(p),R.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let X=null;if(h.isNullOrUndefined(this.viewOptions.stepsArray))h.isNullOrUndefined(this.viewOptions.getLegend)||(X=this.viewOptions.getLegend(p));else{let ve=this.viewOptions.stepsArray[p];h.isNullOrUndefined(this.viewOptions.getStepLegend)?h.isNullOrUndefined(ve)||(X=ve.legend):X=this.viewOptions.getStepLegend(ve)}return h.isNullOrUndefined(X)||(R.legend=X,n=!0),R});if(this.sliderElementWithLegendClass!==n&&setTimeout(()=>{this.sliderElementWithLegendClass=n}),!h.isNullOrUndefined(this.ticks)&&this.ticks.length===a.length)for(let p=0;p<a.length;++p)Object.assign(this.ticks[p],a[p]);else this.ticks=a,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}getTicksArray(){let t=h.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,e=[],i=1+Math.floor(z.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/t,this.viewOptions.precisionLimit));for(let n=0;n<i;++n)e.push(z.roundToPrecisionLimit(this.viewOptions.floor+t*n,this.viewOptions.precisionLimit));return e}isTickSelected(t){if(!this.range)if(h.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(t>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&t<=this.viewLowValue)return!0}else{let e=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>e&&t>=e&&t<=this.viewLowValue)return!0;if(this.viewLowValue<e&&t<=e&&t>=this.viewLowValue)return!0}return!!(this.range&&t>=this.viewLowValue&&t<=this.viewHighValue)}updateFloorLabel(){if(!this.floorLabelElement.alwaysHide){this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,pe.Floor)),this.floorLabelElement.calculateDimension();let t=this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0;this.floorLabelElement.setPosition(t)}}updateCeilLabel(){if(!this.ceilLabelElement.alwaysHide){this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,pe.Ceil)),this.ceilLabelElement.calculateDimension();let t=this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension;this.ceilLabelElement.setPosition(t)}}updateHandles(t,e){t===f.Min?this.updateLowHandle(e):t===f.Max&&this.updateHighHandle(e),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(t,e){let i=t===f.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,n=e-i/2+this.handleHalfDimension,a=this.fullBarElement.dimension-i;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&t===f.Min||!this.viewOptions.rightToLeft&&t===f.Max?Math.min(n,a):Math.min(Math.max(n,0),a):n}updateLowHandle(t){this.minHandleElement.setPosition(t),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,pe.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(f.Min,t)),h.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(f.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(t){this.maxHandleElement.setPosition(t),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,pe.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(f.Max,t)),h.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(f.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let t=!1,e=!1,i=this.isLabelBelowFloorLabel(this.minHandleLabelElement),n=this.isLabelAboveCeilLabel(this.minHandleLabelElement),a=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),p=this.isLabelBelowFloorLabel(this.combinedLabelElement),C=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(i?(t=!0,this.floorLabelElement.hide()):(t=!1,this.floorLabelElement.show()),n?(e=!0,this.ceilLabelElement.hide()):(e=!1,this.ceilLabelElement.show()),this.range){let y=this.combinedLabelElement.isVisible()?C:a,R=this.combinedLabelElement.isVisible()?p:i;y?this.ceilLabelElement.hide():e||this.ceilLabelElement.show(),R?this.floorLabelElement.hide():t||this.floorLabelElement.show()}}isLabelBelowFloorLabel(t){let e=t.position,i=t.dimension,n=this.floorLabelElement.position,a=this.floorLabelElement.dimension;return this.viewOptions.rightToLeft?e+i>=n-2:e<=n+a+2}isLabelAboveCeilLabel(t){let e=t.position,i=t.dimension,n=this.ceilLabelElement.position,a=this.ceilLabelElement.dimension;return this.viewOptions.rightToLeft?e<=n+a+2:e+i>=n-2}updateSelectionBar(){let t=0,e=0,i=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,n=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)e=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),t=n;else if(h.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))i?(e=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),t=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(e=this.minHandleElement.position+this.handleHalfDimension,t=0);else{let a=this.viewOptions.showSelectionBarFromValue,p=this.valueToPosition(a);(this.viewOptions.rightToLeft?this.viewLowValue<=a:this.viewLowValue>a)?(e=this.minHandleElement.position-p,t=p+this.handleHalfDimension):(e=p-this.minHandleElement.position,t=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(e),this.selectionBarElement.setPosition(t),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(t),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(t+e)),this.leftOuterSelectionBarElement.setPosition(t+e)):(this.leftOuterSelectionBarElement.setDimension(t),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(t+e)),this.rightOuterSelectionBarElement.setPosition(t+e))),h.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!h.isNullOrUndefined(this.viewOptions.selectionBarGradient)){let a=h.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),p=a-t>0&&!i||a-t<=0&&i,C=this.viewOptions.vertical?p?"bottom":"top":p?"left":"right";this.barStyle={backgroundImage:"linear-gradient(to "+C+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(a+e+t+(p?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=a-t+(p?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{let a=this.getSelectionBarColor();this.barStyle={backgroundColor:a}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(t){return t===f.Max?this.viewOptions.getPointerColor(this.highValue,t):this.viewOptions.getPointerColor(this.value,t)}getTickColor(t){return this.viewOptions.getTickColor(t)}updateCombinedLabel(){let t=null;if(this.viewOptions.rightToLeft?t=this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:t=this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,t){let e=this.getDisplayValue(this.viewLowValue,pe.Low),i=this.getDisplayValue(this.viewHighValue,pe.High),n=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(i,e):this.viewOptions.combineLabels(e,i);this.combinedLabelElement.setValue(n);let a=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(a),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(t,e){return!h.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(t=this.getStepValue(t)),this.viewOptions.translate(t,e)}roundStep(t,e){let i=h.isNullOrUndefined(e)?this.viewOptions.step:e,n=z.roundToPrecisionLimit((t-this.viewOptions.floor)/i,this.viewOptions.precisionLimit);return n=Math.round(n)*i,z.roundToPrecisionLimit(this.viewOptions.floor+n,this.viewOptions.precisionLimit)}valueToPosition(t){let e=h.linearValueToPosition;h.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(e=h.logValueToPosition):e=this.viewOptions.customValueToPosition,t=z.clampToRange(t,this.viewOptions.floor,this.viewOptions.ceil);let i=e(t,this.viewOptions.floor,this.viewOptions.ceil);return h.isNullOrUndefined(i)&&(i=0),this.viewOptions.rightToLeft&&(i=1-i),i*this.maxHandlePosition}positionToValue(t){let e=t/this.maxHandlePosition;this.viewOptions.rightToLeft&&(e=1-e);let i=h.linearPositionToValue;h.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(i=h.logPositionToValue):i=this.viewOptions.customPositionToValue;let n=i(e,this.viewOptions.floor,this.viewOptions.ceil);return h.isNullOrUndefined(n)?0:n}getEventXY(t,e){if(t instanceof MouseEvent)return this.viewOptions.vertical||this.viewOptions.rotate!==0?t.clientY:t.clientX;let i=0,n=t.touches;if(!h.isNullOrUndefined(e)){for(let a=0;a<n.length;a++)if(n[a].identifier===e){i=a;break}}return this.viewOptions.vertical||this.viewOptions.rotate!==0?n[i].clientY:n[i].clientX}getEventPosition(t,e){let i=this.elementRef.nativeElement.getBoundingClientRect(),n=this.viewOptions.vertical||this.viewOptions.rotate!==0?i.bottom:i.left,a=0;return this.viewOptions.vertical||this.viewOptions.rotate!==0?a=-this.getEventXY(t,e)+n:a=this.getEventXY(t,e)-n,a*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(t){if(!this.range)return f.Min;let e=this.getEventPosition(t),i=Math.abs(e-this.minHandleElement.position),n=Math.abs(e-this.maxHandleElement.position);return i<n?f.Min:i>n?f.Max:this.viewOptions.rightToLeft?e>this.minHandleElement.position?f.Min:f.Max:e<this.minHandleElement.position?f.Min:f.Max}bindEvents(){let t=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",e=>this.onBarStart(null,t,e,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",e=>this.onBarStart(f.Min,t,e,!0,!0)),this.maxHandleElement.on("mousedown",e=>this.onBarStart(f.Max,t,e,!0,!0))):(this.minHandleElement.on("mousedown",e=>this.onStart(f.Min,e,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",e=>this.onStart(f.Max,e,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",e=>this.onStart(null,e,!0,!0,!0)),this.ticksElement.on("mousedown",e=>this.onStart(null,e,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",e=>this.onBarStart(null,t,e,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",e=>this.onBarStart(f.Min,t,e,!0,!0)),this.maxHandleElement.onPassive("touchstart",e=>this.onBarStart(f.Max,t,e,!0,!0))):(this.minHandleElement.onPassive("touchstart",e=>this.onStart(f.Min,e,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",e=>this.onStart(f.Max,e,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",e=>this.onStart(null,e,!0,!0,!0)),this.ticksElement.onPassive("touchstart",e=>this.onStart(null,e,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(f.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(f.Max)))}getOptionsInfluencingEventBindings(t){return[t.disabled,t.readOnly,t.draggableRange,t.draggableRangeOnly,t.onlyBindHandles,t.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(let t of this.getAllSliderElements())h.isNullOrUndefined(t)||t.off()}onBarStart(t,e,i,n,a,p,C){e?this.onDragStart(t,i,n,a):this.onStart(t,i,n,a,p,C)}onStart(t,e,i,n,a,p){e.stopPropagation(),!_e.isTouchEvent(e)&&!pt&&e.preventDefault(),this.moving=!1,this.calculateViewDimensions(),h.isNullOrUndefined(t)&&(t=this.getNearestHandle(e)),this.currentTrackingPointer=t;let C=this.getPointerElement(t);if(C.active=!0,this.viewOptions.keyboardSupport&&C.focus(),i){this.unsubscribeOnMove();let y=R=>this.dragging.active?this.onDragMove(R):this.onMove(R);_e.isTouchEvent(e)?this.onMoveEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",y):this.onMoveEventListener=this.eventListenerHelper.attachEventListener(document,"mousemove",y)}if(n){this.unsubscribeOnEnd();let y=R=>this.onEnd(R);_e.isTouchEvent(e)?this.onEndEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchend",y):this.onEndEventListener=this.eventListenerHelper.attachEventListener(document,"mouseup",y)}this.userChangeStart.emit(this.getChangeContext()),_e.isTouchEvent(e)&&!h.isNullOrUndefined(e.changedTouches)&&h.isNullOrUndefined(this.touchId)&&(this.touchId=e.changedTouches[0].identifier),a&&this.onMove(e,!0),p&&this.onEnd(e)}onMove(t,e){let i=null;if(_e.isTouchEvent(t)){let y=t.changedTouches;for(let R=0;R<y.length;R++)if(y[R].identifier===this.touchId){i=y[R];break}if(h.isNullOrUndefined(i))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let n=h.isNullOrUndefined(i)?this.getEventPosition(t):this.getEventPosition(t,i.identifier),a,p=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil,C=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor;n<=0?a=C:n>=this.maxHandlePosition?a=p:(a=this.positionToValue(n),e&&!h.isNullOrUndefined(this.viewOptions.tickStep)?a=this.roundStep(a,this.viewOptions.tickStep):a=this.roundStep(a)),this.positionTrackingHandle(a)}onEnd(t){_e.isTouchEvent(t)&&t.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(t){let e=this.getPointerElement(t);e.on("blur",()=>this.onPointerBlur(e)),e.on("keydown",i=>this.onKeyboardEvent(i)),e.on("keyup",()=>this.onKeyUp()),e.active=!0,this.currentTrackingPointer=t,this.currentFocusPointer=t,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(t){t.off("blur"),t.off("keydown"),t.off("keyup"),t.active=!1,h.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(t){let e=this.viewOptions.ceil-this.viewOptions.floor,i=t+this.viewOptions.step,n=t-this.viewOptions.step,a=t+e/10,p=t-e/10;this.viewOptions.reversedControls&&(i=t-this.viewOptions.step,n=t+this.viewOptions.step,a=t-e/10,p=t+e/10);let C={UP:i,DOWN:n,LEFT:n,RIGHT:i,PAGEUP:a,PAGEDOWN:p,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(C.LEFT=i,C.RIGHT=n,(this.viewOptions.vertical||this.viewOptions.rotate!==0)&&(C.UP=n,C.DOWN=i)),C}onKeyboardEvent(t){let e=this.getCurrentTrackingValue(),i=h.isNullOrUndefined(t.keyCode)?t.which:t.keyCode,n={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},a=this.getKeyActions(e),p=n[i],C=a[p];if(h.isNullOrUndefined(C)||h.isNullOrUndefined(this.currentTrackingPointer))return;t.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));let y=z.clampToRange(C,this.viewOptions.floor,this.viewOptions.ceil),R=this.roundStep(y);if(!this.viewOptions.draggableRangeOnly)this.positionTrackingHandle(R);else{let X=this.viewHighValue-this.viewLowValue,ve,Le;this.currentTrackingPointer===f.Min?(ve=R,Le=R+X,Le>this.viewOptions.ceil&&(Le=this.viewOptions.ceil,ve=Le-X)):this.currentTrackingPointer===f.Max&&(Le=R,ve=R-X,ve<this.viewOptions.floor&&(ve=this.viewOptions.floor,Le=ve+X)),this.positionTrackingBar(ve,Le)}}onDragStart(t,e,i,n){let a=this.getEventPosition(e);this.dragging=new ft,this.dragging.active=!0,this.dragging.value=this.positionToValue(a),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-a:a-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?a-this.maxHandleElement.position:this.maxHandleElement.position-a,this.onStart(t,e,i,n)}getMinValue(t,e,i){let n=this.viewOptions.rightToLeft,a=null;return e?i?a=n?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:a=n?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:a=n?this.positionToValue(t+this.dragging.lowLimit):this.positionToValue(t-this.dragging.lowLimit),this.roundStep(a)}getMaxValue(t,e,i){let n=this.viewOptions.rightToLeft,a=null;return e?i?a=n?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:a=n?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:n?a=this.positionToValue(t+this.dragging.lowLimit)+this.dragging.difference:a=this.positionToValue(t-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(a)}onDragMove(t){let e=this.getEventPosition(t);this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let i,n,a,p;this.viewOptions.rightToLeft?(i=this.dragging.lowLimit,n=this.dragging.highLimit,a=this.maxHandleElement,p=this.minHandleElement):(i=this.dragging.highLimit,n=this.dragging.lowLimit,a=this.minHandleElement,p=this.maxHandleElement);let C=e<=n,y=e>=this.maxHandlePosition-i,R,X;if(C){if(a.position===0)return;R=this.getMinValue(e,!0,!1),X=this.getMaxValue(e,!0,!1)}else if(y){if(p.position===this.maxHandlePosition)return;X=this.getMaxValue(e,!0,!0),R=this.getMinValue(e,!0,!0)}else R=this.getMinValue(e,!1,!1),X=this.getMaxValue(e,!1,!1);this.positionTrackingBar(R,X)}positionTrackingBar(t,e){!h.isNullOrUndefined(this.viewOptions.minLimit)&&t<this.viewOptions.minLimit&&(t=this.viewOptions.minLimit,e=z.roundToPrecisionLimit(t+this.dragging.difference,this.viewOptions.precisionLimit)),!h.isNullOrUndefined(this.viewOptions.maxLimit)&&e>this.viewOptions.maxLimit&&(e=this.viewOptions.maxLimit,t=z.roundToPrecisionLimit(e-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=t,this.viewHighValue=e,this.applyViewChange(),this.updateHandles(f.Min,this.valueToPosition(t)),this.updateHandles(f.Max,this.valueToPosition(e))}positionTrackingHandle(t){t=this.applyMinMaxLimit(t),this.range&&(this.viewOptions.pushRange?t=this.applyPushRange(t):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===f.Min&&t>this.viewHighValue?t=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===f.Max&&t<this.viewLowValue&&(t=this.applyMinMaxRange(this.viewLowValue))),t=this.applyMinMaxRange(t),this.currentTrackingPointer===f.Min&&t>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(f.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=f.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===f.Max&&t<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(f.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=f.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==t&&(this.currentTrackingPointer===f.Min?(this.viewLowValue=t,this.applyViewChange()):this.currentTrackingPointer===f.Max&&(this.viewHighValue=t,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(t)),this.updateAriaAttributes())}applyMinMaxLimit(t){return!h.isNullOrUndefined(this.viewOptions.minLimit)&&t<this.viewOptions.minLimit?this.viewOptions.minLimit:!h.isNullOrUndefined(this.viewOptions.maxLimit)&&t>this.viewOptions.maxLimit?this.viewOptions.maxLimit:t}applyMinMaxRange(t){let e=this.currentTrackingPointer===f.Min?this.viewHighValue:this.viewLowValue,i=Math.abs(t-e);if(!h.isNullOrUndefined(this.viewOptions.minRange)&&i<this.viewOptions.minRange){if(this.currentTrackingPointer===f.Min)return z.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===f.Max)return z.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!h.isNullOrUndefined(this.viewOptions.maxRange)&&i>this.viewOptions.maxRange){if(this.currentTrackingPointer===f.Min)return z.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===f.Max)return z.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return t}applyPushRange(t){let e=this.currentTrackingPointer===f.Min?this.viewHighValue-t:t-this.viewLowValue,i=h.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,n=this.viewOptions.maxRange;return e<i?(this.currentTrackingPointer===f.Min?(this.viewHighValue=z.roundToPrecisionLimit(Math.min(t+i,this.viewOptions.ceil),this.viewOptions.precisionLimit),t=z.roundToPrecisionLimit(this.viewHighValue-i,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(f.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===f.Max&&(this.viewLowValue=z.roundToPrecisionLimit(Math.max(t-i,this.viewOptions.floor),this.viewOptions.precisionLimit),t=z.roundToPrecisionLimit(this.viewLowValue+i,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(f.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!h.isNullOrUndefined(n)&&e>n&&(this.currentTrackingPointer===f.Min?(this.viewHighValue=z.roundToPrecisionLimit(t+n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(f.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===f.Max&&(this.viewLowValue=z.roundToPrecisionLimit(t-n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(f.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),t}getChangeContext(){let t=new Et;return t.pointerType=this.currentTrackingPointer,t.value=+this.value,this.range&&(t.highValue=+this.highValue),t}static \u0275fac=function(e){return new(e||s)(_(He),_(Pe),_(q),_(ot),_(Qi,8))};static \u0275cmp=Q({type:s,selectors:[["ngx-slider"]],contentQueries:function(e,i,n){if(e&1&&ri(n,mn,5),e&2){let a;B(a=$())&&(i.tooltipTemplate=a.first)}},viewQuery:function(e,i){if(e&1&&(W(fn,5,Ee),W(vn,5,Ee),W(bn,5,Ee),W(wn,5,Ee),W(xn,5,It),W(Cn,5,It),W(Sn,5,Ge),W(_n,5,Ge),W(On,5,Ge),W(kn,5,Ge),W(Pn,5,Ge),W(yn,5,Ee)),e&2){let n;B(n=$())&&(i.leftOuterSelectionBarElement=n.first),B(n=$())&&(i.rightOuterSelectionBarElement=n.first),B(n=$())&&(i.fullBarElement=n.first),B(n=$())&&(i.selectionBarElement=n.first),B(n=$())&&(i.minHandleElement=n.first),B(n=$())&&(i.maxHandleElement=n.first),B(n=$())&&(i.floorLabelElement=n.first),B(n=$())&&(i.ceilLabelElement=n.first),B(n=$())&&(i.minHandleLabelElement=n.first),B(n=$())&&(i.maxHandleLabelElement=n.first),B(n=$())&&(i.combinedLabelElement=n.first),B(n=$())&&(i.ticksElement=n.first)}},hostAttrs:[1,"ngx-slider"],hostVars:8,hostBindings:function(e,i){e&1&&H("resize",function(a){return i.onResize(a)},!1,$e),e&2&&(we("disabled",i.sliderElementDisabledAttr)("aria-label",i.sliderElementAriaLabel),We("vertical",i.sliderElementVerticalClass)("animate",i.sliderElementAnimateClass)("with-legend",i.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[ht([Nn]),at],decls:29,vars:13,consts:[["leftOuterSelectionBar",""],["rightOuterSelectionBar",""],["fullBar",""],["selectionBar",""],["minHandle",""],["maxHandle",""],["floorLabel",""],["ceilLabel",""],["minHandleLabel",""],["maxHandleLabel",""],["combinedLabel",""],["ticksElement",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(e,i){e&1&&(l(0,"span",12,0),w(2,"span",13),c(),l(3,"span",14,1),w(5,"span",13),c(),l(6,"span",15,2),w(8,"span",13),c(),l(9,"span",16,3),w(11,"span",17),c(),w(12,"span",18,4)(14,"span",19,5)(16,"span",20,6)(18,"span",21,7)(20,"span",22,8)(22,"span",23,9)(24,"span",24,10),l(26,"span",25,11),P(28,Ln,5,10,"span",26),c()),e&2&&(o(6),We("ngx-slider-transparent",i.fullBarTransparentClass),o(3),We("ngx-slider-draggable",i.selectionBarDraggableClass),o(2),d("ngStyle",i.barStyle),o(),d("ngStyle",i.minPointerStyle),o(2),oe("display",i.range?"inherit":"none"),d("ngStyle",i.maxPointerStyle),o(12),We("ngx-slider-ticks-values-under",i.ticksUnderValuesClass),d("hidden",!i.showTicks),o(2),d("ngForOf",i.ticks))},dependencies:[fe,Re,he,dt,Ee,It,Ge,Tn],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}'],changeDetection:0})}return s})(),qi=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=Jt({type:s});static \u0275inj=Xt({imports:[gt]})}return s})();function Dn(s,r){if(s&1&&(l(0,"div",9)(1,"span")(2,"code"),v(3),c(),v(4),c()()),s&2){let t=r.$implicit,e=g().$implicit;o(3),N(t.key),o(),J(" ",e(t.description),"")}}function Vn(s,r){if(s&1){let t=K();F(0),l(1,"div",1)(2,"h4",2),v(3),c(),l(4,"button",3),H("click",function(){I(t);let i=g();return E(i.close())}),c()(),l(5,"div",4)(6,"div",5),P(7,Dn,5,2,"div",6),c()(),l(8,"div",7)(9,"button",8),H("click",function(){I(t);let i=g();return E(i.close())}),v(10),c()(),A()}if(s&2){let t=r.$implicit,e=g();o(3),N(t("title")),o(),we("aria-label",t("close")),o(3),d("ngForOf",e.shortcuts),o(3),N(t("close"))}}var Ki=(()=>{let r=class r{constructor(e){this.modal=e,this.shortcuts=[]}close(){this.modal.close()}};r.\u0275fac=function(i){return new(i||r)(_(yi))},r.\u0275cmp=Q({type:r,selectors:[["app-shortcuts-modal"]],inputs:{shortcuts:"shortcuts"},standalone:!0,features:[Y],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","g-0"],["class","col-md-6  mb-2",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-md-6","mb-2"]],template:function(i,n){i&1&&P(0,Vn,11,4,"ng-container",0),i&2&&d("translocoRead","shortcuts-modal")},dependencies:[gt,Re,Ri,je],styles:["/*# sourceMappingURL=shortcuts-modal.component-B4FKMW6N.css.map */"],changeDetection:0});let s=r;return s})();var ee=(()=>{let r=class r{constructor(e,i){this.readerService=i,this.pageDimensions={},this.pairs={},this.renderer=e.createRenderer(null,null)}load(e){e.pageDimensions.forEach(i=>{this.pageDimensions[i.pageNumber]={height:i.height,width:i.width,isWide:i.isWide}}),this.pairs=e.doublePairs}adjustForDoubleReader(e){return this.pairs.hasOwnProperty(e)?this.pairs[e]:e}getPageDimensions(e){return this.pageDimensions.hasOwnProperty(e)?this.pageDimensions[e]:null}isWidePage(e){return this.pageDimensions.hasOwnProperty(e)?this.pageDimensions[e].isWide:!1}maxHeight(){return Object.values(this.pageDimensions).reduce((e,i)=>Math.max(e,i.height),0)}maxWidth(){return Object.values(this.pageDimensions).reduce((e,i)=>Math.max(e,i.width),0)}isCoverImage(e){return e===0}isNoSplit(e){let i=parseInt(e+"",10);return i===G.NoSplit||i===G.FitSplit}isSplitLeftToRight(e){return parseInt(e+"",10)===G.SplitLeftToRight}isSecondLastImage(e,i){return i-2===e}isLastImage(e,i){return i-1===e}shouldSplit(e,i){let n=this.isWidePage(this.readerService.imageUrlToPageNum(e?.src));return!(this.isNoSplit(i)||!n)}shouldRenderAsFitSplit(e){return parseInt(e+"",10)===G.FitSplit}translateScalingOption(e){switch(e){case Fe.Automatic:{let i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=i/n;return n>i?M.WIDTH:i>=n||a>1?M.HEIGHT:M.WIDTH}case Fe.FitToHeight:return M.HEIGHT;case Fe.FitToWidth:return M.WIDTH;default:return M.ORIGINAL}}applyBookmarkEffect(e){e.length>0&&(e.forEach(i=>this.renderer.addClass(i,"bookmark-effect")),setTimeout(()=>{e.forEach(i=>this.renderer.removeClass(i,"bookmark-effect"))},1e3))}};r.\u0275fac=function(i){return new(i||r)(St(ti),St(ne))},r.\u0275prov=Yt({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var Oe=(()=>{let r=class r{constructor(){this.sanitizer=T(ci)}transform(e){return this.sanitizer.bypassSecurityTrustStyle(e)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275pipe=Me({name:"safeStyle",type:r,pure:!0,standalone:!0});let s=r;return s})();var Fn=["content"],An=s=>({"d-none":s}),Bn=[G.SplitLeftToRight,G.SplitRightToLeft],Nt=(()=>{let r=class r{constructor(e,i,n){this.cdRef=e,this.mangaReaderService=i,this.readerService=n,this.imageHeight=new U,this.destroyRef=T(te),this.currentImageSplitPart=L.NO_SPLIT,this.pagingDirection=S.FORWARD,this.fit=M.ORIGINAL,this.pageSplit=G.FitSplit,this.layoutMode=D.Single,this.canvasImage=null,this.darkness$=re("brightness(100%)"),this.renderWithCanvas=!1}ngOnInit(){this.readerSettings$.pipe(b(this.destroyRef),V(e=>{this.fit=e.fitting,this.pageSplit=e.pageSplit,this.layoutMode=e.layoutMode;let i=this.pageSplit!=e.pageSplit;this.pagingDirection=e.pagingDirection,i&&this.reset()})).subscribe(()=>{}),this.darkness$=this.readerSettings$.pipe(x(e=>"brightness("+e.darkness+"%)"),k(e=>this.isValid()),b(this.destroyRef)),this.imageFitClass$=this.readerSettings$.pipe(b(this.destroyRef),x(e=>e.fitting),x(e=>e===M.WIDTH||this.canvasImage===null?e:this.mangaReaderService.isWidePage(this.readerService.imageUrlToPageNum(this.canvasImage.src))&&this.mangaReaderService.shouldRenderAsFitSplit(this.pageSplit)?M.WIDTH:e),k(()=>this.isValid())),this.bookmark$.pipe(b(this.destroyRef),V(e=>{if(this.currentImageSplitPart===L.NO_SPLIT||!this.canvas)return;let i=[this.canvas?.nativeElement];this.mangaReaderService.applyBookmarkEffect(i)})).subscribe(()=>{}),this.showClickOverlayClass$=this.showClickOverlay$.pipe(x(e=>e?"blur":""),b(this.destroyRef))}ngAfterViewInit(){this.canvas&&(this.ctx=this.canvas.nativeElement.getContext("2d",{alpha:!1}))}reset(){this.currentImageSplitPart=L.NO_SPLIT}updateSplitPage(){if(this.canvasImage==null)return;let e=this.mangaReaderService.isWidePage(this.readerService.imageUrlToPageNum(this.canvasImage.src));if(!e||this.mangaReaderService.isNoSplit(this.pageSplit))return this.currentImageSplitPart=L.NO_SPLIT,e;let i=this.mangaReaderService.isSplitLeftToRight(this.pageSplit);if(this.pagingDirection===S.FORWARD)switch(this.currentImageSplitPart){case L.NO_SPLIT:this.currentImageSplitPart=i?L.LEFT_PART:L.RIGHT_PART;break;case L.LEFT_PART:let n=e?L.RIGHT_PART:L.NO_SPLIT;this.currentImageSplitPart=i?L.RIGHT_PART:n;break;case L.RIGHT_PART:let a=e?L.LEFT_PART:L.NO_SPLIT;this.currentImageSplitPart=i?a:L.LEFT_PART;break}else if(this.pagingDirection===S.BACKWARDS)switch(this.currentImageSplitPart){case L.NO_SPLIT:this.currentImageSplitPart=i?L.RIGHT_PART:L.LEFT_PART;break;case L.LEFT_PART:let n=e?L.RIGHT_PART:L.NO_SPLIT;this.currentImageSplitPart=i?n:L.RIGHT_PART;break;case L.RIGHT_PART:this.currentImageSplitPart=i?L.LEFT_PART:e?L.LEFT_PART:L.NO_SPLIT;break}return e}isValid(){return this.renderWithCanvas}renderPage(e){if(this.renderWithCanvas=!1,e===null||e.length===0||e[0]===null||!this.ctx||!this.canvas||(this.canvasImage=e[0],this.cdRef.markForCheck(),this.layoutMode!==D.Single||!Bn.includes(this.pageSplit)))return;let i=this.updateSplitPage();i&&(this.renderWithCanvas=!0,this.currentImageSplitPart!==L.NO_SPLIT&&(this.setCanvasSize(),i&&this.currentImageSplitPart===L.LEFT_PART?(this.canvas.nativeElement.width=this.canvasImage.width/2,this.ctx.drawImage(this.canvasImage,0,0,this.canvasImage.width,this.canvasImage.height,0,0,this.canvasImage.width,this.canvasImage.height),this.cdRef.markForCheck()):i&&this.currentImageSplitPart===L.RIGHT_PART&&(this.canvas.nativeElement.width=this.canvasImage.width/2,this.ctx.drawImage(this.canvasImage,0,0,this.canvasImage.width,this.canvasImage.height,-this.canvasImage.width/2,0,this.canvasImage.width,this.canvasImage.height),this.cdRef.markForCheck()),this.cdRef.markForCheck()))}getPageAmount(e){if(this.canvasImage===null||!this.mangaReaderService.isWidePage(this.readerService.imageUrlToPageNum(this.canvasImage.src)))return 1;switch(e){case S.FORWARD:return this.shouldMoveNext()?1:0;case S.BACKWARDS:return this.shouldMovePrev()?1:0}}shouldMoveNext(){if(this.mangaReaderService.isNoSplit(this.pageSplit))return!0;let e=this.mangaReaderService.isSplitLeftToRight(this.pageSplit);return this.currentImageSplitPart!==(this.mangaReaderService.isSplitLeftToRight(this.pageSplit)?L.LEFT_PART:L.RIGHT_PART)}shouldMovePrev(){return this.mangaReaderService.isNoSplit(this.pageSplit)?!0:this.currentImageSplitPart!==(this.mangaReaderService.isSplitLeftToRight(this.pageSplit)?L.RIGHT_PART:L.LEFT_PART)}setCanvasSize(){if(this.canvasImage==null||!this.ctx||!this.canvas)return;let e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,i=e?16777216:124992400;this.canvasImage.width*this.canvasImage.height>i?(this.canvas.nativeElement.width=e?4096:16384,this.canvas.nativeElement.height=e?4096:16384):(this.canvas.nativeElement.width=this.canvasImage.width,this.canvas.nativeElement.height=this.canvasImage.height),this.imageHeight.emit(this.canvas.nativeElement.height),this.cdRef.markForCheck()}getBookmarkPageCount(){return 1}};r.\u0275fac=function(i){return new(i||r)(_(q),_(ee),_(ne))},r.\u0275cmp=Q({type:r,selectors:[["app-canvas-renderer"]],viewQuery:function(i,n){if(i&1&&W(Fn,5),i&2){let a;B(a=$())&&(n.canvas=a.first)}},inputs:{readerSettings$:"readerSettings$",image$:"image$",bookmark$:"bookmark$",showClickOverlay$:"showClickOverlay$",imageFit$:"imageFit$"},outputs:{imageHeight:"imageHeight"},standalone:!0,features:[Y],decls:7,vars:19,consts:[["content",""],[3,"ngClass"],["ondragstart","return false;","onselectstart","return false;"]],template:function(i,n){if(i&1&&(l(0,"div",1),u(1,"async"),u(2,"async"),u(3,"safeStyle"),w(4,"canvas",2,0),u(6,"async"),c()),i&2){let a;De("image-container ",m(1,9,n.imageFitClass$),""),oe("filter",m(3,13,(a=m(2,11,n.darkness$))!==null&&a!==void 0?a:"")),d("ngClass",Ce(17,An,!n.renderWithCanvas)),o(4),Je(m(6,15,n.imageFitClass$))}},dependencies:[fe,ie,Oe],styles:[`img[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.image-container[_ngcontent-%COMP%]{text-align:center;align-items:center}.image-container.full-width[_ngcontent-%COMP%]{height:calc(var(--vh) * 100);display:grid}.image-container.full-height[_ngcontent-%COMP%]{height:100vh;display:flex;align-content:center}.image-container.original[_ngcontent-%COMP%]{height:100vh;display:grid}.image-container[_ngcontent-%COMP%]   .full-height[_ngcontent-%COMP%]{width:auto;margin:auto;max-height:calc(var(--vh) * 100);overflow:hidden;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-height.wide[_ngcontent-%COMP%]{height:100vh}.image-container[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{align-self:center;width:auto;margin:0 auto;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin:0 auto;vertical-align:top;max-width:fit-content}.image-container[_ngcontent-%COMP%]   .fit-to-screen.full-width[_ngcontent-%COMP%]{width:100%;max-height:calc(var(--vh) * 100)}.bookmark-effect[_ngcontent-%COMP%]{animation:bookmark .7s cubic-bezier(.165,.84,.44,1)}.highlight[_ngcontent-%COMP%]{background-color:var(--manga-reader-next-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.highlight-2[_ngcontent-%COMP%]{background-color:var(--manga-reader-prev-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{content:"";position:absolute;top:0;left:50%;height:100%;box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e}@supports (-moz-appearance: none){  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e,0 0 1px .5px #0000006e}}
/*# sourceMappingURL=canvas-renderer.component-Y5PY4VRZ.css.map */`],changeDetection:0});let s=r;return s})();var $n=s=>({"center-double":s});function Wn(s,r){if(s&1&&(F(0),w(1,"img",3,0),u(3,"async"),u(4,"async"),u(5,"async"),A()),s&2){let t=g(2);o(),le("",m(3,6,t.imageFitClass$)," ",m(4,8,t.readerModeClass$)," ",m(5,10,t.showClickOverlayClass$),""),d("src",t.currentImage.src,ae)}}function Un(s,r){if(s&1&&(F(0),w(1,"img",4),u(2,"async"),u(3,"async"),u(4,"async"),A()),s&2){let t=g(2);o(),le("image-2 ",m(2,6,t.imageFitClass$)," ",m(3,8,t.readerModeClass$)," ",m(4,10,t.showClickOverlayClass$),""),d("src",t.currentImage2.src,ae)}}function jn(s,r){if(s&1&&(F(0),l(1,"div",2),u(2,"async"),u(3,"async"),u(4,"async"),u(5,"async"),u(6,"safeStyle"),u(7,"async"),P(8,Wn,6,12,"ng-container",1)(9,Un,5,12,"ng-container",1),u(10,"async"),c(),A()),s&2){let t,e=g();o(),le("image-container ",m(2,10,e.imageFitClass$)," ",m(3,12,e.layoutClass$)," ",m(4,14,e.emulateBookClass$),""),oe("filter",m(6,18,(t=m(5,16,e.darkness$))!==null&&t!==void 0?t:"")),d("ngClass",Ce(24,$n,m(7,20,e.shouldRenderDouble$))),o(7),d("ngIf",e.currentImage),o(),d("ngIf",m(10,22,e.shouldRenderDouble$))}}var Ht=(()=>{let r=class r{constructor(e,i,n,a){this.cdRef=e,this.mangaReaderService=i,this.document=n,this.readerService=a,this.imageHeight=new U,this.destroyRef=T(te),this.debugMode=0,this.darkness$=re("brightness(100%)"),this.emulateBookClass$=re(""),this.layoutMode=D.Single,this.pageSplit=G.FitSplit,this.pageNum=0,this.maxPages=0,this.currentImage=new Image,this.currentImage2=new Image,this.ReaderMode=O,this.LayoutMode=D}ngOnInit(){this.readerModeClass$=this.readerSettings$.pipe(x(e=>e.readerMode),x(e=>e===O.LeftRight||e===O.UpDown?"":"d-none"),k(e=>this.isValid()),b(this.destroyRef)),this.darkness$=this.readerSettings$.pipe(x(e=>"brightness("+e.darkness+"%)"),k(e=>this.isValid()),b(this.destroyRef)),this.emulateBookClass$=this.readerSettings$.pipe(x(e=>e.emulateBook),x(e=>e?"book-shadow":""),k(e=>this.isValid()),b(this.destroyRef)),this.showClickOverlayClass$=this.showClickOverlay$.pipe(x(e=>e?"blur":""),k(e=>this.isValid()),b(this.destroyRef)),this.pageNum$.pipe(b(this.destroyRef),V(e=>{this.pageNum=e.pageNum,this.maxPages=e.maxPages,this.currentImage=this.getPage(this.pageNum),this.currentImage2=this.getPage(this.pageNum+1),this.cdRef.markForCheck()}),k(e=>this.isValid())).subscribe(()=>{}),this.shouldRenderDouble$=this.pageNum$.pipe(b(this.destroyRef),x(e=>this.shouldRenderDouble()),k(e=>this.isValid())),this.imageFitClass$=this.readerSettings$.pipe(b(this.destroyRef),x(e=>e.fitting),k(e=>this.isValid()),be()),this.layoutClass$=ye([this.shouldRenderDouble$,this.readerSettings$]).pipe(b(this.destroyRef),x(e=>e[0]&&e[1].fitting===M.WIDTH?"fit-to-width-double-offset":e[0]&&e[1].fitting===M.HEIGHT?"fit-to-height-double-offset":e[0]&&e[1].fitting===M.ORIGINAL?"original-double-offset":this.mangaReaderService.isWidePage(this.pageNum)?"double-offset":""),k(e=>this.isValid())),this.readerSettings$.pipe(b(this.destroyRef),V(e=>{this.layoutMode=e.layoutMode,this.pageSplit=e.pageSplit,this.cdRef.markForCheck()})).subscribe(()=>{}),this.bookmark$.pipe(b(this.destroyRef),V(e=>{let i=[],n=this.document.querySelector("#image-1");n!=null&&i.push(n);let a=this.document.querySelector("#image-2");a!=null&&i.push(a),this.mangaReaderService.applyBookmarkEffect(i)}),k(e=>this.isValid())).subscribe(()=>{})}shouldRenderDouble(){return this.isValid()?this.mangaReaderService.isCoverImage(this.pageNum)?(this.debugLog("Not rendering double as current page is cover image"),!1):this.mangaReaderService.isWidePage(this.pageNum)?(this.debugLog("Not rendering double as current page is wide image"),!1):this.mangaReaderService.isSecondLastImage(this.pageNum,this.maxPages)?(this.debugLog("Not rendering double as current page is last"),!1):this.mangaReaderService.isLastImage(this.pageNum,this.maxPages)?(this.debugLog("Not rendering double as current page is last"),!1):this.mangaReaderService.isWidePage(this.pageNum+1)?(this.debugLog("Not rendering double as next page is wide image"),!1):!0:!1}isValid(){return this.layoutMode===D.Double}renderPage(e){if(!(e===null||e.length===0||e[0]===null)&&this.isValid()){if(!this.shouldRenderDouble()&&(this.currentImage.height||e[0].height)>0){this.imageHeight.emit(this.currentImage.height||e[0].height);return}this.cdRef.markForCheck(),this.imageHeight.emit(Math.max(this.currentImage.height,this.currentImage2.height)),this.cdRef.markForCheck()}}shouldMovePrev(){return!0}shouldMoveNext(){return!0}getPageAmount(e){if(!this.isValid())return 0;switch(e){case S.FORWARD:return this.mangaReaderService.isCoverImage(this.pageNum)?(this.debugLog("Moving forward 1 page as on cover image"),1):this.mangaReaderService.isWidePage(this.pageNum)?(this.debugLog("Moving forward 1 page as current page is wide"),1):this.mangaReaderService.isWidePage(this.pageNum+1)?(this.debugLog("Moving forward 1 page as next page is wide"),1):this.mangaReaderService.isSecondLastImage(this.pageNum,this.maxPages)?(this.debugLog("Moving forward 1 page as 2 pages left"),1):this.mangaReaderService.isLastImage(this.pageNum,this.maxPages)?(this.debugLog("Moving forward 1 page as 1 page left"),1):(this.debugLog("Moving forward 2 pages"),2);case S.BACKWARDS:return this.mangaReaderService.isCoverImage(this.pageNum)?(this.debugLog("Moving back 1 page as on cover image"),1):this.mangaReaderService.adjustForDoubleReader(this.pageNum-1)!=this.pageNum-1&&!this.mangaReaderService.isWidePage(this.pageNum-2)?(this.debugLog("Moving back 2 pages as previous pair should be in a pair"),2):this.mangaReaderService.isWidePage(this.pageNum)?(this.debugLog("Moving back 1 page as current page is wide"),1):this.mangaReaderService.isWidePage(this.pageNum-1)?(this.debugLog("Moving back 1 page as prev page is wide"),1):this.mangaReaderService.isWidePage(this.pageNum-2)?(this.debugLog("Moving back 1 page as 2 pages back is wide"),1):(this.debugLog("Moving back 2 pages"),2)}}reset(){}getBookmarkPageCount(){return this.shouldRenderDouble()?2:1}debugLog(e,i){this.debugMode&2&&(i!==void 0?console.log(e,i):console.log(e))}};r.\u0275fac=function(i){return new(i||r)(_(q),_(ee),_(me),_(ne))},r.\u0275cmp=Q({type:r,selectors:[["app-double-renderer"]],inputs:{readerSettings$:"readerSettings$",image$:"image$",bookmark$:"bookmark$",showClickOverlay$:"showClickOverlay$",pageNum$:"pageNum$",getPage:"getPage"},outputs:{imageHeight:"imageHeight"},standalone:!0,features:[Y],decls:1,vars:1,consts:[["image",""],[4,"ngIf"],[3,"ngClass"],["alt"," ","id","image-1",3,"src"],["alt"," ","id","image-2",3,"src"]],template:function(i,n){i&1&&P(0,jn,11,26,"ng-container",1),i&2&&d("ngIf",n.isValid())},dependencies:[he,fe,ie,Oe],styles:[`img[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.image-container[_ngcontent-%COMP%]{text-align:center;align-items:center}.image-container.full-width[_ngcontent-%COMP%]{height:calc(var(--vh) * 100);display:grid}.image-container.full-height[_ngcontent-%COMP%]{height:100vh;display:flex;align-content:center}.image-container.original[_ngcontent-%COMP%]{height:100vh;display:grid}.image-container[_ngcontent-%COMP%]   .full-height[_ngcontent-%COMP%]{width:auto;margin:auto;max-height:calc(var(--vh) * 100);overflow:hidden;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-height.wide[_ngcontent-%COMP%]{height:100vh}.image-container[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{align-self:center;width:auto;margin:0 auto;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin:0 auto;vertical-align:top;max-width:fit-content}.image-container[_ngcontent-%COMP%]   .fit-to-screen.full-width[_ngcontent-%COMP%]{width:100%;max-height:calc(var(--vh) * 100)}.bookmark-effect[_ngcontent-%COMP%]{animation:bookmark .7s cubic-bezier(.165,.84,.44,1)}.highlight[_ngcontent-%COMP%]{background-color:var(--manga-reader-next-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.highlight-2[_ngcontent-%COMP%]{background-color:var(--manga-reader-prev-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{content:"";position:absolute;top:0;left:50%;height:100%;box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e}@supports (-moz-appearance: none){  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e,0 0 1px .5px #0000006e}}.image-container[_ngcontent-%COMP%]   #image-1.double[_ngcontent-%COMP%]{margin:0 0 0 auto}.image-container.full-height[_ngcontent-%COMP%]{display:inline-block!important}.full-width[_ngcontent-%COMP%]{width:100%;margin:0 auto;vertical-align:top;max-width:fit-content}.full-width.double[_ngcontent-%COMP%]{width:50%}.full-width.double.cover[_ngcontent-%COMP%]{width:100%}.center-double[_ngcontent-%COMP%]{display:flex;overflow:unset}.fit-to-width-double-offset[_ngcontent-%COMP%], .original-double-offset[_ngcontent-%COMP%]{max-width:100%}.fit-to-height-double-offset[_ngcontent-%COMP%]{height:100vh;object-fit:scale-down;top:50%;left:50%;max-width:100%}
/*# sourceMappingURL=double-renderer.component-CWN66N4M.css.map */`],changeDetection:0});let s=r;return s})();var zn=(s,r)=>({"center-double":s,reverse:r});function Gn(s,r){if(s&1&&(F(0),w(1,"img",3,0),u(3,"async"),u(4,"async"),u(5,"async"),A()),s&2){let t=g(2);o(),le("",m(3,6,t.imageFitClass$)," ",m(4,8,t.readerModeClass$)," ",m(5,10,t.showClickOverlayClass$),""),d("src",t.leftImage.src,ae)}}function Qn(s,r){if(s&1&&(F(0),w(1,"img",4),u(2,"async"),u(3,"async"),u(4,"async"),A()),s&2){let t=g(2);o(),le("image-2 ",m(2,6,t.imageFitClass$)," ",m(3,8,t.readerModeClass$)," ",m(4,10,t.showClickOverlayClass$),""),d("src",t.rightImage.src,ae)}}function qn(s,r){if(s&1&&(F(0),l(1,"div",2),u(2,"async"),u(3,"async"),u(4,"async"),u(5,"safeStyle"),u(6,"async"),u(7,"async"),P(8,Gn,6,12,"ng-container",1)(9,Qn,5,12,"ng-container",1),u(10,"async"),c(),A()),s&2){let t,e=g();o(),xe("image-container ",m(2,9,e.layoutClass$)," ",m(3,11,e.emulateBookClass$),""),oe("filter",m(5,15,(t=m(4,13,e.darkness$))!==null&&t!==void 0?t:"")),d("ngClass",Ue(23,zn,m(6,17,e.shouldRenderDouble$),m(7,19,e.shouldRenderDouble$))),o(7),d("ngIf",e.leftImage),o(),d("ngIf",m(10,21,e.shouldRenderDouble$))}}var Dt=(()=>{let r=class r{get ReaderMode(){return O}get FITTING_OPTION(){return M}get LayoutMode(){return D}constructor(e,i,n,a){this.cdRef=e,this.mangaReaderService=i,this.document=n,this.readerService=a,this.imageHeight=new U,this.destroyRef=T(te),this.debugMode=0,this.darkness$=re("brightness(100%)"),this.emulateBookClass$=re(""),this.layoutMode=D.Single,this.pageSplit=G.FitSplit,this.pageNum=0,this.maxPages=0,this.leftImage=new Image,this.rightImage=new Image}ngOnInit(){this.readerModeClass$=this.readerSettings$.pipe(k(e=>this.isValid()),x(e=>e.readerMode),x(e=>e===O.LeftRight||e===O.UpDown?"":"d-none"),b(this.destroyRef)),this.darkness$=this.readerSettings$.pipe(x(e=>"brightness("+e.darkness+"%)"),k(e=>this.isValid()),b(this.destroyRef)),this.emulateBookClass$=this.readerSettings$.pipe(x(e=>e.emulateBook),x(e=>e?"book-shadow":""),k(e=>this.isValid()),b(this.destroyRef)),this.showClickOverlayClass$=this.showClickOverlay$.pipe(x(e=>e?"blur":""),k(e=>this.isValid()),b(this.destroyRef)),this.pageNum$.pipe(b(this.destroyRef),V(e=>{this.pageNum=e.pageNum,this.maxPages=e.maxPages,this.leftImage=this.getPage(this.pageNum),this.rightImage=this.getPage(this.pageNum+1)}),k(e=>this.isValid())).subscribe(()=>{}),this.shouldRenderDouble$=this.pageNum$.pipe(b(this.destroyRef),x(()=>this.shouldRenderDouble()),k(()=>this.isValid()),be()),this.imageFitClass$=this.readerSettings$.pipe(b(this.destroyRef),x(e=>e.fitting),k(e=>this.isValid()),be()),this.layoutClass$=ye([this.shouldRenderDouble$,this.readerSettings$]).pipe(b(this.destroyRef),x(e=>e[0]&&e[1].fitting===M.WIDTH?"fit-to-width-double-offset":e[0]&&e[1].fitting===M.HEIGHT?"fit-to-height-double-offset":e[0]&&e[1].fitting===M.ORIGINAL?"original-double-offset":this.mangaReaderService.isWidePage(this.pageNum)?"double-offset":""),k(e=>this.isValid())),this.readerSettings$.pipe(b(this.destroyRef),V(e=>{this.layoutMode=e.layoutMode,this.pageSplit=e.pageSplit,this.cdRef.markForCheck()})).subscribe(()=>{}),this.bookmark$.pipe(b(this.destroyRef),V(e=>{let i=[],n=this.document.querySelector("#image-1");n!=null&&i.push(n);let a=this.document.querySelector("#image-2");a!=null&&i.push(a),this.mangaReaderService.applyBookmarkEffect(i)}),k(e=>this.isValid())).subscribe(()=>{})}shouldRenderDouble(){return this.isValid()?this.mangaReaderService.isCoverImage(this.pageNum)?(this.debugLog("Not rendering double as current page is cover image"),!1):this.mangaReaderService.isWidePage(this.pageNum)?(this.debugLog("Not rendering double as current page is wide image"),!1):this.mangaReaderService.isSecondLastImage(this.pageNum,this.maxPages)?(this.debugLog("Not rendering double as current page is last"),!1):this.mangaReaderService.isWidePage(this.pageNum+1)?(this.debugLog("Not rendering double as next page is wide image"),!1):this.mangaReaderService.isLastImage(this.pageNum,this.maxPages)?(this.debugLog("Not rendering double as current page is last and there are an odd number of pages"),!1):!0:!1}isValid(){return this.layoutMode===D.DoubleReversed}renderPage(e){e===null||e.length===0||e[0]===null||this.isValid()&&(this.imageHeight.emit(Math.max(this.leftImage.height,this.rightImage.height)),this.cdRef.markForCheck())}shouldMovePrev(){return!0}shouldMoveNext(){return!0}getPageAmount(e){if(this.layoutMode!==D.DoubleReversed)return 0;switch(e){case S.FORWARD:return this.mangaReaderService.isCoverImage(this.pageNum)?(this.debugLog("Moving forward 1 page as on cover image"),1):this.mangaReaderService.isWidePage(this.pageNum)?(this.debugLog("Moving forward 1 page as current page is wide"),1):this.mangaReaderService.isWidePage(this.pageNum+1)?(this.debugLog("Moving forward 1 page as current page is wide"),1):this.mangaReaderService.isSecondLastImage(this.pageNum,this.maxPages)?(this.debugLog("Moving forward 1 page as 2 pages left"),1):this.mangaReaderService.isLastImage(this.pageNum,this.maxPages)?(this.debugLog("Moving forward 2 pages as right image is the last page and we just rendered double page"),2):(this.debugLog("Moving forward 2 pages"),2);case S.BACKWARDS:return this.mangaReaderService.isCoverImage(this.pageNum)?(this.debugLog("Moving back 1 page as on cover image"),1):this.mangaReaderService.adjustForDoubleReader(this.pageNum-1)!=this.pageNum-1&&!this.mangaReaderService.isWidePage(this.pageNum-2)?(this.debugLog("Moving back 2 pages as previous pair should be in a pair"),2):this.mangaReaderService.isWidePage(this.pageNum)?(this.debugLog("Moving back 1 page as left page is wide"),1):this.mangaReaderService.isWidePage(this.pageNum)&&!this.mangaReaderService.isWidePage(this.pageNum-4)?(this.debugLog("Moving back 1 page as left page is wide"),1):this.mangaReaderService.isWidePage(this.pageNum-1)?(this.debugLog("Moving back 1 page as prev page is wide"),1):this.mangaReaderService.isWidePage(this.pageNum-2)?(this.debugLog("Moving back 1 page as 2 pages back is wide"),1):this.mangaReaderService.isWidePage(this.pageNum+2)?(this.debugLog("Moving back 2 page as 2 pages back is wide"),1):this.mangaReaderService.isSecondLastImage(this.pageNum,this.maxPages)?(this.debugLog("Moving back 1 page as 2 pages left"),1):(this.debugLog("Moving back 2 pages"),2)}}reset(){}getBookmarkPageCount(){return this.shouldRenderDouble()?2:1}debugLog(e,i){this.debugMode&2&&(i!==void 0?console.log(e,i):console.log(e))}};r.\u0275fac=function(i){return new(i||r)(_(q),_(ee),_(me),_(ne))},r.\u0275cmp=Q({type:r,selectors:[["app-double-reverse-renderer"]],inputs:{readerSettings$:"readerSettings$",image$:"image$",bookmark$:"bookmark$",showClickOverlay$:"showClickOverlay$",pageNum$:"pageNum$",getPage:"getPage"},outputs:{imageHeight:"imageHeight"},standalone:!0,features:[Y],decls:1,vars:1,consts:[["image",""],[4,"ngIf"],[3,"ngClass"],["alt"," ","id","image-1",3,"src"],["alt"," ","id","image-2",3,"src"]],template:function(i,n){i&1&&P(0,qn,11,26,"ng-container",1),i&2&&d("ngIf",n.isValid())},dependencies:[he,fe,ie,Oe],styles:[`img[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.image-container[_ngcontent-%COMP%]{text-align:center;align-items:center}.image-container.full-width[_ngcontent-%COMP%]{height:calc(var(--vh) * 100);display:grid}.image-container.full-height[_ngcontent-%COMP%]{height:100vh;display:flex;align-content:center}.image-container.original[_ngcontent-%COMP%]{height:100vh;display:grid}.image-container[_ngcontent-%COMP%]   .full-height[_ngcontent-%COMP%]{width:auto;margin:auto;max-height:calc(var(--vh) * 100);overflow:hidden;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-height.wide[_ngcontent-%COMP%]{height:100vh}.image-container[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{align-self:center;width:auto;margin:0 auto;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin:0 auto;vertical-align:top;max-width:fit-content}.image-container[_ngcontent-%COMP%]   .fit-to-screen.full-width[_ngcontent-%COMP%]{width:100%;max-height:calc(var(--vh) * 100)}.bookmark-effect[_ngcontent-%COMP%]{animation:bookmark .7s cubic-bezier(.165,.84,.44,1)}.highlight[_ngcontent-%COMP%]{background-color:var(--manga-reader-next-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.highlight-2[_ngcontent-%COMP%]{background-color:var(--manga-reader-prev-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{content:"";position:absolute;top:0;left:50%;height:100%;box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e}@supports (-moz-appearance: none){  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e,0 0 1px .5px #0000006e}}.image-container[_ngcontent-%COMP%]{height:100vh}.image-container.reverse[_ngcontent-%COMP%]{overflow:unset;display:flex;align-content:center;justify-content:center;flex-direction:row-reverse}.image-container.reverse[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:unset}.image-container[_ngcontent-%COMP%]   #image-1.double[_ngcontent-%COMP%]{margin:0 0 0 auto}.image-container[_ngcontent-%COMP%]   #image-2.double[_ngcontent-%COMP%]{margin:0 auto 0 0}.image-container.full-height[_ngcontent-%COMP%]{display:inline-block}.full-width[_ngcontent-%COMP%]{width:100%;margin:0 auto;vertical-align:top;max-width:fit-content}.full-width.double[_ngcontent-%COMP%]{width:50%}.full-width.double.cover[_ngcontent-%COMP%]{width:100%}.center-double[_ngcontent-%COMP%]{display:flex;overflow:unset}.fit-to-width-double-offset[_ngcontent-%COMP%], .original-double-offset[_ngcontent-%COMP%]{max-width:100%}.fit-to-height-double-offset[_ngcontent-%COMP%]{height:100vh;object-fit:scale-down;top:50%;left:50%;max-width:100%}
/*# sourceMappingURL=double-reverse-renderer.component-3CNDU7H3.css.map */`],changeDetection:0});let s=r;return s})();function Kn(s,r){if(s&1&&(w(0,"img",2,0),u(2,"async"),u(3,"async"),u(4,"async")),s&2){let t=g(2);le("",m(2,6,t.imageFitClass$)," ",m(3,8,t.readerModeClass$)," ",m(4,10,t.showClickOverlayClass$),""),d("src",t.currentImage.src,ae)}}function Yn(s,r){if(s&1&&(l(0,"div"),u(1,"async"),u(2,"async"),u(3,"async"),u(4,"safeStyle"),u(5,"async"),u(6,"safeStyle"),P(7,Kn,5,12,"img",1),c()),s&2){let t,e,i=g();xe("image-container ",m(1,9,i.imageFitClass$)," ",m(2,11,i.emulateBookClass$),""),oe("filter",m(4,15,(t=m(3,13,i.darkness$))!==null&&t!==void 0?t:""))("height",m(6,19,(e=m(5,17,i.imageContainerHeight$))!==null&&e!==void 0?e:"")),o(7),et(7,i.currentImage?7:-1)}}var Vt=(()=>{let r=class r{get ReaderMode(){return O}get LayoutMode(){return D}constructor(e,i,n){this.cdRef=e,this.mangaReaderService=i,this.document=n,this.imageHeight=new U,this.destroyRef=T(te),this.darkness$=re("brightness(100%)"),this.layoutMode=D.Single,this.pageSplit=G.FitSplit,this.pageNum=0,this.maxPages=1}ngOnInit(){this.readerModeClass$=this.readerSettings$.pipe(x(e=>e.readerMode),x(e=>e===O.LeftRight||e===O.UpDown?"":"d-none"),k(e=>this.isValid()),b(this.destroyRef)),this.emulateBookClass$=this.readerSettings$.pipe(x(e=>e.emulateBook),x(e=>e?"book-shadow":""),k(e=>this.isValid()),b(this.destroyRef)),this.imageContainerHeight$=this.image$.pipe(k(e=>this.isValid()),Ze(e=>(this.cdRef.markForCheck(),this.calculateImageContainerHeight$())),b(this.destroyRef)),this.pageNum$.pipe(b(this.destroyRef),V(e=>{this.pageNum=e.pageNum,this.maxPages=e.maxPages})).subscribe(()=>{}),this.darkness$=this.readerSettings$.pipe(x(e=>"brightness("+e.darkness+"%)"),k(e=>this.isValid()),b(this.destroyRef)),this.showClickOverlayClass$=this.showClickOverlay$.pipe(x(e=>e?"blur":""),b(this.destroyRef),k(e=>this.isValid())),this.readerSettings$.pipe(b(this.destroyRef),V(e=>{this.layoutMode=e.layoutMode,this.pageSplit=e.pageSplit,this.cdRef.markForCheck()})).subscribe(()=>{}),this.bookmark$.pipe(b(this.destroyRef),V(e=>{let i=[],n=this.document.querySelector("#image-1");n!=null&&i.push(n),this.mangaReaderService.applyBookmarkEffect(i)}),k(e=>this.isValid())).subscribe(()=>{}),this.imageFitClass$=ye([this.readerSettings$,this.pageNum$]).pipe(x(e=>e[0].fitting),x(e=>this.mangaReaderService.isWidePage(this.pageNum)&&this.mangaReaderService.shouldRenderAsFitSplit(this.pageSplit)?M.WIDTH+" fit-to-screen wide":e),be({refCount:!0,bufferSize:1}),k(e=>this.isValid()),b(this.destroyRef))}calculateImageContainerHeight$(){return this.readerSettings$.pipe(x(e=>e.fitting),x(e=>{if(e!==M.HEIGHT)return"";let i=this.document.querySelector(".reading-area");return i&&this.currentImage?.width-i.scrollWidth>0?"calc(100vh - 34px)":"calc(100vh)"}),k(e=>this.isValid()))}isValid(){return this.layoutMode===D.Single}renderPage(e){e===null||e.length===0||e[0]===null||this.isValid()&&(this.currentImage=e[0],this.cdRef.markForCheck(),this.imageHeight.emit(this.currentImage.height))}shouldMovePrev(){return!0}shouldMoveNext(){return!0}getPageAmount(e){return!this.isValid()||this.mangaReaderService.shouldSplit(this.currentImage,this.pageSplit)?0:1}reset(){}getBookmarkPageCount(){return 1}};r.\u0275fac=function(i){return new(i||r)(_(q),_(ee),_(me))},r.\u0275cmp=Q({type:r,selectors:[["app-single-renderer"]],inputs:{readerSettings$:"readerSettings$",image$:"image$",bookmark$:"bookmark$",showClickOverlay$:"showClickOverlay$",pageNum$:"pageNum$"},outputs:{imageHeight:"imageHeight"},standalone:!0,features:[Y],decls:1,vars:1,consts:[["image",""],["alt"," ","id","image-1"],["alt"," ","id","image-1",3,"src"]],template:function(i,n){i&1&&P(0,Yn,8,21,"div"),i&2&&et(0,n.isValid()&&!n.mangaReaderService.shouldSplit(n.currentImage,n.pageSplit)?0:-1)},dependencies:[ie,Oe],styles:[`img[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.image-container[_ngcontent-%COMP%]{text-align:center;align-items:center}.image-container.full-width[_ngcontent-%COMP%]{height:calc(var(--vh) * 100);display:grid}.image-container.full-height[_ngcontent-%COMP%]{height:100vh;display:flex;align-content:center}.image-container.original[_ngcontent-%COMP%]{height:100vh;display:grid}.image-container[_ngcontent-%COMP%]   .full-height[_ngcontent-%COMP%]{width:auto;margin:auto;max-height:calc(var(--vh) * 100);overflow:hidden;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-height.wide[_ngcontent-%COMP%]{height:100vh}.image-container[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{align-self:center;width:auto;margin:0 auto;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin:0 auto;vertical-align:top;max-width:fit-content}.image-container[_ngcontent-%COMP%]   .fit-to-screen.full-width[_ngcontent-%COMP%]{width:100%;max-height:calc(var(--vh) * 100)}.bookmark-effect[_ngcontent-%COMP%]{animation:bookmark .7s cubic-bezier(.165,.84,.44,1)}.highlight[_ngcontent-%COMP%]{background-color:var(--manga-reader-next-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.highlight-2[_ngcontent-%COMP%]{background-color:var(--manga-reader-prev-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{content:"";position:absolute;top:0;left:50%;height:100%;box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e}@supports (-moz-appearance: none){  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e,0 0 1px .5px #0000006e}}
/*# sourceMappingURL=single-renderer.component-YVWS2QHQ.css.map */`],changeDetection:0});let s=r;return s})();var Xn=s=>({"center-double":s});function Zn(s,r){if(s&1&&(F(0),w(1,"img",3,0),u(3,"async"),u(4,"async"),u(5,"async"),A()),s&2){let t=g(2);o(),le("",m(3,6,t.imageFitClass$)," ",m(4,8,t.readerModeClass$)," ",m(5,10,t.showClickOverlayClass$),""),d("src",t.currentImage.src,ae)}}function Jn(s,r){if(s&1&&(F(0),w(1,"img",4),u(2,"async"),u(3,"async"),u(4,"async"),A()),s&2){let t=g(2);o(),le("image-2 ",m(2,6,t.imageFitClass$)," ",m(3,8,t.readerModeClass$)," ",m(4,10,t.showClickOverlayClass$),""),d("src",t.currentImage2.src,ae)}}function es(s,r){if(s&1&&(F(0),l(1,"div",2),u(2,"async"),u(3,"async"),u(4,"async"),u(5,"async"),u(6,"safeStyle"),u(7,"async"),P(8,Zn,6,12,"ng-container",1)(9,Jn,5,12,"ng-container",1),u(10,"async"),c(),A()),s&2){let t,e=g();o(),le("image-container ",m(2,10,e.imageFitClass$)," ",m(3,12,e.layoutClass$)," ",m(4,14,e.emulateBookClass$),""),oe("filter",m(6,18,(t=m(5,16,e.darkness$))!==null&&t!==void 0?t:"")),d("ngClass",Ce(24,Xn,m(7,20,e.shouldRenderDouble$))),o(7),d("ngIf",e.currentImage),o(),d("ngIf",m(10,22,e.shouldRenderDouble$))}}var Ft=(()=>{let r=class r{get ReaderMode(){return O}get FITTING_OPTION(){return M}get LayoutMode(){return D}constructor(e,i,n,a){this.cdRef=e,this.mangaReaderService=i,this.document=n,this.readerService=a,this.imageHeight=new U,this.destroyRef=T(te),this.debugMode=2,this.darkness$=re("brightness(100%)"),this.emulateBookClass$=re(""),this.layoutMode=D.Single,this.pageSplit=G.FitSplit,this.pageNum=0,this.maxPages=0,this.currentImage=new Image,this.currentImage2=new Image}ngOnInit(){this.readerModeClass$=this.readerSettings$.pipe(x(e=>e.readerMode),x(e=>e===O.LeftRight||e===O.UpDown?"":"d-none"),k(e=>this.isValid()),b(this.destroyRef)),this.darkness$=this.readerSettings$.pipe(x(e=>"brightness("+e.darkness+"%)"),k(e=>this.isValid()),b(this.destroyRef)),this.emulateBookClass$=this.readerSettings$.pipe(x(e=>e.emulateBook),x(e=>e?"book-shadow":""),k(e=>this.isValid()),b(this.destroyRef)),this.showClickOverlayClass$=this.showClickOverlay$.pipe(x(e=>e?"blur":""),k(e=>this.isValid()),b(this.destroyRef)),this.pageNum$.pipe(b(this.destroyRef),V(e=>{this.pageNum=e.pageNum,this.maxPages=e.maxPages,this.currentImage=this.getPage(this.pageNum),this.currentImage2=this.getPage(this.pageNum+1),this.cdRef.markForCheck()}),k(e=>this.isValid())).subscribe(()=>{}),this.shouldRenderDouble$=this.pageNum$.pipe(b(this.destroyRef),x(e=>this.shouldRenderDouble()),k(e=>this.isValid())),this.imageFitClass$=this.readerSettings$.pipe(b(this.destroyRef),x(e=>e.fitting),k(e=>this.isValid()),be()),this.layoutClass$=ye([this.shouldRenderDouble$,this.readerSettings$]).pipe(b(this.destroyRef),x(e=>e[0]&&e[1].fitting===M.WIDTH?"fit-to-width-double-offset":e[0]&&e[1].fitting===M.HEIGHT?"fit-to-height-double-offset":e[0]&&e[1].fitting===M.ORIGINAL?"original-double-offset":""),k(e=>this.isValid())),this.readerSettings$.pipe(b(this.destroyRef),V(e=>{this.layoutMode=e.layoutMode,this.pageSplit=e.pageSplit,this.cdRef.markForCheck()})).subscribe(()=>{}),this.bookmark$.pipe(b(this.destroyRef),V(e=>{let i=[],n=this.document.querySelector("#image-1");n!=null&&i.push(n);let a=this.document.querySelector("#image-2");a!=null&&i.push(a),this.mangaReaderService.applyBookmarkEffect(i)}),k(e=>this.isValid())).subscribe(()=>{})}shouldRenderDouble(){return this.isValid()?this.mangaReaderService.isWidePage(this.pageNum)?(this.debugLog("Not rendering double as current page is wide image"),!1):this.mangaReaderService.isSecondLastImage(this.pageNum,this.maxPages)?(this.debugLog("Not rendering double as current page is last"),!1):this.mangaReaderService.isLastImage(this.pageNum,this.maxPages)?(this.debugLog("Not rendering double as current page is last"),!1):this.mangaReaderService.isWidePage(this.pageNum+1)?(this.debugLog("Not rendering double as next page is wide image"),!1):!0:!1}isValid(){return this.layoutMode===D.DoubleNoCover}renderPage(e){if(!(e===null||e.length===0||e[0]===null)&&this.isValid()){if(!this.shouldRenderDouble()&&(this.currentImage.height||e[0].height)>0){this.imageHeight.emit(this.currentImage.height||e[0].height);return}this.cdRef.markForCheck(),this.imageHeight.emit(Math.max(this.currentImage.height,this.currentImage2.height)),this.cdRef.markForCheck()}}shouldMovePrev(){return!0}shouldMoveNext(){return!0}getPageAmount(e){if(!this.isValid())return 0;switch(e){case S.FORWARD:return this.mangaReaderService.isWidePage(this.pageNum)?(this.debugLog("Moving forward 1 page as current page is wide"),1):this.mangaReaderService.isWidePage(this.pageNum+1)?(this.debugLog("Moving forward 1 page as next page is wide"),1):this.mangaReaderService.isCoverImage(this.pageNum)?(this.debugLog("Moving forward 2 page as on cover image"),2):this.mangaReaderService.isSecondLastImage(this.pageNum,this.maxPages)?(this.debugLog("Moving forward 1 page as 2 pages left"),1):this.mangaReaderService.isLastImage(this.pageNum,this.maxPages)?(this.debugLog("Moving forward 1 page as 1 page left"),1):(this.debugLog("Moving forward 2 pages"),2);case S.BACKWARDS:return this.mangaReaderService.isCoverImage(this.pageNum-1)?(this.debugLog("Moving back 1 page as on cover image"),2):this.mangaReaderService.isCoverImage(this.pageNum)?(this.debugLog("Moving back 1 page as on cover image"),2):this.mangaReaderService.adjustForDoubleReader(this.pageNum-1)!=this.pageNum-1&&!this.mangaReaderService.isWidePage(this.pageNum-2)?(this.debugLog("Moving back 2 pages as previous pair should be in a pair"),2):this.mangaReaderService.isWidePage(this.pageNum)?(this.debugLog("Moving back 1 page as current page is wide"),1):this.mangaReaderService.isWidePage(this.pageNum-1)?(this.debugLog("Moving back 1 page as prev page is wide"),1):this.mangaReaderService.isWidePage(this.pageNum-2)?(this.debugLog("Moving back 1 page as 2 pages back is wide"),1):(this.debugLog("Moving back 2 pages"),2)}}reset(){}getBookmarkPageCount(){return this.shouldRenderDouble()?2:1}debugLog(e,i){this.debugMode&2&&(i!==void 0?console.log(e,i):console.log(e))}};r.\u0275fac=function(i){return new(i||r)(_(q),_(ee),_(me),_(ne))},r.\u0275cmp=Q({type:r,selectors:[["app-double-no-cover-renderer"]],inputs:{readerSettings$:"readerSettings$",image$:"image$",bookmark$:"bookmark$",showClickOverlay$:"showClickOverlay$",pageNum$:"pageNum$",getPage:"getPage"},outputs:{imageHeight:"imageHeight"},standalone:!0,features:[Y],decls:1,vars:1,consts:[["image",""],[4,"ngIf"],[3,"ngClass"],["alt"," ","id","image-1",3,"src"],["alt"," ","id","image-2",3,"src"]],template:function(i,n){i&1&&P(0,es,11,26,"ng-container",1),i&2&&d("ngIf",n.isValid())},dependencies:[he,fe,ie,Oe],styles:[`img[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.image-container[_ngcontent-%COMP%]{text-align:center;align-items:center}.image-container.full-width[_ngcontent-%COMP%]{height:calc(var(--vh) * 100);display:grid}.image-container.full-height[_ngcontent-%COMP%]{height:100vh;display:flex;align-content:center}.image-container.original[_ngcontent-%COMP%]{height:100vh;display:grid}.image-container[_ngcontent-%COMP%]   .full-height[_ngcontent-%COMP%]{width:auto;margin:auto;max-height:calc(var(--vh) * 100);overflow:hidden;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-height.wide[_ngcontent-%COMP%]{height:100vh}.image-container[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{align-self:center;width:auto;margin:0 auto;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin:0 auto;vertical-align:top;max-width:fit-content}.image-container[_ngcontent-%COMP%]   .fit-to-screen.full-width[_ngcontent-%COMP%]{width:100%;max-height:calc(var(--vh) * 100)}.bookmark-effect[_ngcontent-%COMP%]{animation:bookmark .7s cubic-bezier(.165,.84,.44,1)}.highlight[_ngcontent-%COMP%]{background-color:var(--manga-reader-next-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.highlight-2[_ngcontent-%COMP%]{background-color:var(--manga-reader-prev-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{content:"";position:absolute;top:0;left:50%;height:100%;box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e}@supports (-moz-appearance: none){  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e,0 0 1px .5px #0000006e}}.image-container[_ngcontent-%COMP%]{height:100vh}.image-container[_ngcontent-%COMP%]   #image-1.double[_ngcontent-%COMP%]{margin:0 0 0 auto}.image-container.full-height[_ngcontent-%COMP%]{display:inline-block!important}.full-width[_ngcontent-%COMP%]{width:100%;margin:0 auto;vertical-align:top;max-width:fit-content}.full-width.double[_ngcontent-%COMP%]{width:50%}.full-width.double.cover[_ngcontent-%COMP%]{width:100%}.center-double[_ngcontent-%COMP%]{display:flex;overflow:unset}.fit-to-width-double-offset[_ngcontent-%COMP%], .original-double-offset[_ngcontent-%COMP%]{max-width:100%}.fit-to-height-double-offset[_ngcontent-%COMP%]{height:100vh;object-fit:scale-down;top:50%;left:50%;max-width:100%}
/*# sourceMappingURL=double-no-cover-renderer.component-5AZRKCMU.css.map */`],changeDetection:0});let s=r;return s})();var Yi=(()=>{let r=class r{transform(e){return e?"fa-compress-alt":"fa-expand-alt"}};r.\u0275fac=function(i){return new(i||r)},r.\u0275pipe=Me({name:"fullscreenIcon",type:r,pure:!0,standalone:!0});let s=r;return s})();var Xi=(()=>{let r=class r{transform(e){switch(e){case O.LeftRight:return"fa-exchange-alt";case O.UpDown:return"fa-exchange-alt fa-rotate-90";case O.Webtoon:return"fa-arrows-alt-v";default:return""}}};r.\u0275fac=function(i){return new(i||r)},r.\u0275pipe=Me({name:"readerModeIcon",type:r,pure:!0,standalone:!0});let s=r;return s})();var Zi=(()=>{let r=class r{transform(e){switch(e){case M.HEIGHT:return"fa fa-arrows-alt-v";case M.WIDTH:return"fa fa-arrows-alt-h";case M.ORIGINAL:return"fa fa-expand-arrows-alt"}}};r.\u0275fac=function(i){return new(i||r)},r.\u0275pipe=Me({name:"fittingIcon",type:r,pure:!0,standalone:!0});let s=r;return s})();var ts=["bottomSpacer"];function is(s,r){if(s&1&&(l(0,"div",13)(1,"strong"),v(2,"Captures Scroll Events:"),c(),v(3),l(4,"strong"),v(5,"Is Scrolling:"),c(),v(6),l(7,"strong"),v(8,"All Images Loaded:"),c(),v(9),l(10,"strong"),v(11,"Prefetched"),c(),v(12),l(13,"strong"),v(14,"Pages:"),c(),v(15),l(16,"strong"),v(17,"At Top:"),c(),v(18),l(19,"strong"),v(20,"At Bottom:"),c(),v(21),l(22,"strong"),v(23,"Total Height:"),c(),v(24),l(25,"strong"),v(26,"Total Scroll:"),c(),v(27),l(28,"strong"),v(29,"Scroll Top:"),c(),v(30),c()),s&2){let t=g(2);o(3),J(" ",!t.isScrolling&&t.allImagesLoaded," "),o(3),lt(" ",t.isScrollingForwards()?"Forwards":"Backwards"," ",t.isScrolling," "),o(3),J(" ",t.allImagesLoaded," "),o(3),lt(" ",t.minPageLoaded,"-",t.maxPageLoaded," "),o(3),lt(" ",t.pageNum," / ",t.totalPages-1," "),o(3),J(" ",t.atTop," "),o(3),J(" ",t.atBottom," "),o(3),J(" ",t.getTotalHeight()," "),o(3),J(" ",t.getTotalScroll()," "),o(3),J(" ",t.getScrollTop()," ")}}function ns(s,r){if(s&1){let t=K();l(0,"div",14,1),H("click",function(){I(t);let i=g(2);return E(i.loadPrevChapter.emit())}),w(2,"div",12),l(3,"div")(4,"button",8),w(5,"i",15),c(),l(6,"span",10),v(7),c(),l(8,"button",8),w(9,"i",15),c(),l(10,"span",11),v(11),c()()()}if(s&2){let t=g().$implicit;o(7),N(t("continuous-reading-prev-chapter")),o(4),N(t("continuous-reading-prev-chapter-alt"))}}function ss(s,r){if(s&1){let t=K();F(0),l(1,"img",16),H("load",function(i){I(t);let n=g(2);return E(n.onImageLoad(i))}),c(),A()}if(s&2){let t=r.$implicit,e=g(2);o(),xe("mx-auto ",e.pageNum===t.page&&e.showDebugOutline()?"active":""," ",e.areImagesWiderThanWindow?"full-width":"",""),tt("src",t.src,ae),si("id","page-",t.page,""),we("page",t.page)}}function rs(s,r){if(s&1){let t=K();F(0),P(1,is,31,13,"div",3)(2,ns,12,2,"div",4),l(3,"div",5),P(4,ss,2,8,"ng-container",6),u(5,"async"),c(),l(6,"div",7,0),H("click",function(){I(t);let i=g();return E(i.loadNextChapter.emit())}),l(8,"div")(9,"button",8),w(10,"i",9),c(),l(11,"span",10),v(12),c(),l(13,"button",8),w(14,"i",9),c(),l(15,"span",11),v(16),c()(),w(17,"div",12),c(),A()}if(s&2){let t=r.$implicit,e=g();o(),d("ngIf",e.showDebugBar()),o(),d("ngIf",e.atTop),o(),d("infiniteScrollDistance",1)("infiniteScrollThrottle",50),o(),d("ngForOf",m(5,7,e.webtoonImages)),o(8),N(t("continuous-reading-next-chapter")),o(4),N(t("continuous-reading-next-chapter-alt"))}}var At=200,Ji=(()=>{let r=class r{get minPageLoaded(){return Math.min(...Object.values(this.imagesLoaded))}get maxPageLoaded(){return Math.max(...Object.values(this.imagesLoaded))}get areImagesWiderThanWindow(){let[e,i]=this.getInnerDimensions();return this.webtoonImageWidth>(i||document.body.clientWidth)}constructor(e){this.document=e,this.mangaReaderService=T(ee),this.readerService=T(ne),this.renderer=T(He),this.scrollService=T(Bi),this.cdRef=T(q),this.pageNum=0,this.bufferPages=5,this.totalPages=0,this.pageNumberChange=new U,this.loadNextChapter=new U,this.loadPrevChapter=new U,this.bookmarkPage=new ke,this.fullscreenToggled=new ke,this.bottomSpacerIntersectionObserver=new IntersectionObserver(n=>this.handleBottomIntersection(n),{threshold:1}),this.destroyRef=T(te),this.webtoonImages=new Te([]),this.intersectionObserver=new IntersectionObserver(n=>this.handleIntersection(n),{threshold:.01}),this.scrollingDirection=S.FORWARD,this.prevScrollPosition=0,this.currentPageElem=null,this.webtoonImageWidth=window.innerWidth||this.document.body.clientWidth||this.document.documentElement.clientWidth,this.isScrolling=!1,this.allImagesLoaded=!1,this.imagesLoaded={},this.atBottom=!1,this.atTop=!1,this.isFullscreenMode=!1,this.previousScrollHeightMinusTop=0,this.initFinished=!1,this.debugMode=0,this.debugLogFilter=["[PREFETCH]","[Intersection]","[Visibility]","[Image Load]"];let i=e.querySelector(".reading-area");i!==null&&(this.readerElemRef=new Pe(i))}ngOnChanges(e){e.hasOwnProperty("totalPages")&&e.totalPages.previousValue!=e.totalPages.currentValue&&(this.totalPages=e.totalPages.currentValue,this.cdRef.markForCheck(),this.initWebtoonReader())}ngOnDestroy(){this.intersectionObserver.disconnect()}initScrollHandler(){ue(this.isFullscreenMode?this.readerElemRef.nativeElement:this.document.body,"scroll").pipe(Ne(20),b(this.destroyRef)).subscribe(e=>this.handleScrollEvent(e)),ue(this.isFullscreenMode?this.readerElemRef.nativeElement:this.document.body,"scrollend").pipe(Ne(20),b(this.destroyRef)).subscribe(e=>this.handleScrollEndEvent(e))}ngOnInit(){this.initScrollHandler(),this.recalculateImageWidth(),this.goToPage&&this.goToPage.pipe(b(this.destroyRef)).subscribe(e=>{this.pageNum!==e&&(this.debugLog("[GoToPage] jump has occured from "+this.pageNum+" to "+e),this.pageNum<e?this.scrollingDirection=S.FORWARD:this.scrollingDirection=S.BACKWARDS,this.setPageNum(e,!0))}),this.bookmarkPage&&this.bookmarkPage.pipe(b(this.destroyRef)).subscribe(e=>{let i=document.querySelector('img[id^="page-'+e+'"]');i&&(this.renderer.addClass(i,"bookmark-effect"),setTimeout(()=>{this.renderer.removeClass(i,"bookmark-effect")},1e3))}),this.fullscreenToggled&&this.fullscreenToggled.pipe(b(this.destroyRef)).subscribe(e=>{this.debugLog("[FullScreen] Fullscreen mode: ",e),this.isFullscreenMode=e,this.cdRef.markForCheck(),this.recalculateImageWidth(),this.initScrollHandler(),this.setPageNum(this.pageNum,!0)})}ngAfterViewInit(){this.bottomSpacerIntersectionObserver.observe(this.bottomSpacer.nativeElement)}recalculateImageWidth(){let[e,i]=this.getInnerDimensions();this.webtoonImageWidth=i||document.body.clientWidth||document.documentElement.clientWidth,this.cdRef.markForCheck()}getVerticalOffset(){let e=this.isFullscreenMode?this.readerElemRef.nativeElement:this.document.body,i=0;return e instanceof Window?i=e.scrollY:i=e.scrollTop,i||document.body.scrollTop||document.documentElement.scrollTop||0}handleScrollEvent(e){let i=this.getVerticalOffset();if(i>this.prevScrollPosition?this.scrollingDirection=S.FORWARD:this.scrollingDirection=S.BACKWARDS,this.prevScrollPosition=i,this.isScrolling&&this.currentPageElem!=null&&this.isElementVisible(this.currentPageElem)&&(this.debugLog("[Scroll] Image is visible from scroll, isScrolling is now false"),this.isScrolling=!1,this.cdRef.markForCheck()),!this.isScrolling){let n=Array.from(document.querySelectorAll('img[id^="page-"]')).filter(a=>this.shouldElementCountAsCurrentPage(a));n.length>0&&this.setPageNum(parseInt(n[0].getAttribute("page")||this.pageNum+"",10))}this.checkIfShouldTriggerContinuousReader()}handleScrollEndEvent(e){if(!this.isScrolling){let i=Array.from(document.querySelectorAll('img[id^="page-"]')),n=this.findClosestVisibleImage(i);n!=null&&this.setPageNum(parseInt(n.getAttribute("page")||this.pageNum+"",10))}}getTotalHeight(){let e=0;return document.querySelectorAll('img[id^="page-"]').forEach(i=>e+=i.getBoundingClientRect().height),Math.round(e)}getTotalScroll(){return this.isFullscreenMode?this.readerElemRef.nativeElement.offsetHeight+this.readerElemRef.nativeElement.scrollTop:document.body.offsetHeight+document.body.scrollTop}getScrollTop(){return this.isFullscreenMode?this.readerElemRef.nativeElement.scrollTop:document.body.scrollTop}checkIfShouldTriggerContinuousReader(){if(!this.isScrolling)if(this.scrollingDirection===S.FORWARD){let e=this.getTotalHeight(),i=this.getTotalScroll();this.atTop&&this.pageNum>0&&(this.atTop=!1,this.cdRef.markForCheck()),i===e&&!this.atBottom?(this.atBottom=!0,this.cdRef.markForCheck(),this.setPageNum(this.totalPages),this.previousScrollHeightMinusTop=this.getScrollTop(),requestAnimationFrame(()=>{document.body.scrollTop=this.previousScrollHeightMinusTop+At/2,this.cdRef.markForCheck()})):i>=e+At&&this.atBottom&&(this.loadNextChapter.emit(),this.cdRef.markForCheck())}else if(this.getScrollTop()<5&&this.pageNum===0&&!this.atTop){this.atBottom=!1,this.atTop=!0,this.cdRef.markForCheck(),this.previousScrollHeightMinusTop=document.body.scrollHeight-document.body.scrollTop;let e=this.isFullscreenMode?this.readerElemRef.nativeElement:this.document.body;requestAnimationFrame(()=>this.scrollService.scrollTo(At/2,e))}else this.getScrollTop()<5&&this.pageNum===0&&this.atTop&&(this.loadPrevChapter.emit(),this.cdRef.markForCheck())}getInnerDimensions(){let e=window.innerHeight,i=window.innerWidth;return this.isFullscreenMode&&(e=this.readerElemRef.nativeElement.clientHeight,i=this.readerElemRef.nativeElement.clientWidth),[e,i]}isElementVisible(e){if(e==null)return!1;this.debugLog("[Visibility] Checking if Page "+e.getAttribute("id")+" is visible");let i=e.getBoundingClientRect(),[n,a]=this.getInnerDimensions();return i.bottom>=0&&i.right>=0&&i.top<=(n||document.body.clientHeight)&&i.left<=(a||document.body.clientWidth)}shouldElementCountAsCurrentPage(e){if(e==null)return!1;let i=e.getBoundingClientRect(),[n,a]=this.getInnerDimensions();if(i.bottom>=0&&i.right>=0&&i.top<=(n||document.body.clientHeight)&&i.left<=(a||document.body.clientWidth)){let p=n||document.body.clientHeight;return Math.abs(i.top/p)<=.25}return!1}findClosestVisibleImage(e){let i=null,n=Number.MAX_VALUE;for(let a of e){let p=a.getBoundingClientRect(),C=Math.abs(p.top);C<n&&(n=C,i=a)}return i}initWebtoonReader(){this.initFinished=!1,this.recalculateImageWidth(),this.imagesLoaded={},this.webtoonImages.next([]),this.atBottom=!1,this.checkIfShouldTriggerContinuousReader(),this.cdRef.markForCheck();let[e,i]=this.calculatePrefetchIndecies();this.debugLog("[INIT] Prefetching pages "+e+" to "+i+". Current page: ",this.pageNum);for(let n=e;n<=i;n++)this.loadWebtoonImage(n);this.cdRef.markForCheck()}onImageLoad(e){let i=this.readerService.imageUrlToPageNum(e.target.src);this.debugLog("[Image Load] Image loaded: ",i),e.target.width<this.webtoonImageWidth&&(this.webtoonImageWidth=e.target.width),this.renderer.setAttribute(e.target,"width",this.mangaReaderService.maxWidth()+""),this.renderer.setAttribute(e.target,"height",e.target.height+""),this.attachIntersectionObserverElem(e.target),i===this.pageNum&&Promise.all(Array.from(this.document.querySelectorAll("img")).filter(n=>!n.complete).map(n=>new Promise(a=>{n.onload=n.onerror=a}))).then(()=>{this.debugLog("[Initialization] All images have loaded from initial prefetch, initFinished = true"),this.debugLog("[Image Load] ! Loaded current page !",this.pageNum),this.currentPageElem=this.document.querySelector("img#page-"+this.pageNum),this.currentPageElem&&!this.isElementVisible(this.currentPageElem)?this.scrollToCurrentPage():(this.initFinished=!0,this.cdRef.markForCheck()),this.allImagesLoaded=!0,this.cdRef.markForCheck()})}handleBottomIntersection(e){e.length>0&&this.pageNum>this.totalPages-5&&this.initFinished&&(this.debugLog("[Intersection] The whole bottom spacer is visible",e[0].isIntersecting),this.loadNextChapter.emit())}handleIntersection(e){if(!this.allImagesLoaded||this.isScrolling){this.debugLog("[Intersection] Images are not loaded (or performing scrolling action), skipping any scroll calculations");return}e.forEach(i=>{let n=parseInt(i.target.attributes.getNamedItem("page")?.value+"",10);this.debugLog("[Intersection] Page "+n+" is visible: ",i.isIntersecting),i.isIntersecting&&(this.debugLog("[Intersection] ! Page "+n+" just entered screen"),this.prefetchWebtoonImages(n))})}setPageNum(e,i=!1){e>=this.totalPages?e=this.totalPages-1:e<0&&(e=0),this.pageNum=e,this.pageNumberChange.emit(this.pageNum),this.cdRef.markForCheck(),this.prefetchWebtoonImages(),i&&this.scrollToCurrentPage()}isScrollingForwards(){return this.scrollingDirection===S.FORWARD}scrollToCurrentPage(){this.currentPageElem=document.querySelector("img#page-"+this.pageNum),this.currentPageElem&&(this.debugLog("[GoToPage] Scrolling to page",this.pageNum),this.prevScrollPosition=this.currentPageElem.getBoundingClientRect().top,this.isScrolling=!0,this.cdRef.markForCheck(),setTimeout(()=>{this.currentPageElem&&(this.debugLog("[Scroll] Scrolling to page ",this.pageNum),this.currentPageElem.scrollIntoView({behavior:"smooth"}),this.initFinished=!0,this.cdRef.markForCheck())},600))}loadWebtoonImage(e){if(this.imagesLoaded.hasOwnProperty(e)){this.debugLog("	[PREFETCH] Skipping prefetch of ",e);return}this.debugLog("	[PREFETCH] Prefetching ",e);let i=this.webtoonImages.value.concat({src:this.urlProvider(e),page:e});i.sort((n,a)=>n.page<a.page?-1:n.page>a.page?1:0),this.allImagesLoaded=!1,this.cdRef.markForCheck(),this.webtoonImages.next(i),this.imagesLoaded.hasOwnProperty(e)||(this.imagesLoaded[e]=e)}attachIntersectionObserverElem(e){e!==null?(this.intersectionObserver.observe(e),this.debugLog("[Intersection] Attached Intersection Observer to page",this.readerService.imageUrlToPageNum(e.src))):console.error("Could not attach observer on elem")}calculatePrefetchIndecies(e=-1){e==-1&&(e=this.pageNum);let i=0,n=0;if(this.isScrollingForwards()){if(i=Math.min(Math.max(e-this.bufferPages,0),this.totalPages-1),n=Math.min(Math.max(e+this.bufferPages,0),this.totalPages-1),i===this.totalPages)return[0,0]}else i=Math.min(Math.max(e-this.bufferPages,0),this.totalPages-1),n=Math.min(Math.max(e+this.bufferPages,0),this.totalPages-1);if(i>n){let a=i;i=n,n=a}return[i,n]}range(e,i=0){return[...Array(e).keys()].map(n=>n+i)}prefetchWebtoonImages(e=-1){e===-1&&(e=this.pageNum);let[i,n]=this.calculatePrefetchIndecies(e);if(!(i===0&&n===0)){this.debugLog("	[PREFETCH] prefetching pages: "+i+" to "+n);for(let a=i;a<=n;a++)this.loadWebtoonImage(a);Promise.all(Array.from(document.querySelectorAll("img")).filter(a=>!a.complete).map(a=>new Promise(p=>{a.onload=a.onerror=p}))).then(()=>{this.allImagesLoaded=!0,this.cdRef.markForCheck()})}}debugLog(e,i){this.debugMode&2&&(this.debugLogFilter.filter(n=>e.replace("	","").startsWith(n)).length>0||(i!==void 0?console.log(e,i):console.log(e)))}showDebugBar(){return this.debugMode&4}showDebugOutline(){return this.debugMode&8}};r.\u0275fac=function(i){return new(i||r)(_(me))},r.\u0275cmp=Q({type:r,selectors:[["app-infinite-scroller"]],viewQuery:function(i,n){if(i&1&&W(ts,5),i&2){let a;B(a=$())&&(n.bottomSpacer=a.first)}},inputs:{pageNum:"pageNum",bufferPages:"bufferPages",totalPages:"totalPages",urlProvider:"urlProvider",goToPage:"goToPage",bookmarkPage:"bookmarkPage",fullscreenToggled:"fullscreenToggled"},outputs:{pageNumberChange:"pageNumberChange",loadNextChapter:"loadNextChapter",loadPrevChapter:"loadPrevChapter"},standalone:!0,features:[at,Y],decls:1,vars:1,consts:[["bottomSpacer",""],["topSpacer",""],[4,"transloco","translocoRead"],["class","fixed-top overlay",4,"ngIf"],["class","spacer top","role","alert",3,"click",4,"ngIf"],["infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollThrottle"],[4,"ngFor","ngForOf"],["role","alert",1,"spacer","bottom",3,"click"],[1,"btn","btn-icon","mx-auto"],["aria-hidden","true",1,"fa","fa-angle-double-down","animate"],[1,"mx-auto","text"],[1,"visually-hidden"],[2,"height","200px"],[1,"fixed-top","overlay"],["role","alert",1,"spacer","top",3,"click"],["aria-hidden","true",1,"fa","fa-angle-double-up","animate"],["rel","nofollow","alt","image","ondragstart","return false;","onselectstart","return false;",2,"display","block",3,"load","src","id"]],template:function(i,n){i&1&&P(0,rs,18,9,"ng-container",2),i&2&&d("translocoRead","infinite-scroller")},dependencies:[he,Re,ie,je,Fi,Vi],styles:[`.overlay[_ngcontent-%COMP%]{background-color:#00000080}.active[_ngcontent-%COMP%]{border:2px solid red}.full-opacity[_ngcontent-%COMP%]{opacity:0}.spacer[_ngcontent-%COMP%]{width:100%;height:300px;cursor:pointer}.spacer[_ngcontent-%COMP%]   .animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_move-up-down 1s linear infinite}.spacer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{z-index:101}img[_ngcontent-%COMP%], .full-width[_ngcontent-%COMP%]{max-width:100%!important;height:auto}*[_ngcontent-%COMP%]:not(html){-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);transform:translateZ(0)}@keyframes _ngcontent-%COMP%_move-up-down{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.bookmark-effect[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_infinite-scroll-bookmark 1s cubic-bezier(.165,.84,.44,1)}@keyframes _ngcontent-%COMP%_infinite-scroll-bookmark{0%,to{filter:opacity(1)}50%{filter:opacity(.25)}}
/*# sourceMappingURL=infinite-scroller.component-EIKCXUPE.css.map */`],changeDetection:0});let s=r;return s})();var $t=function(s){return s.X="x",s.Y="y",s}($t||{});function tn({domElement:s,onSwipeMove:r,onSwipeEnd:t}){if(!(s instanceof HTMLElement))throw new Error("Provided domElement should be an instance of HTMLElement");if(typeof r!="function"&&typeof t!="function")throw new Error("At least one of the following swipe event handler functions should be provided: onSwipeMove and/or onSwipeEnd");let e=ue(s,"touchstart").pipe(x(Bt)),i=ue(s,"touchmove").pipe(x(Bt)),n=ue(s,"touchend").pipe(x(Bt)),a=ue(s,"touchcancel");return e.pipe(Ze(C=>i.pipe(Qt(3),x(y=>({x:C.x,y:C.y,direction:as(C,y)}))))).pipe(Ze(C=>i.pipe(x(y=>Wt(C,y)),V(y=>{typeof r=="function"&&r(en(C,y))}),qt(Gt(n.pipe(x(y=>Wt(C,y)),V(y=>{typeof t=="function"&&t(en(C,y))})),a))))).subscribe()}function Bt(s){return{x:s.changedTouches[0].clientX,y:s.changedTouches[0].clientY}}function Wt(s,r){return{x:r.x-s.x,y:r.y-s.y}}function as(s,r){let{x:t,y:e}=Wt(s,r);return Math.abs(t)<Math.abs(e)?$t.Y:$t.X}function en(s,r){return{direction:s.direction,distance:r[s.direction]}}var nn=(()=>{let r=class r{constructor(e,i){this.elementRef=e,this.zone=i,this.swipeMove=new U,this.swipeEnd=new U}ngOnInit(){this.zone.runOutsideAngular(()=>{this.swipeSubscription=tn({domElement:this.elementRef.nativeElement,onSwipeMove:e=>this.swipeMove.emit(e),onSwipeEnd:e=>this.swipeEnd.emit(e)})})}ngOnDestroy(){this.swipeSubscription?.unsubscribe?.()}};r.\u0275fac=function(i){return new(i||r)(_(Pe),_(ot))},r.\u0275dir=Be({type:r,selectors:[["","ngSwipe",""]],outputs:{swipeMove:"swipeMove",swipeEnd:"swipeEnd"},standalone:!0});let s=r;return s})();var os=["reader"],ls=["readingArea"],hs=["content"],cs=(s,r)=>r.src,ds=s=>({overflow:s}),gs=(s,r)=>({"background-color":s,height:r}),ps=(s,r)=>({current:s,loaded:r}),us=s=>({percentage:s}),ms=(s,r)=>({height:s,"max-height":r}),fs=(s,r,t)=>({height:s,left:"inherit",right:r,"max-height":t});function vs(s,r){if(s&1&&(F(0),l(1,"span",13),v(2),c(),A()),s&2){let t=r.ngIf,e=g().$implicit,i=g(3);o(),d("ngClass",Ue(2,ps,t===i.pageNum,e.complete)),o(),N(i.readerService.imageUrlToPageNum(e.src))}}function bs(s,r){if(s&1&&P(0,vs,3,5,"ng-container",12),s&2){let t=r.$implicit,e=g(3);d("ngIf",e.readerService.imageUrlToPageNum(t.src))}}function ws(s,r){if(s&1&&(l(0,"div",6),ii(1,bs,1,1,"ng-container",null,cs),c()),s&2){let t=g(2);o(),ni(t.cachedImages)}}function xs(s,r){if(s&1){let t=K();l(0,"span",25),H("click",function(){I(t);let i=g(3);return E(i.turnOffIncognito())}),v(1,"("),w(2,"i",26),l(3,"span",17),v(4),c(),v(5,")"),c()}if(s&2){let t=g(2).$implicit;we("aria-label",t("incognito-alt")),o(4),N(t("incognito-title"))}}function Cs(s,r){if(s&1&&(l(0,"span"),v(1),u(2,"percent"),c()),s&2){let t=g(2).$implicit,e=g();o(),N(t("series-progress",Ce(3,us,m(2,1,e.Math.min(1,(e.totalSeriesPagesRead+e.pageNum)/e.totalSeriesPages)))))}}function Ss(s,r){if(s&1){let t=K();l(0,"button",27),H("click",function(){I(t);let i=g(3);return E(i.bookmarkPage())}),w(1,"i",28),l(2,"span",17),v(3),c()()}if(s&2){let t=g(2).$implicit,e=g();tt("title",t(e.CurrentPageBookmarked?"unbookmark-page-tooltip":"bookmark-page-tooltip")),we("aria-checked",e.CurrentPageBookmarked),o(),De("",e.CurrentPageBookmarked?"fa":"far"," fa-bookmark"),o(2),N(t(e.CurrentPageBookmarked?"unbookmark-page-tooltip":"bookmark-page-tooltip"))}}function _s(s,r){if(s&1){let t=K();l(0,"div",6)(1,"div",14)(2,"button",15),H("click",function(){I(t);let i=g(2);return E(i.closeReader())}),w(3,"i",16),l(4,"span",17),v(5),c()(),l(6,"div")(7,"div",18),v(8),P(9,xs,6,2,"span",19),c(),l(10,"div",20),v(11),P(12,Cs,3,5,"span",12),c()(),l(13,"div",21)(14,"button",22),H("click",function(){I(t);let i=g(2);return E(i.openShortcutModal())}),w(15,"i",23),l(16,"span",17),v(17),c()(),P(18,Ss,4,6,"button",24),c()()()}if(s&2){let t=g().$implicit,e=g();d("@slideFromTop",e.menuOpen),o(2),d("title",t("back")),o(3),N(t("back")),o(3),J("",e.title," "),o(),d("ngIf",e.incognitoMode),o(2),J(" ",e.subtitle," "),o(),d("ngIf",e.totalSeriesPages>0),o(5),N(t("shortcuts-menu-alt")),o(),d("ngIf",!e.bookmarkMode&&e.hasBookmarkRights)}}function Os(s,r){if(s&1&&(l(0,"div"),w(1,"i",35),c()),s&2){let t=g(2).$implicit,e=g();o(),xe("fa fa-angle-",e.readingDirection===e.ReadingDirection.RightToLeft?"double-":"","",e.readerMode===e.ReaderMode.LeftRight?"left":"up",""),d("title",t("prev-page-tooltip"))}}function ks(s,r){if(s&1&&(l(0,"div"),w(1,"i",35),c()),s&2){let t=g(2).$implicit,e=g();o(),xe("fa fa-angle-",e.readingDirection===e.ReadingDirection.LeftToRight?"double-":"","",e.readerMode===e.ReaderMode.LeftRight?"right":"down",""),d("title",t("next-page-tooltip"))}}function Ps(s,r){if(s&1){let t=K();F(0),l(1,"div",29),H("dblclick",function(i){I(t);let n=g(2);return E(n.bookmarkPage(i))}),w(2,"app-canvas-renderer",30),c(),l(3,"div",31)(4,"div",32),H("click",function(i){I(t);let n=g(2);return E(n.handlePageChange(i,n.KeyDirection.Left))}),P(5,Os,2,5,"div",12),c(),l(6,"div",32),H("click",function(i){I(t);let n=g(2);return E(n.handlePageChange(i,n.KeyDirection.Right))}),P(7,ks,2,5,"div",12),c()(),l(8,"div",29),H("dblclick",function(i){I(t);let n=g(2);return E(n.bookmarkPage(i))}),w(9,"app-single-renderer",33)(10,"app-double-renderer",34)(11,"app-double-reverse-renderer",34)(12,"app-double-no-cover-renderer",34),c(),A()}if(s&2){let t=g(2);o(2),d("readerSettings$",t.readerSettings$)("image$",t.currentImage$)("bookmark$",t.showBookmarkEffect$)("showClickOverlay$",t.showClickOverlay$),o(2),xe("",t.readerMode===t.ReaderMode.LeftRight?"left":"top"," ",t.clickOverlayClass("left"),""),d("ngStyle",Ue(39,ms,t.readerMode===t.ReaderMode.LeftRight?t.ImageHeight:"25%",t.MaxHeight)),o(),d("ngIf",t.showClickOverlay),o(),xe("",t.readerMode===t.ReaderMode.LeftRight?"right":"bottom"," ",t.clickOverlayClass("right"),""),d("ngStyle",ct(42,fs,t.readerMode===t.ReaderMode.LeftRight?t.ImageHeight:"25%",t.RightPaginationOffset+"px",t.MaxHeight)),o(),d("ngIf",t.showClickOverlay),o(2),d("image$",t.currentImage$)("readerSettings$",t.readerSettings$)("bookmark$",t.showBookmarkEffect$)("pageNum$",t.pageNum$)("showClickOverlay$",t.showClickOverlay$),o(),d("image$",t.currentImage$)("readerSettings$",t.readerSettings$)("bookmark$",t.showBookmarkEffect$)("showClickOverlay$",t.showClickOverlay$)("pageNum$",t.pageNum$)("getPage",t.getPageFn),o(),d("image$",t.currentImage$)("readerSettings$",t.readerSettings$)("bookmark$",t.showBookmarkEffect$)("showClickOverlay$",t.showClickOverlay$)("pageNum$",t.pageNum$)("getPage",t.getPageFn),o(),d("image$",t.currentImage$)("readerSettings$",t.readerSettings$)("bookmark$",t.showBookmarkEffect$)("showClickOverlay$",t.showClickOverlay$)("pageNum$",t.pageNum$)("getPage",t.getPageFn)}}function ys(s,r){if(s&1){let t=K();l(0,"div",37)(1,"app-infinite-scroller",38),H("pageNumberChange",function(i){I(t);let n=g(3);return E(n.handleWebtoonPageChange(i))})("loadNextChapter",function(){I(t);let i=g(3);return E(i.loadNextChapter())})("loadPrevChapter",function(){I(t);let i=g(3);return E(i.loadPrevChapter())}),c()()}if(s&2){let t=g(3);o(),d("pageNum",t.pageNum)("bufferPages",5)("goToPage",t.goToPageEvent)("totalPages",t.maxPages)("urlProvider",t.getPageUrl)("bookmarkPage",t.showBookmarkEffectEvent)("fullscreenToggled",t.fullscreenEvent)}}function Ms(s,r){if(s&1&&P(0,ys,2,7,"div",36),s&2){let t=g(2);d("ngIf",!t.isLoading&&!t.inSetup)}}function Rs(s,r){if(s&1){let t=K();l(0,"div",58)(1,"ngx-slider",59),H("userChangeEnd",function(i){I(t);let n=g(4);return n.sliderPageUpdate(i),E(n.startMenuCloseTimer())})("userChange",function(i){I(t);let n=g(4);return E(n.sliderDragUpdate(i))})("userChangeStart",function(){I(t);let i=g(4);return E(i.cancelMenuCloseTimer())}),c()()}if(s&2){let t=g(4);o(),d("options",t.pageOptions)("value",t.pageNum)("manualRefresh",t.refreshSlider)}}function Is(s,r){if(s&1){let t=K();l(0,"div",58)(1,"ngx-slider",60),H("userChangeEnd",function(){I(t);let i=g(4);return E(i.startMenuCloseTimer())})("userChangeStart",function(){I(t);let i=g(4);return E(i.cancelMenuCloseTimer())}),c()()}if(s&2){let t=g(4);o(),d("options",t.pageOptions)("value",t.pageNum)}}function Es(s,r){if(s&1){let t=K();l(0,"div",48),w(1,"span",49),l(2,"div",50)(3,"button",51),H("click",function(){I(t);let i=g(3);return i.loadPrevChapter(),E(i.resetMenuCloseTimer())}),w(4,"i",52),c(),l(5,"button",53),H("click",function(){I(t);let i=g(3);return i.goToPage(0),E(i.resetMenuCloseTimer())}),w(6,"i",54),c(),P(7,Rs,2,3,"div",55)(8,Is,2,2,"ng-template",null,3,kt),l(10,"button",53),H("click",function(){I(t);let i=g(3);return i.goToPage(i.maxPages),E(i.resetMenuCloseTimer())}),w(11,"i",56),c(),l(12,"button",51),H("click",function(){I(t);let i=g(3);return i.loadNextChapter(),E(i.resetMenuCloseTimer())}),w(13,"i",57),c()()()}if(s&2){let t=Ot(9),e=g(2).$implicit,i=g();o(3),d("disabled",i.prevChapterDisabled)("title",e("prev-chapter-tooltip")),o(2),d("disabled",i.prevPageDisabled||i.pageNum===0)("title",e("first-page-tooltip")),o(2),d("ngIf",i.pageOptions.ceil>0)("ngIfElse",t),o(3),d("disabled",i.nextPageDisabled||i.pageNum>=i.maxPages-1)("title",e("last-page-tooltip")),o(2),d("disabled",i.nextChapterDisabled)("title",e("next-chapter-tooltip"))}}function Ls(s,r){if(s&1&&(l(0,"option",90),v(1),c()),s&2){let t=r.$implicit;d("value",t.value),o(),N(t.text)}}function Ts(s,r){s&1&&(F(0),l(1,"div",91)(2,"span",92),w(3,"i",93)(4,"i",94),c()(),A())}function Ns(s,r){s&1&&(F(0),l(1,"div",91)(2,"span",92),w(3,"i",93)(4,"i",95),c(),l(5,"span",96),w(6,"i",93)(7,"i",97),c()(),A())}function Hs(s,r){s&1&&(F(0),l(1,"div",91)(2,"span",92),w(3,"i",93)(4,"i",97),c(),l(5,"span",96),w(6,"i",93)(7,"i",95),c()(),A())}function Ds(s,r){if(s&1&&(l(0,"option",90),v(1),c()),s&2){let t=r.$implicit;d("value",t.value),o(),N(t.text)}}function Vs(s,r){if(s&1){let t=K();l(0,"div",61)(1,"form",62)(2,"div",63)(3,"div",64)(4,"label",65),v(5),c(),v(6,"\xA0 "),l(7,"div",66),w(8,"div"),c(),l(9,"select",67),P(10,Ls,2,2,"option",68),c()(),l(11,"div",64)(12,"label",69),v(13),c(),v(14,"\xA0"),w(15,"i",28),u(16,"fittingIcon"),l(17,"select",70)(18,"option",71),v(19),c(),l(20,"option",72),v(21),c(),l(22,"option",73),v(23),c()()()(),l(24,"div",63)(25,"div",64)(26,"label",74),v(27,"Layout Mode"),c(),v(28,"\xA0 "),F(29,75),P(30,Ts,5,0,"ng-container",76)(31,Ns,8,0,"ng-container",76)(32,Hs,8,0,"ng-container",76),A(),l(33,"select",77),P(34,Ds,2,2,"option",68),c()(),l(35,"div",78)(36,"div",48)(37,"div",48)(38,"div",79),w(39,"input",80),l(40,"label",81),v(41),c()()()(),l(42,"div",48)(43,"div",48)(44,"div",79),w(45,"input",82),l(46,"label",83),v(47),c()()()()(),l(48,"div",78)(49,"div",48)(50,"div",48)(51,"div",79),w(52,"input",84),l(53,"label",85),v(54),c()()()()()(),l(55,"div",63)(56,"div",64)(57,"label",86),v(58),c(),l(59,"span",87),v(60),c(),w(61,"input",88),c(),l(62,"div",64)(63,"button",89),H("click",function(){I(t);let i=g(3);return E(i.savePref())}),v(64),c()()()()()}if(s&2){let t,e=g(2).$implicit,i=g();o(),d("formGroup",i.generalSettingsForm),o(4),N(e("image-splitting-label")),o(3),Je(i.SplitIconClass),o(2),d("ngForOf",i.pageSplitOptionsTranslated),o(3),N(e("image-scaling-label")),o(2),Je(m(16,24,i.FittingOption)),o(4),N(e("height")),o(2),N(e("width")),o(2),N(e("original")),o(6),d("ngSwitch",i.layoutMode),o(),d("ngSwitchCase",i.LayoutMode.Single),o(),d("ngSwitchCase",i.LayoutMode.Double),o(),d("ngSwitchCase",i.LayoutMode.DoubleReversed),o(2),d("ngForOf",i.layoutModesTranslated),o(7),N(e("auto-close-menu-label")),o(6),N(e("swipe-enabled-label")),o(7),N(e("emulate-comic-book-label")),o(4),N(e("brightness-label")),o(2),N(((t=i.generalSettingsForm.get("darkness"))==null?null:t.value)+"%"),o(4),N(e("save-globally"))}}function Fs(s,r){if(s&1){let t=K();l(0,"div",39),P(1,Es,14,10,"div",40),l(2,"div",41)(3,"div",42)(4,"button",43),H("click",function(){I(t);let i=g(2);return i.setReadingDirection(),E(i.resetMenuCloseTimer())}),w(5,"i",28),l(6,"span",44),v(7),c()()(),l(8,"div",42)(9,"button",45),H("click",function(){I(t);let i=g(2);return i.toggleReaderMode(),E(i.resetMenuCloseTimer())}),w(10,"i",28),u(11,"readerModeIcon"),l(12,"span",17),v(13),c()()(),l(14,"div",42)(15,"button",45),H("click",function(){I(t);let i=g(2);return i.toggleFullscreen(),E(i.resetMenuCloseTimer())}),w(16,"i",28),u(17,"fullscreenIcon"),l(18,"span",17),v(19),c()()(),l(20,"div",42)(21,"button",45),H("click",function(){I(t);let i=g(2);return i.settingsOpen=!i.settingsOpen,E(i.resetMenuCloseTimer())}),w(22,"i",46),l(23,"span",17),v(24),c()()()(),P(25,Vs,65,26,"div",47),c()}if(s&2){let t=g().$implicit,e=g();d("@slideFromBottom",e.menuOpen),o(),d("ngIf",e.pageOptions!==void 0&&e.pageOptions.ceil!==void 0),o(3),d("disabled",e.readerMode===e.ReaderMode.Webtoon||e.readerMode===e.ReaderMode.UpDown)("title",t("reading-direction-tooltip")+e.readingDirection===e.ReadingDirection.LeftToRight?t("left-to-right-alt"):t("right-to-left-alt")),o(),De("fa fa-angle-double-",e.readingDirection===e.ReadingDirection.LeftToRight?"right":"left",""),o(2),N(e.readingDirection===e.ReadingDirection.LeftToRight?t("left-to-right-alt"):t("right-to-left-alt")),o(2),d("title",t("reading-mode-tooltip")),o(),De("fa ",m(11,21,e.readerMode),""),o(3),N(t("reading-mode-tooltip")),o(2),tt("title",e.isFullscreen?t("collapse"):t("fullscreen")),o(),De("fa ",m(17,23,e.isFullscreen),""),o(3),N(e.isFullscreen?t("collapse"):t("fullscreen")),o(2),d("title",t("settings-tooltip")),o(3),N(t("settings-tooltip")),o(),d("ngIf",e.settingsOpen&&e.generalSettingsForm)}}function As(s,r){if(s&1){let t=K();F(0),l(1,"div",5,0),P(3,ws,3,0,"div",6)(4,_s,19,9,"div",7),w(5,"app-loading",8),u(6,"async"),l(7,"div",9,1),H("swipeEnd",function(i){I(t);let n=g();return E(n.onSwipeEnd(i))})("swipeMove",function(i){I(t);let n=g();return E(n.onSwipeMove(i))}),P(9,Ps,13,46,"ng-container",10)(10,Ms,1,1,"ng-template",null,2,kt),c(),P(12,Fs,26,25,"div",11),c(),A()}if(s&2){let t,e=Ot(11),i=g();o(),d("ngStyle",Ce(11,ds,i.isFullscreen?"auto":"visible")),o(2),et(3,i.debugMode?3:-1),o(),d("ngIf",i.menuOpen),o(),d("loading",i.isLoading||!((t=m(6,9,i.currentImage$))!=null&&t.complete)&&i.readerMode!==i.ReaderMode.Webtoon)("absolute",!0),o(2),d("ngStyle",Ue(13,gs,i.backgroundColor,i.readerMode===i.ReaderMode.Webtoon?"inherit":"calc(var(--vh)*100)")),o(2),d("ngIf",i.readerMode!==i.ReaderMode.Webtoon)("ngIfElse",e),o(3),d("ngIf",i.menuOpen)}}var sn=10,Ke=-2,Ut=-1,wt=200,Bs=3e3,$s=3e3,Ye=function(s){return s[s.Previous=0]="Previous",s[s.Current=1]="Current",s[s.Next=2]="Next",s}(Ye||{}),j=function(s){return s[s.Right=0]="Right",s[s.Left=1]="Left",s[s.Up=2]="Up",s[s.Down=3]="Down",s}(j||{}),jt=(()=>{let r=class r{get CurrentPageBookmarked(){return this.bookmarks.hasOwnProperty(this.pageNum)}get WindowWidth(){return this.readingArea?.nativeElement.scrollWidth+"px"}get ImageHeight(){return this.FittingOption!==M.HEIGHT?this.mangaReaderService.getPageDimensions(this.pageNum)?.height+"px":this.readingArea?.nativeElement?.clientHeight+"px"}get MaxHeight(){if(this.FittingOption===M.HEIGHT)return"calc(var(--vh) * 100)";let e=this.readingArea?.nativeElement?.scrollHeight>this.readingArea?.nativeElement?.clientHeight;return this.readingArea?.nativeElement?.clientHeight<=this.mangaReaderService.getPageDimensions(this.pageNum)?.height&&e?Math.min(this.readingArea?.nativeElement?.scrollHeight,this.mangaReaderService.getPageDimensions(this.pageNum)?.height)+"px":this.readingArea?.nativeElement?.clientHeight+"px"}get RightPaginationOffset(){return this.readerMode===O.LeftRight&&this.FittingOption!==M.WIDTH?(this.readingArea?.nativeElement?.scrollLeft||0)*-1:0}get SplitIconClass(){return this.mangaReaderService.isSplitLeftToRight(this.pageSplitOption)?"left-side":this.mangaReaderService.isNoSplit(this.pageSplitOption)?"none":"right-side"}get FittingOption(){return this.generalSettingsForm?.get("fittingOption")?.value||M.HEIGHT}get ReadingAreaWidth(){return this.readingArea?.nativeElement.scrollWidth-this.readingArea?.nativeElement.clientWidth}get ReadingAreaHeight(){return this.readingArea?.nativeElement.scrollHeight-this.readingArea?.nativeElement.clientHeight}constructor(e){this.document=e,this.destroyRef=T(te),this.route=T(di),this.router=T(gi),this.accountService=T(Ei),this.formBuilder=T(ki),this.navService=T(Li),this.memberService=T(Ai),this.modalService=T(Mi),this.cdRef=T(q),this.toastr=T(Ii),this.readerService=T(ne),this.utilityService=T(Hi),this.mangaReaderService=T(ee),this.KeyDirection=j,this.ReaderMode=O,this.LayoutMode=D,this.ReadingDirection=de,this.Breakpoint=Ni,this.Math=Math,this.readingListId=Ut,this.incognitoMode=!1,this.bookmarkMode=!1,this.readingListMode=!1,this.pageNum=0,this.maxPages=1,this.totalSeriesPages=0,this.totalSeriesPagesRead=0,this.readingDirection=de.LeftToRight,this.scalingOption=Fe.FitToHeight,this.pageSplitOption=G.FitSplit,this.isFullscreen=!1,this.autoCloseMenu=!0,this.readerMode=O.LeftRight,this.readerModeSubject=new Te(this.readerMode),this.readerMode$=this.readerModeSubject.asObservable(),this.pagingDirection=S.FORWARD,this.pagingDirectionSubject=new Te(this.pagingDirection),this.pagingDirection$=this.pagingDirectionSubject.asObservable(),this.pageSplitOptionsTranslated=Wi.map(this.translatePrefOptions),this.layoutModesTranslated=Ui.map(this.translatePrefOptions),this.isLoading=!0,this.hasBookmarkRights=!1,this.canvasImage=new Image,this.cachedImages=[],this.continuousChaptersStack=new Di,this.continuousChapterInfos=[void 0,void 0,void 0],this.showBookmarkEffectEvent=new ke,this.showBookmarkEffect$=this.showBookmarkEffectEvent.asObservable(),this.fullscreenEvent=new ke,this.menuOpen=!1,this.prevPageDisabled=!1,this.nextPageDisabled=!1,this.pageOptions={floor:0,ceil:0,step:1,boundPointerLabels:!0,showSelectionBar:!0,translate:(i,n)=>n==pe.Floor?"1":n===pe.Ceil?this.maxPages+"":this.pageNum+1+"",animate:!1},this.refreshSlider=new U,this.title="",this.subtitle="",this.showClickOverlay=!1,this.showClickOverlaySubject=new ke,this.showClickOverlay$=this.showClickOverlaySubject.asObservable(),this.nextChapterId=Ke,this.prevChapterId=Ke,this.nextChapterDisabled=!1,this.prevChapterDisabled=!1,this.nextChapterPrefetched=!1,this.prevChapterPrefetched=!1,this.settingsOpen=!1,this.bookmarks={},this.libraryType=Ti.Manga,this.inSetup=!0,this.layoutMode=D.Single,this.backgroundColor="#FFFFFF",this.rightPaginationOffset=0,this.prevScrollLeft=0,this.prevScrollTop=0,this.prevIsHorizontalScrollLeft=!0,this.prevIsVerticalScrollLeft=!0,this.hasHitRightScroll=!1,this.hasScrolledX=!1,this.hasScrolledY=!1,this.hasHitZeroScroll=!1,this.hasHitZeroTopScroll=!1,this.hasHitBottomTopScroll=!1,this.debugMode=!1,this.currentImage=new ke(1),this.currentImage$=this.currentImage.asObservable().pipe(be({refCount:!0,bufferSize:2})),this.pageNumSubject=new ke,this.pageNum$=this.pageNumSubject.asObservable(),this.getPageUrl=(i,n=this.chapterId)=>this.bookmarkMode?this.readerService.getBookmarkPageUrl(this.seriesId,this.user.apiKey,i):this.readerService.getPageUrl(n,i),this.navService.hideNavBar(),this.navService.hideSideNav(),this.cdRef.markForCheck()}ngOnInit(){let e=this.route.snapshot.paramMap.get("libraryId"),i=this.route.snapshot.paramMap.get("seriesId"),n=this.route.snapshot.paramMap.get("chapterId");if(e===null||i===null||n===null){this.router.navigateByUrl("/home");return}this.getPageFn=this.getPage.bind(this),this.libraryId=parseInt(e,10),this.seriesId=parseInt(i,10),this.chapterId=parseInt(n,10),this.incognitoMode=this.route.snapshot.queryParamMap.get("incognitoMode")==="true",this.bookmarkMode=this.route.snapshot.queryParamMap.get("bookmarkMode")==="true";let a=this.route.snapshot.queryParamMap.get("readingListId");a!=null&&(this.readingListMode=!0,this.readingListId=parseInt(a,10)),this.continuousChaptersStack.push(this.chapterId),this.accountService.currentUser$.pipe(Z(1)).subscribe(p=>{if(!p){this.router.navigateByUrl("/login");return}this.user=p,this.hasBookmarkRights=this.accountService.hasBookmarkRole(p)||this.accountService.hasAdminRole(p),this.readingDirection=this.user.preferences.readingDirection,this.scalingOption=this.user.preferences.scalingOption,this.pageSplitOption=this.user.preferences.pageSplitOption,this.autoCloseMenu=this.user.preferences.autoCloseMenu,this.readerMode=this.user.preferences.readerMode,this.layoutMode=this.user.preferences.layoutMode||D.Single,this.backgroundColor=this.user.preferences.backgroundColor||"#000000",this.readerService.setOverrideStyles(this.backgroundColor),this.generalSettingsForm=this.formBuilder.nonNullable.group({autoCloseMenu:new Ie(this.autoCloseMenu),pageSplitOption:new Ie(this.pageSplitOption),fittingOption:new Ie(this.mangaReaderService.translateScalingOption(this.scalingOption)),layoutMode:new Ie(this.layoutMode),darkness:new Ie(100),emulateBook:new Ie(this.user.preferences.emulateBook),swipeToPaginate:new Ie(this.user.preferences.swipeToPaginate)}),this.readerModeSubject.next(this.readerMode),this.pagingDirectionSubject.next(this.pagingDirection),this.readerSettings$=zt(this.generalSettingsForm.valueChanges,this.pagingDirection$,this.readerMode$).pipe(x(C=>this.createReaderSettingsUpdate()),b(this.destroyRef)),this.updateForm(),this.pagingDirection$.pipe(Ae(),V(C=>{this.pagingDirection=C,this.cdRef.markForCheck()}),b(this.destroyRef)).subscribe(()=>{}),this.readerMode$.pipe(Ae(),V(C=>{this.readerMode=C,this.disableDoubleRendererIfScreenTooSmall(),this.cdRef.markForCheck()}),b(this.destroyRef)).subscribe(()=>{}),this.generalSettingsForm.get("layoutMode")?.valueChanges.pipe(b(this.destroyRef)).subscribe(C=>{let y=parseInt(C,10)!==this.layoutMode;this.layoutMode=parseInt(C,10),this.layoutMode===D.Single?(this.generalSettingsForm.get("pageSplitOption")?.setValue(this.user.preferences.pageSplitOption),this.generalSettingsForm.get("pageSplitOption")?.enable(),this.generalSettingsForm.get("fittingOption")?.enable(),this.generalSettingsForm.get("emulateBook")?.enable()):(this.generalSettingsForm.get("pageSplitOption")?.setValue(G.NoSplit),this.generalSettingsForm.get("pageSplitOption")?.disable(),this.generalSettingsForm.get("fittingOption")?.setValue(this.mangaReaderService.translateScalingOption(Fe.FitToHeight)),this.generalSettingsForm.get("fittingOption")?.disable(),this.generalSettingsForm.get("emulateBook")?.enable()),this.cdRef.markForCheck(),y&&(this.setPageNum(this.adjustPagesForDoubleRenderer(this.pageNum)),this.loadPage())}),this.generalSettingsForm.valueChanges.pipe(b(this.destroyRef)).subscribe(()=>{this.autoCloseMenu=this.generalSettingsForm.get("autoCloseMenu")?.value,this.pageSplitOption=parseInt(this.generalSettingsForm.get("pageSplitOption")?.value,10),this.mangaReaderService.isWidePage(this.readerService.imageUrlToPageNum(this.canvasImage.src))&&(this.pagingDirectionSubject.next(S.FORWARD),this.canvasRenderer.reset(),this.loadPage())}),this.memberService.hasReadingProgress(this.libraryId).pipe(Z(1)).subscribe(C=>{C||(this.toggleMenu(),this.toastr.info(ce("manga-reader.first-time-reading-manga")))})}),this.init()}ngAfterViewInit(){ue(this.readingArea.nativeElement,"scroll").pipe(Ne(20),b(this.destroyRef)).subscribe(()=>{if(this.readerMode!==O.Webtoon){if(this.readerMode===O.LeftRight&&this.FittingOption===M.HEIGHT){this.rightPaginationOffset=this.readingArea.nativeElement.scrollLeft*-1,this.cdRef.markForCheck();return}this.rightPaginationOffset=0,this.cdRef.markForCheck()}}),ue(this.readingArea.nativeElement,"click").pipe(Ne(200),b(this.destroyRef)).subscribe(e=>{e.detail>1||this.toggleMenu()}),ue(this.readingArea.nativeElement,"scroll").pipe(Ne(200),b(this.destroyRef)).subscribe(()=>{this.prevScrollLeft=this.readingArea?.nativeElement?.scrollLeft||0,this.prevScrollTop=this.readingArea?.nativeElement?.scrollTop||0,this.hasScrolledX=!0,this.hasScrolledY=!0})}ngOnDestroy(){this.readerService.resetOverrideStyles(),this.navService.showNavBar(),this.navService.showSideNav(),this.showBookmarkEffectEvent.complete(),this.goToPageEvent!==void 0&&this.goToPageEvent.complete(),this.readerService.disableWakeLock()}onResize(){this.disableDoubleRendererIfScreenTooSmall()}handleKeyPress(e){switch(this.readerMode){case O.LeftRight:if(e.key===Se.RIGHT_ARROW){if(!this.checkIfPaginationAllowed(j.Right))return;this.readingDirection===de.LeftToRight?this.nextPage():this.prevPage()}else if(e.key===Se.LEFT_ARROW){if(!this.checkIfPaginationAllowed(j.Left))return;this.readingDirection===de.LeftToRight?this.prevPage():this.nextPage()}break;case O.UpDown:if(e.key===Se.UP_ARROW){if(!this.checkIfPaginationAllowed(j.Up))return;this.prevPage()}else if(e.key===Se.DOWN_ARROW){if(!this.checkIfPaginationAllowed(j.Down))return;this.nextPage()}break;case O.Webtoon:break}if(e.key===Se.ESC_KEY){if(this.menuOpen){this.toggleMenu(),e.stopPropagation(),e.preventDefault();return}this.closeReader()}else if(e.key===Se.SPACE)this.toggleMenu();else if(e.key===Se.G){let i=this.promptForPage();if(i===null)return;this.goToPage(parseInt(i.trim(),10))}else e.key===Se.B?this.bookmarkPage():e.key===Se.F?this.toggleFullscreen():e.key===Se.H&&this.openShortcutModal()}createReaderSettingsUpdate(){return{pageSplit:parseInt(this.generalSettingsForm.get("pageSplitOption")?.value,10),fitting:this.generalSettingsForm.get("fittingOption")?.value,layoutMode:this.layoutMode,darkness:parseInt(this.generalSettingsForm.get("darkness")?.value+"",10)||100,pagingDirection:this.pagingDirection,readerMode:this.readerMode,emulateBook:this.generalSettingsForm.get("emulateBook")?.value}}adjustPagesForDoubleRenderer(e){return e===this.maxPages-1?e:this.readerMode!==O.Webtoon&&this.layoutMode!==D.Single?this.mangaReaderService.adjustForDoubleReader(e):e}disableDoubleRendererIfScreenTooSmall(){if(window.innerWidth>window.innerHeight){this.generalSettingsForm.get("layoutMode")?.enable(),this.cdRef.markForCheck();return}this.layoutMode===D.Single||this.readerMode===O.Webtoon||(this.generalSettingsForm.get("layoutMode")?.setValue(D.Single),this.generalSettingsForm.get("layoutMode")?.disable(),this.toastr.info(ce("manga-reader.layout-mode-switched")),this.cdRef.markForCheck())}getPage(e,i=this.chapterId,n=!1){let a;return this.bookmarkMode?a=this.cachedImages.find(p=>this.readerService.imageUrlToPageNum(p.src)===e):a=this.cachedImages.find(p=>this.readerService.imageUrlToPageNum(p.src)===e&&(this.readerService.imageUrlToChapterId(p.src)==i||this.readerService.imageUrlToChapterId(p.src)===-1)),(!a||n)&&(a=new Image,a.src=this.getPageUrl(e,i),a.onload=p=>{this.currentImage.next(a),this.cdRef.markForCheck()}),a}isHorizontalScrollLeft(){let e=this.readingArea?.nativeElement?.scrollLeft||0;return e===0&&this.ReadingAreaWidth===0||e===this.ReadingAreaWidth?!1:e<this.ReadingAreaWidth}isVerticalScrollLeft(){return(this.readingArea?.nativeElement?.scrollTop||0)<this.ReadingAreaHeight}checkIfPaginationAllowed(e){if(this.readingArea===void 0||this.readingArea.nativeElement===void 0)return!0;let i=this.readingArea?.nativeElement?.scrollLeft||0,n=this.readingArea?.nativeElement?.scrollTop||0;switch(e){case j.Right:if(this.prevIsHorizontalScrollLeft&&!this.isHorizontalScrollLeft())return!0;if(this.prevIsHorizontalScrollLeft=this.isHorizontalScrollLeft(),this.isHorizontalScrollLeft())return!1;break;case j.Left:if(this.prevIsHorizontalScrollLeft=this.isHorizontalScrollLeft(),i>0||this.prevScrollLeft>0)return!1;break;case j.Up:if(this.prevIsVerticalScrollLeft=this.isVerticalScrollLeft(),n>0||this.prevScrollTop>0)return!1;break;case j.Down:if(this.prevIsVerticalScrollLeft&&!this.isVerticalScrollLeft())return!0;if(this.prevIsVerticalScrollLeft=this.isVerticalScrollLeft(),this.isVerticalScrollLeft())return!1;break}return!0}init(){this.nextChapterId=Ke,this.prevChapterId=Ke,this.nextChapterDisabled=!1,this.prevChapterDisabled=!1,this.nextChapterPrefetched=!1,this.pageNum=0,this.pagingDirectionSubject.next(S.FORWARD),this.inSetup=!0,this.canvasImage.src="",this.cdRef.markForCheck(),this.cachedImages=[];for(let e=0;e<sn;e++)this.cachedImages.push(new Image);if(this.goToPageEvent&&this.goToPageEvent.complete(),this.bookmarkMode){this.readerService.getBookmarkInfo(this.seriesId).subscribe(e=>{this.setPageNum(0),this.title=e.seriesName,this.subtitle=ce("manga-reader.bookmarks-title"),this.libraryType=e.libraryType,this.maxPages=e.pages,this.mangaReaderService.load(e);let i=Object.assign({},this.pageOptions);i.ceil=this.maxPages-1,this.pageOptions=i,this.inSetup=!1,this.cdRef.markForCheck(),this.goToPageEvent=new Te(this.pageNum),this.render()}),setTimeout(()=>{this.readerService.enableWakeLock(this.reader.nativeElement)},1e3);return}rt({progress:this.readerService.getProgress(this.chapterId),chapterInfo:this.readerService.getChapterInfo(this.chapterId,!0),bookmarks:this.readerService.getBookmarks(this.chapterId)}).pipe(Z(1)).subscribe(e=>{if(this.readingListMode&&(e.chapterInfo.seriesFormat===Mt.EPUB||e.chapterInfo.seriesFormat===Mt.PDF)){let a=this.readerService.getQueryParamsObject(this.incognitoMode,this.readingListMode,this.readingListId);this.router.navigate(this.readerService.getNavigationArray(e.chapterInfo.libraryId,e.chapterInfo.seriesId,this.chapterId,e.chapterInfo.seriesFormat),{queryParams:a});return}this.mangaReaderService.load(e.chapterInfo),this.continuousChapterInfos[Ye.Current]=e.chapterInfo,this.volumeId=e.chapterInfo.volumeId,this.maxPages=e.chapterInfo.pages;let i=e.progress.pageNum;i>this.maxPages&&(i=this.maxPages-1),i=this.adjustPagesForDoubleRenderer(i),this.totalSeriesPages=e.chapterInfo.seriesTotalPages,this.totalSeriesPagesRead=e.chapterInfo.seriesTotalPagesRead-i,this.setPageNum(i),this.goToPageEvent=new Te(this.pageNum);let n=Object.assign({},this.pageOptions);n.ceil=this.maxPages-1,this.pageOptions=n,this.libraryType=e.chapterInfo.libraryType,this.title=e.chapterInfo.title,this.subtitle=e.chapterInfo.subtitle,this.inSetup=!1,this.disableDoubleRendererIfScreenTooSmall(),this.bookmarks={},e.bookmarks.forEach(a=>{this.bookmarks[a.page]=1}),this.cdRef.markForCheck(),this.readerService.getNextChapter(this.seriesId,this.volumeId,this.chapterId,this.readingListId).pipe(Z(1)).subscribe(a=>{this.nextChapterId=a,a===Ut||a===this.chapterId?(this.nextChapterDisabled=!0,this.cdRef.markForCheck()):this.getPage(0,this.nextChapterId)}),this.readerService.getPrevChapter(this.seriesId,this.volumeId,this.chapterId,this.readingListId).pipe(Z(1)).subscribe(a=>{this.prevChapterId=a,a===Ut||a===this.chapterId?(this.prevChapterDisabled=!0,this.cdRef.markForCheck()):this.getPage(1e6,this.prevChapterId)}),this.render()},()=>{setTimeout(()=>{this.closeReader()},200)})}closeReader(){this.readerService.closeReader(this.readingListMode,this.readingListId)}render(){this.readerMode===O.Webtoon?(this.isLoading=!1,this.cdRef.markForCheck()):this.loadPage()}cancelMenuCloseTimer(){this.menuTimeout&&clearTimeout(this.menuTimeout)}resetMenuCloseTimer(){this.menuTimeout&&(clearTimeout(this.menuTimeout),!this.settingsOpen&&this.autoCloseMenu&&this.startMenuCloseTimer())}startMenuCloseTimer(){this.autoCloseMenu&&(this.menuTimeout=setTimeout(()=>{this.toggleMenu()},Bs))}toggleMenu(){this.menuOpen=!this.menuOpen,this.cdRef.markForCheck(),this.menuTimeout&&clearTimeout(this.menuTimeout),this.menuOpen&&!this.settingsOpen?this.startMenuCloseTimer():(this.showClickOverlay=!1,this.settingsOpen=!1,this.cdRef.markForCheck())}resetSwipeModifiers(){this.prevScrollLeft=0,this.prevScrollTop=0,this.hasScrolledX=!1,this.hasScrolledY=!1,this.hasHitRightScroll=!1,this.hasHitZeroScroll=!1,this.hasHitBottomTopScroll=!1,this.hasHitZeroTopScroll=!1}onSwipeMove(e){this.prevScrollLeft=this.readingArea?.nativeElement?.scrollLeft||0,this.prevScrollTop=this.readingArea?.nativeElement?.scrollTop||0}triggerSwipePagination(e){if(this.generalSettingsForm.get("swipeToPaginate")?.value)switch(e){case j.Down:this.nextPage();break;case j.Right:this.readingDirection===de.LeftToRight?this.nextPage():this.prevPage();break;case j.Up:this.prevPage();break;case j.Left:this.readingDirection===de.LeftToRight?this.prevPage():this.nextPage();break}}onSwipeEnd(e){switch(this.readerMode){case O.Webtoon:break;case O.LeftRight:{if(e.direction!=="x")return;let i=this.readingArea?.nativeElement?.scrollLeft||0,n=e.distance<0?j.Right:j.Left;if(!this.checkIfPaginationAllowed(n))return;if(n===j.Right){if(this.hasHitZeroScroll=!1,i===0&&this.ReadingAreaWidth===0){this.triggerSwipePagination(n);return}if(!this.hasHitRightScroll&&this.checkIfPaginationAllowed(n)){this.hasHitRightScroll=!0;return}}else if(n===j.Left&&(this.hasHitRightScroll=!1,i===0&&this.prevScrollLeft===0)){if(!this.hasScrolledX||this.hasHitZeroScroll){this.triggerSwipePagination(n);return}this.hasHitZeroScroll=!0;return}if(!this.hasHitRightScroll)return;this.triggerSwipePagination(n);break}case O.UpDown:{if(e.direction!=="y")return;let i=e.distance<0?j.Down:j.Up,n=this.readingArea?.nativeElement?.scrollTop||0;if(!this.checkIfPaginationAllowed(i))return;if(i===j.Down){if(this.hasHitZeroTopScroll=!1,!this.hasHitBottomTopScroll&&this.checkIfPaginationAllowed(i)){this.hasHitBottomTopScroll=!0;return}}else if(i===j.Up&&(this.hasHitBottomTopScroll=!1,n===0&&this.prevScrollTop===0)){if(!this.hasScrolledY||this.hasHitZeroTopScroll){this.triggerSwipePagination(i);return}this.hasHitZeroTopScroll=!0;return}if(!this.hasHitBottomTopScroll)return;this.triggerSwipePagination(i);break}}}handlePageChange(e,i){if(this.readerMode===O.Webtoon){i===j.Right?this.nextPage(e):this.prevPage(e);return}i===j.Right?this.readingDirection===de.LeftToRight?this.nextPage(e):this.prevPage(e):i===j.Left&&(this.readingDirection===de.LeftToRight?this.prevPage(e):this.nextPage(e))}nextPage(e){e&&(e.stopPropagation(),e.preventDefault()),this.resetSwipeModifiers(),this.isLoading=!0,this.cdRef.markForCheck(),this.pagingDirectionSubject.next(S.FORWARD);let i=Math.max(this.canvasRenderer.getPageAmount(S.FORWARD),this.singleRenderer.getPageAmount(S.FORWARD),this.doubleRenderer.getPageAmount(S.FORWARD),this.doubleReverseRenderer.getPageAmount(S.FORWARD),this.doubleNoCoverRenderer.getPageAmount(S.FORWARD)),n=[G.SplitRightToLeft,G.SplitRightToLeft].includes(parseInt(this.generalSettingsForm.get("pageSplitOption")?.value,10)),a=this.canvasRenderer.getPageAmount(S.BACKWARDS)===0,p=this.mangaReaderService.isWidePage(this.pageNum);if(this.pageNum+i>=this.maxPages&&(!p||!n||a)){this.loadNextChapter();return}this.setPageNum(this.pageNum+i),this.loadPage()}prevPage(e){e&&(e.stopPropagation(),e.preventDefault()),this.resetSwipeModifiers(),this.isLoading=!0,this.cdRef.markForCheck(),this.pagingDirectionSubject.next(S.BACKWARDS);let i=this.readerMode===O.Webtoon?1:Math.max(this.canvasRenderer.getPageAmount(S.BACKWARDS),this.singleRenderer.getPageAmount(S.BACKWARDS),this.doubleRenderer.getPageAmount(S.BACKWARDS),this.doubleNoCoverRenderer.getPageAmount(S.BACKWARDS),this.doubleReverseRenderer.getPageAmount(S.BACKWARDS)),n=this.readerMode===O.Webtoon?!0:this.canvasRenderer.shouldMovePrev();if(this.pageNum-1<0&&n){this.loadPrevChapter();return}this.setPageNum(this.pageNum-i),this.loadPage()}setCanvasImage(){this.cachedImages!==void 0&&(this.canvasImage=this.getPage(this.pageNum,this.chapterId,this.layoutMode!==D.Single),this.canvasImage.complete?this.currentImage.next(this.canvasImage):this.canvasImage.addEventListener("load",()=>{this.currentImage.next(this.canvasImage)},!1),this.cdRef.markForCheck())}loadNextChapter(){if(this.nextPageDisabled||this.nextChapterDisabled||this.bookmarkMode){this.toastr.info(ce("manga-reader.no-next-chapter")),this.isLoading=!1,this.cdRef.markForCheck();return}this.nextChapterId===Ke||this.nextChapterId===this.chapterId?this.readerService.getNextChapter(this.seriesId,this.volumeId,this.chapterId,this.readingListId).pipe(Z(1)).subscribe(e=>{this.nextChapterId=e,this.loadChapter(e,"Next")}):this.loadChapter(this.nextChapterId,"Next")}loadPrevChapter(){if(this.prevPageDisabled||this.prevChapterDisabled||this.bookmarkMode){this.toastr.info(ce("manga-reader.no-prev-chapter")),this.isLoading=!1,this.cdRef.markForCheck();return}this.continuousChaptersStack.pop();let e=this.continuousChaptersStack.peek();if(e!=this.chapterId&&e!==void 0){this.chapterId=e,this.init();return}this.prevChapterId===Ke||this.prevChapterId===this.chapterId?this.readerService.getPrevChapter(this.seriesId,this.volumeId,this.chapterId,this.readingListId).pipe(Z(1)).subscribe(i=>{this.prevChapterId=i,this.loadChapter(i,"Prev")}):this.loadChapter(this.prevChapterId,"Prev")}loadChapter(e,i){if(e>0){this.isLoading=!0,this.cdRef.markForCheck(),this.chapterId=e,this.continuousChaptersStack.push(e);let n=this.readerService.getNextChapterUrl(this.router.url,this.chapterId,this.incognitoMode,this.readingListMode,this.readingListId);window.history.replaceState({},"",n),this.init();let a=ce(i==="Next"?"toasts.load-next-chapter":"toasts.load-prev-chapter",{entity:this.utilityService.formatChapterName(this.libraryType).toLowerCase()});this.toastr.info(a,"",{timeOut:3e3})}else{let n=ce(i==="Next"?"toasts.no-next-chapter":"toasts.no-prev-chapter",{entity:this.utilityService.formatChapterName(this.libraryType).toLowerCase()});this.toastr.warning(n),this.isLoading=!1,i==="Prev"?this.prevPageDisabled=!0:this.nextPageDisabled=!0,this.cdRef.markForCheck()}}renderPage(){let e=[this.canvasImage];this.canvasRenderer?.renderPage(e),this.singleRenderer?.renderPage(e),this.doubleRenderer?.renderPage(e),this.doubleNoCoverRenderer?.renderPage(e),this.doubleReverseRenderer?.renderPage(e),this.readingArea.nativeElement.scroll(0,0),this.isLoading=!1,this.cdRef.markForCheck()}prefetch(){for(let e=0;e<=sn-3;e++){let i=this.pageNum+e;if(i>this.maxPages-1)continue;let n=(i%this.cachedImages.length+this.cachedImages.length)%this.cachedImages.length;this.readerService.imageUrlToPageNum(this.cachedImages[n].src)!==i&&(this.cachedImages[n]=this.getPage(i,this.chapterId))}}loadPage(){this.readerMode!==O.Webtoon&&(this.isLoading=!0,this.setCanvasImage(),this.cdRef.markForCheck(),this.renderPage(),this.isLoading=!1,this.cdRef.markForCheck(),this.prefetch())}setReadingDirection(){this.readingDirection===de.LeftToRight?this.readingDirection=de.RightToLeft:this.readingDirection=de.LeftToRight,this.menuOpen&&this.user.preferences.showScreenHints&&(this.showClickOverlay=!0,this.showClickOverlaySubject.next(!0),setTimeout(()=>{this.showClickOverlay=!1,this.showClickOverlaySubject.next(!1)},$s))}sliderDragUpdate(e){this.readerMode!==O.Webtoon&&this.setPageNum(e.value)}sliderPageUpdate(e){let i=e.value;i>this.pageNum?this.pagingDirectionSubject.next(S.FORWARD):this.pagingDirectionSubject.next(S.BACKWARDS),this.setPageNum(this.adjustPagesForDoubleRenderer(i)),this.refreshSlider.emit(),this.goToPageEvent.next(this.pageNum),this.render()}setPageNum(e){this.pageNum=Math.max(Math.min(e,this.maxPages-1),0),this.pageNumSubject.next({pageNum:this.pageNum,maxPages:this.maxPages}),this.cdRef.markForCheck(),this.pageNum>=this.maxPages-10?this.nextChapterId>0&&!this.nextChapterPrefetched&&this.readerService.getChapterInfo(this.nextChapterId).pipe(Z(1)).subscribe(n=>{this.continuousChapterInfos[Ye.Next]=n,this.nextChapterPrefetched=!0,this.prefetchStartOfChapter(this.nextChapterId,S.FORWARD)}):this.pageNum<=10&&this.prevChapterId>0&&!this.prevChapterPrefetched&&this.readerService.getChapterInfo(this.prevChapterId).pipe(Z(1)).subscribe(n=>{this.continuousChapterInfos[Ye.Previous]=n,this.prevChapterPrefetched=!0,this.prefetchStartOfChapter(this.nextChapterId,S.BACKWARDS)});let i=this.pageNum;this.pageNum==this.maxPages-1&&this.pagingDirection===S.FORWARD&&(i=this.pageNum+1),!this.incognitoMode&&!this.bookmarkMode&&this.readerService.saveProgress(this.libraryId,this.seriesId,this.volumeId,this.chapterId,i).pipe(Z(1)).subscribe(()=>{})}prefetchStartOfChapter(e,i){let n=[];if(i===S.BACKWARDS){if(this.continuousChapterInfos[Ye.Previous]===void 0)return;let p=this.continuousChapterInfos[Ye.Previous].pages;n=Array.from({length:p+1},(C,y)=>p-y)}else n=[0,1,2,3,4];let a=[];n.forEach((p,C)=>{let y=new Image;y.src=this.getPageUrl(C,e),a.push(y)})}goToPage(e){let i=e;i===void 0||this.pageNum===i||(i>this.maxPages?i=this.maxPages:i<0&&(i=0),i===0||i===this.maxPages-1||(i-=1),i>this.pageNum?this.pagingDirectionSubject.next(S.FORWARD):this.pagingDirectionSubject.next(S.BACKWARDS),this.setPageNum(this.adjustPagesForDoubleRenderer(i)),this.goToPageEvent.next(i),this.render())}clickOverlayClass(e){return this.showClickOverlay?this.readingDirection===de.LeftToRight?e==="right"?"highlight":"highlight-2":e==="right"?"highlight-2":"highlight":""}promptForPage(){let e=ce("book-reader.go-to-page-prompt",{totalPages:this.maxPages}),i=window.prompt(e,"");return i===null||i.trim().length===0?null:i}toggleFullscreen(){this.readerService.toggleFullscreen(this.reader.nativeElement,()=>{this.isFullscreen=!0,this.fullscreenEvent.next(!0),this.render()})}toggleReaderMode(){switch(this.readerMode){case O.LeftRight:this.pagingDirectionSubject.next(S.FORWARD),this.readerModeSubject.next(O.UpDown);break;case O.UpDown:this.readerModeSubject.next(O.Webtoon);break;case O.Webtoon:this.readerModeSubject.next(O.LeftRight);break}this.readerMode!==O.Webtoon&&(this.canvasImage=this.getPage(this.pageNum),this.currentImage.next(this.canvasImage),this.pageNumSubject.next({pageNum:this.pageNum,maxPages:this.maxPages}),this.cdRef.detectChanges()),this.updateForm(),this.render()}updateForm(){this.readerMode===O.Webtoon?(this.generalSettingsForm.get("pageSplitOption")?.disable(),this.generalSettingsForm.get("fittingOption")?.disable(),this.generalSettingsForm.get("layoutMode")?.disable()):(this.generalSettingsForm.get("fittingOption")?.enable(),this.generalSettingsForm.get("pageSplitOption")?.enable(),this.generalSettingsForm.get("layoutMode")?.enable(),this.layoutMode!==D.Single&&(this.generalSettingsForm.get("pageSplitOption")?.disable(),this.generalSettingsForm.get("fittingOption")?.disable())),this.cdRef.markForCheck()}handleWebtoonPageChange(e){this.setPageNum(e)}bookmarkPage(e=void 0){if(e&&(e.stopPropagation(),e.preventDefault()),this.bookmarkMode)return;let i=this.pageNum,n=this.canvasRenderer!==void 0&&this.doubleRenderer!==void 0&&Math.max(this.canvasRenderer.getBookmarkPageCount(),this.singleRenderer.getBookmarkPageCount(),this.doubleRenderer.getBookmarkPageCount(),this.doubleReverseRenderer.getBookmarkPageCount(),this.doubleNoCoverRenderer.getBookmarkPageCount())>1;if(this.CurrentPageBookmarked){let a=[this.readerService.unbookmark(this.seriesId,this.volumeId,this.chapterId,i)];n&&a.push(this.readerService.unbookmark(this.seriesId,this.volumeId,this.chapterId,i+1)),rt(a).pipe(Z(1)).subscribe(()=>{delete this.bookmarks[i],n&&delete this.bookmarks[i+1],this.cdRef.detectChanges()})}else{let a=[this.readerService.bookmark(this.seriesId,this.volumeId,this.chapterId,i)];n&&a.push(this.readerService.bookmark(this.seriesId,this.volumeId,this.chapterId,i+1)),rt(a).pipe(Z(1)).subscribe(()=>{this.bookmarks[i]=1,n&&(this.bookmarks[i+1]=1),this.cdRef.detectChanges()})}this.showBookmarkEffectEvent.next(i)}turnOffIncognito(){this.incognitoMode=!1;let e=this.readerService.getNextChapterUrl(this.router.url,this.chapterId,this.incognitoMode,this.readingListMode,this.readingListId);window.history.replaceState({},"",e),this.toastr.info(ce("toasts.incognito-off")),this.bookmarkMode||this.readerService.saveProgress(this.libraryId,this.seriesId,this.volumeId,this.chapterId,this.pageNum).pipe(Z(1)).subscribe(()=>{})}openShortcutModal(){let e=this.modalService.open(Ki,{scrollable:!0,size:"md"});e.componentInstance.shortcuts=[{key:"\u21FD",description:"prev-page"},{key:"\u21FE",description:"next-page"},{key:"\u2191",description:"prev-page"},{key:"\u2193",description:"next-page"},{key:"G",description:"go-to"},{key:"B",description:"bookmark"},{key:ce("shortcuts-modal.double-click"),description:"bookmark"},{key:"ESC",description:"close-reader"},{key:"SPACE",description:"toggle-menu"}]}savePref(){let e=this.generalSettingsForm.value;this.accountService.currentUser$.pipe(Z(1)).subscribe(i=>{if(!i)return;let n=xt({},i.preferences);n.layoutMode=parseInt(e.layoutMode,10),n.readerMode=this.readerMode,n.autoCloseMenu=this.autoCloseMenu,n.readingDirection=this.readingDirection,n.emulateBook=e.emulateBook,n.swipeToPaginate=e.swipeToPaginate,n.pageSplitOption=parseInt(e.pageSplitOption,10),n.locale=n.locale||"en",this.accountService.updatePreferences(n).subscribe(a=>{this.toastr.success(ce("manga-reader.user-preferences-updated")),this.user&&(this.user.preferences=a,this.cdRef.markForCheck())})})}translatePrefOptions(e){let i=xt({},e);return i.text=ce("preferences."+e.text),i}};r.\u0275fac=function(i){return new(i||r)(_(me))},r.\u0275cmp=Q({type:r,selectors:[["app-manga-reader"]],viewQuery:function(i,n){if(i&1&&(W(os,5),W(ls,5),W(hs,5),W(Nt,5),W(Vt,5),W(Ht,5),W(Dt,5),W(Ft,5)),i&2){let a;B(a=$())&&(n.reader=a.first),B(a=$())&&(n.readingArea=a.first),B(a=$())&&(n.canvas=a.first),B(a=$())&&(n.canvasRenderer=a.first),B(a=$())&&(n.singleRenderer=a.first),B(a=$())&&(n.doubleRenderer=a.first),B(a=$())&&(n.doubleReverseRenderer=a.first),B(a=$())&&(n.doubleNoCoverRenderer=a.first)}},hostBindings:function(i,n){i&1&&H("resize",function(p){return n.onResize(p)},!1,$e)("orientationchange",function(p){return n.onResize(p)},!1,$e)("keyup",function(p){return n.handleKeyPress(p)},!1,$e)},standalone:!0,features:[ht([ee]),Y],decls:1,vars:1,consts:[["reader",""],["readingArea",""],["webtoon",""],["noSlider",""],[4,"transloco","translocoRead"],[1,"reader",3,"ngStyle"],[1,"fixed-top","overlay"],["class","fixed-top overlay",4,"ngIf"],[3,"loading","absolute"],["ngSwipe","",1,"reading-area",3,"swipeEnd","swipeMove","ngStyle"],[4,"ngIf","ngIfElse"],["class","fixed-bottom overlay",4,"ngIf"],[4,"ngIf"],[1,"me-1",3,"ngClass"],[2,"display","flex","margin-top","5px"],[1,"btn","btn-icon",2,"height","100%",3,"click","title"],["aria-hidden","true",1,"fa","fa-arrow-left"],[1,"visually-hidden"],[2,"font-weight","bold"],["class","clickable","role","button",3,"click",4,"ngIf"],[1,"subtitle"],[2,"margin-left","auto","padding-right","3%"],["title","Shortcuts",1,"btn","btn-icon",3,"click"],["aria-hidden","true",1,"fa-regular","fa-rectangle-list"],["class","btn btn-icon","role","checkbox",3,"title","click",4,"ngIf"],["role","button",1,"clickable",3,"click"],["aria-hidden","true",1,"fa","fa-glasses"],["role","checkbox",1,"btn","btn-icon",3,"click","title"],["aria-hidden","true"],[3,"dblclick"],[3,"readerSettings$","image$","bookmark$","showClickOverlay$"],[1,"pagination-area"],[3,"click","ngStyle"],[3,"image$","readerSettings$","bookmark$","pageNum$","showClickOverlay$"],[3,"image$","readerSettings$","bookmark$","showClickOverlay$","pageNum$","getPage"],["aria-hidden","true",3,"title"],["class","webtoon-images",4,"ngIf"],[1,"webtoon-images"],[3,"pageNumberChange","loadNextChapter","loadPrevChapter","pageNum","bufferPages","goToPage","totalPages","urlProvider","bookmarkPage","fullscreenToggled"],[1,"fixed-bottom","overlay"],["class","mb-3",4,"ngIf"],[1,"row","pt-4","ms-2","me-2","mb-2"],[1,"col"],["aria-describedby","reading-direction",1,"btn","btn-icon",3,"click","disabled","title"],["id","reading-direction",1,"visually-hidden"],[1,"btn","btn-icon",3,"click","title"],["aria-hidden","true",1,"fa","fa-sliders-h"],["class","bottom-menu",4,"ngIf"],[1,"mb-3"],["id","slider-info",1,"visually-hidden"],[1,"row","g-0"],[1,"btn","btn-icon","col-1",3,"click","disabled","title"],["aria-hidden","true",1,"fa","fa-fast-backward"],[1,"btn","btn-icon","col-2",3,"click","disabled","title"],["aria-hidden","true",1,"fa","fa-step-backward"],["class","col custom-slider",4,"ngIf","ngIfElse"],["aria-hidden","true",1,"fa","fa-step-forward"],["aria-hidden","true",1,"fa","fa-fast-forward"],[1,"col","custom-slider"],["aria-describedby","slider-info",3,"userChangeEnd","userChange","userChangeStart","options","value","manualRefresh"],["aria-describedby","slider-info",3,"userChangeEnd","userChangeStart","options","value"],[1,"bottom-menu"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-md-6","col-sm-12"],["for","page-splitting",1,"form-label"],[1,"split","fa","fa-image"],["id","page-splitting","formControlName","pageSplitOption",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","page-fitting",1,"form-label"],["id","page-fitting","formControlName","fittingOption",1,"form-control"],["value","full-height"],["value","full-width"],["value","original"],["for","layout-mode",1,"form-label"],[3,"ngSwitch"],[4,"ngSwitchCase"],["id","layout-mode","formControlName","layoutMode",1,"form-control"],[1,"col-md-3","col-sm-12"],[1,"form-check","form-switch"],["type","checkbox","id","auto-close","formControlName","autoCloseMenu",1,"form-check-input"],["for","auto-close",1,"form-check-label"],["type","checkbox","id","swipe-to-paginate","formControlName","swipeToPaginate",1,"form-check-input"],["for","swipe-to-paginate",1,"form-check-label"],["type","checkbox","id","emulate-book","formControlName","emulateBook",1,"form-check-input"],["for","emulate-book",1,"form-check-label"],["for","darkness",1,"form-label","range-label"],[1,"ms-1","range-text"],["type","range","id","darkness","min","10","max","100","step","1","formControlName","darkness",1,"form-range"],[1,"btn","btn-primary",3,"click"],[3,"value"],[1,"split-double"],[1,"fa-stack","fa-1x"],[1,"fa-regular","fa-square-full","fa-stack-2x"],[1,"fa","fa-image","fa-stack-1x"],[1,"fab","fa-1","fa-stack-1x"],[1,"fa-stack","fa","right"],[1,"fab","fa-2","fa-stack-1x"]],template:function(i,n){i&1&&P(0,As,13,16,"ng-container",4),i&2&&d("translocoRead","manga-reader")},dependencies:[dt,he,$i,nn,Nt,Vt,Ht,Dt,Ft,Ji,qi,Tt,Pi,bi,_i,Oi,mi,wi,ui,Si,fi,vi,xi,Ci,Re,ai,oi,Zi,Xi,Yi,je,hi,fe,ie],styles:[`img[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.image-container[_ngcontent-%COMP%]{text-align:center;align-items:center}.image-container.full-width[_ngcontent-%COMP%]{height:calc(var(--vh) * 100);display:grid}.image-container.full-height[_ngcontent-%COMP%]{height:100vh;display:flex;align-content:center}.image-container.original[_ngcontent-%COMP%]{height:100vh;display:grid}.image-container[_ngcontent-%COMP%]   .full-height[_ngcontent-%COMP%]{width:auto;margin:auto;max-height:calc(var(--vh) * 100);overflow:hidden;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-height.wide[_ngcontent-%COMP%]{height:100vh}.image-container[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{align-self:center;width:auto;margin:0 auto;vertical-align:top}.image-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin:0 auto;vertical-align:top;max-width:fit-content}.image-container[_ngcontent-%COMP%]   .fit-to-screen.full-width[_ngcontent-%COMP%]{width:100%;max-height:calc(var(--vh) * 100)}.bookmark-effect[_ngcontent-%COMP%]{animation:bookmark .7s cubic-bezier(.165,.84,.44,1)}.highlight[_ngcontent-%COMP%]{background-color:var(--manga-reader-next-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.highlight-2[_ngcontent-%COMP%]{background-color:var(--manga-reader-prev-highlight-bg-color)!important;animation:fadein .5s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{content:"";position:absolute;top:0;left:50%;height:100%;box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e}@supports (-moz-appearance: none){  .image-container.book-shadow[class*=double-offset]:before,   .image-container.book-shadow.wide:before{box-shadow:0 0 53.38px 25px #0000006e,0 0 6.28px 2px #0000006e,0 0 15.7px 4px #0000006e,0 0 1.57px .3px #0000006e,0 0 1px .5px #0000006e}}.current[_ngcontent-%COMP%]{background-color:var(--primary-color)}.loaded[_ngcontent-%COMP%]{font-weight:700}.reading-area[_ngcontent-%COMP%]{position:relative;overflow:auto;text-align:center}.reader[_ngcontent-%COMP%]{background-color:var(--manga-reader-bg-color);overflow:auto}.reader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{align-items:center}.title[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.bottom-menu[_ngcontent-%COMP%]{padding:20px}.overlay[_ngcontent-%COMP%]{background-color:var(--manga-reader-overlay-bg-color);-webkit-backdrop-filter:var(--manga-reader-overlay-filter);backdrop-filter:var(--manga-reader-overlay-filter);color:var(--manga-reader-overlay-text-color)}@media (min-width: 600px){.overlay[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .i[_ngcontent-%COMP%]{left:20px}.overlay[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .i[_ngcontent-%COMP%]{right:20px}}.split[_ngcontent-%COMP%]{height:20px;width:40px;z-index:1;top:0;overflow:hidden;border:2px solid #ccc;vertical-align:sub;display:inline-block}.split[_ngcontent-%COMP%]:before{margin-left:30%}.split[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{height:20px;width:20px;background-color:#fff9;margin-top:-16px}.split[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{height:20px;margin-left:20px;width:20px;background-color:#fff9;margin-top:-16px}.split[_ngcontent-%COMP%]   .none[_ngcontent-%COMP%]{background-color:#ffffff80}.split-double[_ngcontent-%COMP%]{height:20px;display:inline-block;font-size:.7em}.split-double[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{left:-7px}  .custom-slider .ngx-slider .ngx-slider-bar{background:#e9ffe2;height:2px}  .custom-slider .ngx-slider .ngx-slider-selection{background:var(--primary-color)}  .custom-slider .ngx-slider .ngx-slider-pointer{width:8px;height:16px;top:auto;bottom:0;background-color:var(--primary-color);border-top-left-radius:3px;border-top-right-radius:3px}  .custom-slider .ngx-slider .ngx-slider-pointer:after{display:none}  .custom-slider .ngx-slider .ngx-slider-bubble{bottom:14px;font-weight:700}  .custom-slider .ngx-slider .ngx-slider-limit{font-weight:700;color:#fff!important}  .custom-slider .ngx-slider .ngx-slider-tick{width:1px;height:10px;margin-left:4px;border-radius:0;background:#ffe4d1;top:-1px}  .custom-slider .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:var(--primary-color)}.webtoon-images[_ngcontent-%COMP%]{text-align:center;width:100%}.pagination-area[_ngcontent-%COMP%]{cursor:pointer;z-index:100}.pagination-area[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:42px}.pagination-area[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;width:25%;background:#0000;max-height:calc(var(--vh) * 100);z-index:100}.pagination-area[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{position:absolute;right:0;top:0;width:100%;background:#0000;z-index:100}.pagination-area[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:25%;background:#0000;max-height:calc(var(--vh) * 100);z-index:100}.pagination-area[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0;width:100%;background:#0000;z-index:100}
/*# sourceMappingURL=manga-reader.component-QZNJUNKW.css.map */`],data:{animation:[Pt("slideFromTop",[yt("in",Ve({transform:"translateY(0)"})),nt("void => *",[Ve({transform:"translateY(-100%)"}),it(wt)]),nt("* => void",[it(wt,Ve({transform:"translateY(-100%)"}))])]),Pt("slideFromBottom",[yt("in",Ve({transform:"translateY(0)"})),nt("void => *",[Ve({transform:"translateY(100%)"}),it(wt)]),nt("* => void",[it(wt,Ve({transform:"translateY(100%)"}))])])]},changeDetection:0});let s=r;return s})();var wl=[{path:":chapterId",component:jt},{path:":chapterId/list/:listId",component:jt}];export{wl as routes};
//# sourceMappingURL=chunk-HCNMYPLD.js.map
